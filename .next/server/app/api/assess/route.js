"use strict";(()=>{var e={};e.id=242,e.ids=[242],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},87561:e=>{e.exports=require("node:fs")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},71017:e=>{e.exports=require("path")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},71267:e=>{e.exports=require("worker_threads")},59796:e=>{e.exports=require("zlib")},29336:(e,s,r)=>{r.r(s),r.d(s,{headerHooks:()=>y,originalPathname:()=>A,patchFetch:()=>C,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>w,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>x});var t={};r.r(t),r.d(t,{GET:()=>d,OPTIONS:()=>h,POST:()=>l});var n=r(95419),o=r(69108),a=r(99678);r(78070);var i=r(53731),u=r(3702),p=r(72786),c=r(18166);async function l(e){try{let s=await e.json();console.log("\uD83D\uDCE5 Received from Orchids:",s);let{answers:r}=s;if(!r||!Array.isArray(r)||4!==r.length)return new Response(JSON.stringify({error:"Invalid request: expected 4 answers"}),{status:400,headers:{"Content-Type":"application/json"}});let t=`Career assessment: ${r.join(". ")}. Please recommend suitable career paths.`;console.log("\uD83D\uDD04 Converted to query:",t);let n=(0,p.$q)(t),o=await (0,i.K)(t),a=await (0,u.iG)(t,o,{limit:10});if(0===a.length)return new Response(JSON.stringify({careers:[{name:"General Career Guidance",match:50,description:"Based on your profile, we recommend exploring various career options. Please provide more specific information about your interests and strengths."}]}),{status:200,headers:{"Content-Type":"application/json"}});let l=(0,p.iJ)(a,n),d=(0,p.xF)(l,.9),h=(0,p.OD)(d,n,{maxTokens:3e3}),m=await (0,c.o)(t,h.context,n,{maxRetries:3,timeout:15e3});if(!m.success)return console.warn("Generation failed, returning fallback:",m.error),new Response(JSON.stringify({careers:[{name:"Career Guidance Needed",match:70,description:"Based on your interests in Math, Science, and Technology, we recommend exploring STEM careers. Please consult with a career counselor for personalized guidance."}],sessionId:Date.now().toString()}),{status:200,headers:{"Content-Type":"application/json"}});let g=function(e){let s=[],r=new Set;return[/(?:consider|recommend|explore|pursue)\s+(?:a\s+career\s+(?:in|as)\s+)?([A-Z][a-zA-Z\s]+?)(?:\.|,|\s+because|\s+which|\s+that)/gi,/(?:become|work\s+as)\s+(?:a|an)\s+([A-Z][a-zA-Z\s]+?)(?:\.|,|\s+because|\s+which|\s+that)/gi].forEach(s=>{for(let t of e.matchAll(s)){let e=t[1].trim();e.length>3&&e.length<50&&r.add(e)}}),Array.from(r).slice(0,5).forEach((r,t)=>{s.push({name:r,match:90-5*t,description:function(e,s){for(let r of e.split(/[.!?]+/))if(r.toLowerCase().includes(s.toLowerCase()))return r.trim()+".";return`${s} is a recommended career path based on your assessment.`}(e,r)})}),0===s.length&&s.push({name:"Personalized Career Path",match:85,description:e.substring(0,200)+"..."}),s}(m.response);return console.log("✅ Sending to Orchids:",{careers:g.length}),new Response(JSON.stringify({careers:g,sessionId:Date.now().toString(),fullResponse:m.response,footerPresent:m.response.includes("⚠️")}),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("❌ Assessment error:",e),new Response(JSON.stringify({error:"Internal server error: "+e.message}),{status:500,headers:{"Content-Type":"application/json"}})}}async function d(){return new Response(JSON.stringify({status:"ok",endpoint:"/api/assess",description:"Assessment endpoint for Orchids frontend",usage:{method:"POST",body:{answers:["string","string","string","string"]}}}),{status:200,headers:{"Content-Type":"application/json"}})}async function h(){return new Response(JSON.stringify({}),{status:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}})}let m=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/assess/route",pathname:"/api/assess",filename:"route",bundlePath:"app/api/assess/route"},resolvedPagePath:"C:\\Users\\SEELANGOV\\Desktop\\Thandi.ai\\app\\api\\assess\\route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:w,headerHooks:y,staticGenerationBailout:x}=m,A="/api/assess/route";function C(){return(0,a.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:f})}}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[638,206,200,631],()=>r(29336));module.exports=t})();