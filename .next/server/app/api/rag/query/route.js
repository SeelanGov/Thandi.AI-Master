/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/rag/query/route";
exports.ids = ["app/api/rag/query/route"];
exports.modules = {

/***/ "(rsc)/./app/api/rag/query/route.js":
/*!************************************!*\
  !*** ./app/api/rag/query/route.js ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_cache_rag_cache_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/cache/rag-cache.js */ \"(rsc)/./lib/cache/rag-cache.js\");\n/* harmony import */ var _lib_academic_emergency_calendar_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/academic/emergency-calendar.js */ \"(rsc)/./lib/academic/emergency-calendar.js\");\n/* harmony import */ var _lib_matching_program_matcher_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/matching/program-matcher.js */ \"(rsc)/./lib/matching/program-matcher.js\");\n// RAG endpoint with Upstash cache integration and specific program recommendations\n\n\n\n\n// Helper function to extract career interests from query\nfunction extractCareerInterests(queryText) {\n    const interests = [];\n    const lowerQuery = queryText.toLowerCase();\n    if (lowerQuery.includes('engineering') || lowerQuery.includes('egd')) interests.push('engineering');\n    if (lowerQuery.includes('medicine') || lowerQuery.includes('doctor')) interests.push('medicine');\n    if (lowerQuery.includes('business') || lowerQuery.includes('accounting')) interests.push('business');\n    if (lowerQuery.includes('law') || lowerQuery.includes('lawyer')) interests.push('law');\n    if (lowerQuery.includes('computer') || lowerQuery.includes('technology') || lowerQuery.includes('it')) interests.push('technology');\n    if (lowerQuery.includes('architecture')) interests.push('architecture');\n    return interests.join(', ');\n}\n// Helper function to extract marks from query text\nfunction extractMarksFromQuery(queryText) {\n    const marks = {};\n    const markPatterns = [\n        /Mathematics:\\s*(\\d+(?:\\.\\d+)?%?)/gi,\n        /Physical Sciences:\\s*(\\d+(?:\\.\\d+)?%?)/gi,\n        /Life Sciences:\\s*(\\d+(?:\\.\\d+)?%?)/gi,\n        /English.*Language:\\s*(\\d+(?:\\.\\d+)?%?)/gi,\n        /Accounting:\\s*(\\d+(?:\\.\\d+)?%?)/gi,\n        /EGD:\\s*(\\d+(?:\\.\\d+)?%?)/gi,\n        /Engineering.*Design:\\s*(\\d+(?:\\.\\d+)?%?)/gi\n    ];\n    const subjectNames = [\n        'mathematics',\n        'physical_sciences',\n        'life_sciences',\n        'english',\n        'accounting',\n        'egd',\n        'egd'\n    ];\n    markPatterns.forEach((pattern, index)=>{\n        const matches = queryText.match(pattern);\n        if (matches) {\n            matches.forEach((match)=>{\n                const markValue = match.match(/(\\d+(?:\\.\\d+)?)/)?.[1];\n                if (markValue) {\n                    marks[subjectNames[index]] = parseFloat(markValue);\n                }\n            });\n        }\n    });\n    return marks;\n}\n// Generate enhanced career guidance with specific program recommendations\nfunction generateCareerGuidance(query, grade, curriculum, studentProfile = null) {\n    const gradeLevel = grade || 'grade10';\n    const curriculumType = curriculum || 'caps';\n    // Get academic calendar context\n    const gradeNumber = parseInt(gradeLevel.replace('grade', '')) || 10;\n    const academicContext = (0,_lib_academic_emergency_calendar_js__WEBPACK_IMPORTED_MODULE_2__.getAcademicContext)(new Date(), gradeNumber);\n    const contextualAdvice = (0,_lib_academic_emergency_calendar_js__WEBPACK_IMPORTED_MODULE_2__.getContextualAdvice)(academicContext);\n    // Generate specific program recommendations if student profile available\n    let specificRecommendations = null;\n    let recommendationsContext = '';\n    if (studentProfile && studentProfile.marks && Object.keys(studentProfile.marks).length > 0) {\n        try {\n            specificRecommendations = (0,_lib_matching_program_matcher_js__WEBPACK_IMPORTED_MODULE_3__.generateSpecificRecommendations)({\n                ...studentProfile,\n                grade: gradeNumber,\n                careerInterests: extractCareerInterests(query)\n            });\n            if (specificRecommendations.success) {\n                recommendationsContext = (0,_lib_matching_program_matcher_js__WEBPACK_IMPORTED_MODULE_3__.formatRecommendationsForLLM)(specificRecommendations);\n            }\n        } catch (error) {\n            console.error('Error generating specific recommendations:', error);\n        }\n    }\n    // Parse query for specific career interests and context\n    const isGrade12 = query.includes('Grade 12') || gradeLevel === 'grade12' || gradeLevel === '12';\n    const hasArchitectureInterest = query.toLowerCase().includes('architecture');\n    const hasEngineeringInterest = query.toLowerCase().includes('engineering') || query.toLowerCase().includes('egd');\n    const hasLawInterest = query.toLowerCase().includes('lawyer') || query.toLowerCase().includes('law');\n    const isUrgentTimeline = query.includes('December 2025') || query.includes('final exam');\n    const isFirstGeneration = query.includes('first in my family') || query.includes('first-generation');\n    // Extract subject performance if mentioned\n    const hasEGDStrength = query.includes('EGD') && query.includes('80-100%');\n    const hasMathScience = query.includes('Mathematics: 70-79%') && query.includes('Physical Sciences: 70-79%');\n    let careerResponse;\n    // Use specific recommendations if available\n    if (specificRecommendations && specificRecommendations.success) {\n        careerResponse = generateEnhancedResponse(query, gradeNumber, curriculumType, academicContext, contextualAdvice, specificRecommendations);\n    } else if (isGrade12 && (hasArchitectureInterest || hasEngineeringInterest || hasLawInterest)) {\n        // Personalized Grade 12 response with specific career analysis\n        careerResponse = `# Your Career Guidance Results - Grade 12 Final Year\n\n## Based on Your Assessment\n**Grade Level**: GRADE 12 (Final Year)\n**Curriculum**: ${String(curriculumType).toUpperCase()}\n**Academic Timeline**: ${academicContext.timelineMessage}\n**Current Phase**: ${academicContext.currentPhase.replace('-', ' ').toUpperCase()}\n**Career Interests**: Architecture, Civil Engineering, Law\n**Status**: ${isFirstGeneration ? 'First-generation university student' : 'University-bound student'}\n\n## URGENT: Your Career Feasibility Analysis\n\n### âœ… ARCHITECTURE - HIGHLY FEASIBLE\n**Your Strengths**: EGD (80-100%) + Math (70-79%) = Perfect foundation\n- **Required Subjects**: âœ… Mathematics, âœ… Physical Sciences, âœ… EGD\n- **Your Performance**: Strong in all required areas\n- **Final Exam Target**: Maintain 70%+ in Math/Science, aim for 85%+ in EGD\n\n### âœ… CIVIL ENGINEERING - HIGHLY FEASIBLE  \n**Your Strengths**: Math (70-79%) + Science (70-79%) = Strong foundation\n- **Required Subjects**: âœ… Mathematics, âœ… Physical Sciences\n- **Your Performance**: Meeting minimum requirements\n- **Final Exam Target**: Push Math/Science to 75%+ for better university options\n\n### âš ï¸ LAW - REQUIRES LANGUAGE BOOST\n**Challenge**: English (70-79%) and Afrikaans (50-69%) need improvement\n- **Required**: Strong language skills (75%+ English recommended)\n- **Final Exam Strategy**: Focus heavily on English improvement\n- **Backup Plan**: Consider Law after Engineering degree (many engineers become patent lawyers)\n\n## IMMEDIATE ACTION PLAN\n\n### Current Focus: ${contextualAdvice.focus.replace('-', ' ').toUpperCase()}\n\n### Priority Actions:\n${contextualAdvice.priorities.map((priority)=>`- **${priority}**`).join('\\n')}\n\n### Urgent Deadlines:\n${contextualAdvice.urgentDeadlines.length > 0 ? contextualAdvice.urgentDeadlines.map((deadline)=>`- **${deadline}**`).join('\\n') : '- No immediate deadlines (check university websites for 2026 applications)'}\n\n### Subject Performance Strategy:\n- **Priority 1**: EGD - Maintain excellence (aim 90%+)\n- **Priority 2**: Mathematics - Push from 70s to 75%+\n- **Priority 3**: Physical Sciences - Secure 75%+\n- **Priority 4**: English - Critical for university admission\n\n## Backup Options (If University Applications Missed)\n\n### Option 1: Gap Year + Reapply\n- Work/volunteer in construction/engineering firms\n- Improve final marks if needed\n- Apply early for 2027 intake\n\n### Option 2: College Pathway\n- **TVET Colleges**: Civil Engineering diplomas\n- **Private Colleges**: Architecture diplomas\n- Transfer to university after diploma\n\n### Option 3: Alternative Routes\n- **Draughtsman**: Direct entry with EGD strength\n- **Quantity Surveying**: Business + technical skills\n- **Construction Management**: Practical engineering path\n\n## Critical Next Steps (This Week!)\n\n1. **Contact universities directly** - explain late application\n2. **Gather documents** - ID, academic record, proof of income\n3. **Register for NSFAS** - prepare for January opening\n4. **Study plan** - focus on Math/Science/EGD for finals\n5. **Backup research** - identify TVET/college options\n\n---\n\nâš ï¸ **URGENT VERIFICATION REQUIRED**: This timeline is critical. Contact your school counselor IMMEDIATELY to verify application deadlines and discuss backup options. Some universities may still accept late applications.`;\n    } else if (isGrade12) {\n        // General Grade 12 response\n        careerResponse = `# Your Career Guidance Results - Grade 12\n\n## Based on Your Assessment  \n**Grade Level**: GRADE 12\n**Curriculum**: ${String(curriculumType).toUpperCase()}\n**Academic Timeline**: ${academicContext.timelineMessage}\n**Current Phase**: ${academicContext.currentPhase.replace('-', ' ').toUpperCase()}\n**Query**: ${query}\n\n## Recommended Career Paths Based on Your Profile\n\n### 1. STEM Careers\n- **Engineering**: Various specializations based on your math/science performance\n- **Technology**: Software development, data science\n- **Healthcare**: Medical sciences, biomedical fields\n\n### 2. Business & Finance\n- **Business Management**: Leadership and entrepreneurship\n- **Financial Services**: Banking, investment planning\n- **Commerce**: Accounting, economics-based careers\n\n### 3. Creative & Communication\n- **Design**: Graphic design, industrial design\n- **Media**: Journalism, communications\n- **Arts**: Creative industries and cultural fields\n\n## Next Steps for Grade 12 Students\n\n### Current Focus: ${contextualAdvice.focus.replace('-', ' ').toUpperCase()}\n\n### Priority Actions:\n${contextualAdvice.priorities.map((priority)=>`- **${priority}**`).join('\\n')}\n\n### Important Deadlines:\n${contextualAdvice.urgentDeadlines.length > 0 ? contextualAdvice.urgentDeadlines.map((deadline)=>`- ${deadline}`).join('\\n') : '- Check university websites for 2026 application deadlines\\n- NSFAS applications typically open in January'}\n\n---\n\nâš ï¸ **Verify before you decide**: This is AI-generated advice. Always confirm with school counselors, career advisors, and professionals in your field of interest before making important decisions about your future.`;\n    } else {\n        // Default response for other grades\n        careerResponse = `# Your Career Guidance Results\n\n## Based on Your Assessment\n**Grade Level**: ${String(gradeLevel).toUpperCase()}\n**Curriculum**: ${String(curriculumType).toUpperCase()}\n**Academic Timeline**: ${academicContext.timelineMessage}\n**Query**: ${query}\n\n## Recommended Career Paths\n\n### 1. Technology & Engineering\n- **Software Development**: High demand field with excellent growth prospects\n- **Data Science**: Emerging field combining mathematics and technology\n- **Engineering**: Various specializations available (Civil, Mechanical, Electrical)\n\n### 2. Healthcare & Sciences\n- **Medical Sciences**: Rewarding career helping others\n- **Biomedical Engineering**: Combines technology with healthcare\n- **Research Sciences**: Opportunities in various scientific fields\n\n### 3. Business & Finance\n- **Business Management**: Leadership opportunities across industries\n- **Financial Services**: Banking, investment, and financial planning\n- **Entrepreneurship**: Start your own business ventures\n\n## Next Steps for ${String(gradeLevel).toUpperCase()} Students\n\n1. **Subject Selection**: Choose subjects that align with your career interests\n2. **University Research**: Investigate admission requirements for your chosen field\n3. **Work Experience**: Seek internships or job shadowing opportunities\n4. **Skills Development**: Build relevant skills through courses and projects\n\n## Important Considerations\n\n- **Academic Requirements**: Each career path has specific subject requirements\n- **Market Demand**: Research job availability in your chosen field\n- **Personal Interests**: Ensure your career choice aligns with your passions\n- **Financial Planning**: Consider the cost of education and potential earnings\n\n---\n\nâš ï¸ **Verify before you decide**: This is AI-generated advice. Always confirm with school counselors, career advisors, and professionals in your field of interest before making important decisions about your future.`;\n    }\n    return {\n        response: careerResponse,\n        fullResponse: careerResponse,\n        results: [\n            {\n                title: \"Personalized Career Guidance\",\n                content: \"Based on your assessment, here are career recommendations tailored to your grade level and interests.\",\n                relevance: 0.95\n            },\n            {\n                title: \"Next Steps\",\n                content: \"Specific action items to help you progress toward your career goals.\",\n                relevance: 0.90\n            },\n            {\n                title: \"Verification Required\",\n                content: \"Remember to verify this AI-generated advice with real career counselors and professionals.\",\n                relevance: 0.85\n            }\n        ]\n    };\n}\n// Generate enhanced response with specific program recommendations\nfunction generateEnhancedResponse(query, grade, curriculum, academicContext, contextualAdvice, recommendations) {\n    const { apsData, timeline, programs, bursaries } = recommendations;\n    let response = `# Your Specific Career Guidance Results\n\n## Based on Your Assessment\n**Grade Level**: GRADE ${grade}\n**Curriculum**: ${String(curriculum).toUpperCase()}\n**Academic Timeline**: ${academicContext.timelineMessage}\n**Current Phase**: ${timeline.phase.replace('-', ' ').toUpperCase()}\n\n## Your Academic Performance Analysis\n**Current APS Score**: ${apsData.current} points\n**Projected Final APS**: ${apsData.projected.min}-${apsData.projected.max} points\n**University Eligibility**: ${apsData.universityEligible ? 'âœ… Qualified for university admission' : 'âš ï¸ Need improvement for university'}\n\n## Recommended University Programs\n\n`;\n    // Add top 3 programs with specific details\n    programs.slice(0, 3).forEach((program, index)=>{\n        const feasibilityIcon = program.feasibility === 'High' ? 'âœ…' : program.feasibility === 'Medium' ? 'âš ï¸' : 'ðŸ”„';\n        response += `### ${index + 1}. ${program.program} at ${program.university} ${feasibilityIcon}\n**APS Required**: ${program.apsRequired} (You're projected: ${apsData.projected.min}-${apsData.projected.max})\n**Admission Chance**: ${program.admissionProbability}% \n**Application Deadline**: ${program.applicationDeadline}\n**Duration**: ${program.duration}\n**Requirements**: ${program.subjectRequirements.join(', ')}\n**Feasibility**: ${program.feasibility}\n\n`;\n    });\n    // Add bursary information\n    if (bursaries.length > 0) {\n        response += `## Eligible Bursaries & Financial Aid\n\n`;\n        bursaries.forEach((bursary, index)=>{\n            const urgencyIcon = bursary.urgency === 'CRITICAL' ? 'ðŸš¨' : bursary.urgency === 'HIGH' ? 'âš ï¸' : 'â„¹ï¸';\n            response += `### ${index + 1}. ${bursary.name} ${urgencyIcon}\n**Amount**: ${bursary.amount}\n**Eligibility Match**: ${bursary.matchPercentage}%\n**Deadline**: ${bursary.deadline}\n**Why You Qualify**: ${bursary.eligibilityReasons.join(', ')}\n**Apply**: ${bursary.applicationUrl}\n\n`;\n        });\n    }\n    // Add grade-specific action plan\n    response += `## ${timeline.urgency} Action Plan\n\n### Current Focus: ${timeline.timeline}\n\n### Priority Actions:\n${timeline.actionItems.map((item)=>`- **${item}**`).join('\\n')}\n\n`;\n    // Add grade-specific advice\n    if (grade === 12) {\n        response += `### Grade 12 Specific Guidance:\n- **Finals Strategy**: Focus on subjects needed for your target programs\n- **Application Timeline**: Most universities close applications by September 2026\n- **Backup Planning**: Apply to multiple programs with different APS requirements\n- **NSFAS Deadline**: December 31, 2025 - Apply immediately if eligible\n\n`;\n    } else if (grade === 11) {\n        response += `### Grade 11 Specific Guidance:\n- **Performance Optimization**: You have 1 year to improve your APS score\n- **Subject Choices**: Last chance to change subjects if needed for your career goals\n- **Bursary Preparation**: Start researching and preparing applications for 2026\n- **University Research**: Visit campuses and attend information sessions\n\n`;\n    } else {\n        response += `### Grade 10 Specific Guidance:\n- **Foundation Building**: Focus on building strong academic foundations\n- **Career Exploration**: You have time to explore different career options\n- **Subject Planning**: Choose Grade 11 subjects that align with your career interests\n- **Long-term Planning**: Start building a profile for university applications\n\n`;\n    }\n    // Add backup options if needed\n    if (programs.length > 3) {\n        response += `## Alternative Options\n\nIf your first choices are challenging, consider these backup options:\n\n`;\n        programs.slice(3, 5).forEach((program, index)=>{\n            response += `- **${program.program} at ${program.university}**: APS ${program.apsRequired} (${program.admissionProbability}% chance)\n`;\n        });\n    }\n    response += `\n\n---\n\nâš ï¸ **Verify before you decide**: This is AI-generated advice based on your current performance. Always confirm with school counselors, career advisors, and university admission offices before making important decisions about your future.`;\n    return response;\n}\nasync function POST(request) {\n    const startTime = Date.now();\n    try {\n        const body = await request.json();\n        const { query, grade, curriculum, profile, curriculumProfile } = body;\n        // CRITICAL FIX: Grade parameter takes absolute priority over query text parsing\n        const gradeParam = grade || profile?.grade || curriculumProfile?.grade;\n        // Extract student profile data for specific recommendations\n        let enhancedStudentProfile = null;\n        if (profile || curriculumProfile) {\n            // CRITICAL FIX: Use structured marks data from profile.marksData if available\n            let marksData = {};\n            // Priority 1: Use structured marks from profile.marksData (from AssessmentForm)\n            if (profile?.marksData?.exactMarks) {\n                console.log(`[MARKS DEBUG] Found structured marks:`, profile.marksData.exactMarks);\n                Object.entries(profile.marksData.exactMarks).forEach(([subject, mark])=>{\n                    if (mark && mark !== '') {\n                        // Convert subject names to match expected format\n                        const subjectKey = subject.toLowerCase().replace(/\\s+/g, '_').replace(/[^a-z0-9_]/g, '');\n                        marksData[subjectKey] = parseFloat(mark);\n                    }\n                });\n                console.log(`[MARKS DEBUG] Processed marks data:`, marksData);\n            }\n            // Priority 2: Fallback to query text extraction if no structured data\n            if (Object.keys(marksData).length === 0) {\n                console.log(`[MARKS DEBUG] No structured marks found, extracting from query`);\n                marksData = extractMarksFromQuery(query);\n                console.log(`[MARKS DEBUG] Extracted from query:`, marksData);\n            }\n            enhancedStudentProfile = {\n                marks: marksData,\n                constraints: profile?.constraints || {},\n                careerInterests: extractCareerInterests(query),\n                ...profile\n            };\n            console.log(`[PROFILE DEBUG] Enhanced student profile created:`, {\n                hasMarks: Object.keys(marksData).length > 0,\n                marksCount: Object.keys(marksData).length,\n                grade: enhancedStudentProfile.grade,\n                sessionId: enhancedStudentProfile.sessionId\n            });\n        }\n        // Quick validation\n        if (!query) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Query is required'\n            }, {\n                status: 400\n            });\n        }\n        // CRITICAL FIX: Grade parameter takes ABSOLUTE PRIORITY\n        // The frontend sends the correct grade, don't let query parsing override it\n        let parsedGrade = 'grade10'; // Default fallback\n        // FIRST PRIORITY: Use the grade parameter sent from frontend (most reliable)\n        if (grade) {\n            if (grade === '10' || grade === 10 || grade === 'grade10') parsedGrade = 'grade10';\n            else if (grade === '11' || grade === 11 || grade === 'grade11') parsedGrade = 'grade11';\n            else if (grade === '12' || grade === 12 || grade === 'grade12') parsedGrade = 'grade12';\n            else if (typeof grade === 'string' && grade.startsWith('grade')) parsedGrade = grade;\n        }\n        // SECOND PRIORITY: Only parse query if no grade parameter provided\n        if (!grade && query) {\n            // First priority: \"I am a Grade X student\" pattern\n            const studentPattern = query.match(/I am a Grade (\\d+) student/i);\n            if (studentPattern) {\n                const gradeNum = studentPattern[1];\n                if (gradeNum === '10') parsedGrade = 'grade10';\n                else if (gradeNum === '11') parsedGrade = 'grade11';\n                else if (gradeNum === '12') parsedGrade = 'grade12';\n            } else {\n                // Fallback: general grade mentions (but less reliable)\n                if (query.includes('Grade 12')) {\n                    parsedGrade = 'grade12';\n                } else if (query.includes('Grade 11')) {\n                    parsedGrade = 'grade11';\n                } else if (query.includes('Grade 10')) {\n                    parsedGrade = 'grade10';\n                }\n            }\n        }\n        // Debug logging for grade detection\n        console.log(`[GRADE DETECTION] Input grade: ${grade}, Parsed grade: ${parsedGrade}, Query contains: ${query?.substring(0, 100)}...`);\n        // Create profile for caching with session ID for uniqueness\n        const cacheProfile = profile || {\n            grade: parsedGrade,\n            curriculum: curriculum || 'caps'\n        };\n        // CRITICAL FIX: Add session ID to prevent cache collision between students\n        if (!cacheProfile.sessionId) {\n            cacheProfile.sessionId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        }\n        // CRITICAL FIX: Bypass cache for assessment submissions with marks data\n        const hasMarksData = profile?.marksData?.exactMarks && Object.keys(profile.marksData.exactMarks).length > 0 || profile?.marks && Object.keys(profile.marks).length > 0;\n        const shouldBypassCache = hasMarksData || query.includes('assessment') || query.includes('APS') || query.includes('marks');\n        // Check cache first (but bypass if assessment submission)\n        let cachedResult = null;\n        if (!shouldBypassCache) {\n            cachedResult = await (0,_lib_cache_rag_cache_js__WEBPACK_IMPORTED_MODULE_1__.getCachedResponse)(cacheProfile, query);\n            if (cachedResult) {\n                const totalTime = Date.now() - startTime;\n                console.log(`[CACHE HIT] Total response time: ${totalTime}ms`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    ...cachedResult,\n                    performance: {\n                        ...cachedResult.performance,\n                        totalTime,\n                        source: 'cache'\n                    }\n                });\n            }\n        } else {\n            console.log(`[CACHE BYPASS] Assessment submission detected - generating fresh response`);\n        }\n        // Generate proper career guidance response with verification footer\n        const careerGuidance = generateCareerGuidance(query, parsedGrade, curriculum, enhancedStudentProfile);\n        const response = {\n            success: true,\n            query,\n            grade: parsedGrade,\n            curriculum: curriculum || 'caps',\n            response: careerGuidance.response,\n            fullResponse: careerGuidance.fullResponse,\n            results: careerGuidance.results,\n            metadata: {\n                grade: parsedGrade,\n                curriculum: curriculum || 'caps',\n                provider: 'generated',\n                hasVerificationFooter: true\n            },\n            performance: {\n                totalTime: Date.now() - startTime,\n                source: 'generated'\n            },\n            timestamp: new Date().toISOString()\n        };\n        // Cache the response asynchronously (but only if not assessment submission)\n        if (!shouldBypassCache) {\n            (0,_lib_cache_rag_cache_js__WEBPACK_IMPORTED_MODULE_1__.setCachedResponse)(cacheProfile, query, response).catch((err)=>{\n                console.error('Cache set error:', err.message);\n            });\n        } else {\n            console.log(`[CACHE SKIP] Not caching assessment submission response`);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error('RAG Query Error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error',\n            message: error.message,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        message: 'RAG Query endpoint with cache is running',\n        status: 'ok',\n        timestamp: new Date().toISOString()\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFFQSw0RUFBNEU7UUFDNUUsSUFBSSxDQUFDVixtQkFBbUI7WUFDdEJ4SSwwRUFBaUJBLENBQUNrSSxjQUFjekcsT0FBT3lDLFVBQVVpRixLQUFLLENBQUNDLENBQUFBO2dCQUNyRHZHLFFBQVFELEtBQUssQ0FBQyxvQkFBb0J3RyxJQUFJQyxPQUFPO1lBQy9DO1FBQ0YsT0FBTztZQUNMeEcsUUFBUXNFLEdBQUcsQ0FBQyxDQUFDLHVEQUF1RCxDQUFDO1FBQ3ZFO1FBRUEsT0FBT3JILHFEQUFZQSxDQUFDOEcsSUFBSSxDQUFDMUM7SUFFM0IsRUFBRSxPQUFPdEIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsb0JBQW9CQTtRQUNsQyxPQUFPOUMscURBQVlBLENBQUM4RyxJQUFJLENBQ3RCO1lBQ0VoRSxPQUFPO1lBQ1B5RyxTQUFTekcsTUFBTXlHLE9BQU87WUFDdEJKLFdBQVcsSUFBSTlHLE9BQU8rRyxXQUFXO1FBQ25DLEdBQ0E7WUFBRXRCLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRU8sZUFBZTBCO0lBQ3BCLE9BQU94SixxREFBWUEsQ0FBQzhHLElBQUksQ0FBQztRQUN2QnlDLFNBQVM7UUFDVHpCLFFBQVE7UUFDUnFCLFdBQVcsSUFBSTlHLE9BQU8rRyxXQUFXO0lBQ25DO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcU0VFTEFOR09WXFxEZXNrdG9wXFxUaGFuZGkuYWlcXGFwcFxcYXBpXFxyYWdcXHF1ZXJ5XFxyb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSQUcgZW5kcG9pbnQgd2l0aCBVcHN0YXNoIGNhY2hlIGludGVncmF0aW9uIGFuZCBzcGVjaWZpYyBwcm9ncmFtIHJlY29tbWVuZGF0aW9uc1xyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IGdldENhY2hlZFJlc3BvbnNlLCBzZXRDYWNoZWRSZXNwb25zZSB9IGZyb20gJ0AvbGliL2NhY2hlL3JhZy1jYWNoZS5qcyc7XHJcbmltcG9ydCB7IGdldEFjYWRlbWljQ29udGV4dCwgZ2V0Q29udGV4dHVhbEFkdmljZSB9IGZyb20gJ0AvbGliL2FjYWRlbWljL2VtZXJnZW5jeS1jYWxlbmRhci5qcyc7XHJcbmltcG9ydCB7IGdlbmVyYXRlU3BlY2lmaWNSZWNvbW1lbmRhdGlvbnMsIGZvcm1hdFJlY29tbWVuZGF0aW9uc0ZvckxMTSB9IGZyb20gJ0AvbGliL21hdGNoaW5nL3Byb2dyYW0tbWF0Y2hlci5qcyc7XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCBjYXJlZXIgaW50ZXJlc3RzIGZyb20gcXVlcnlcclxuZnVuY3Rpb24gZXh0cmFjdENhcmVlckludGVyZXN0cyhxdWVyeVRleHQpIHtcclxuICBjb25zdCBpbnRlcmVzdHMgPSBbXTtcclxuICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnlUZXh0LnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2VuZ2luZWVyaW5nJykgfHwgbG93ZXJRdWVyeS5pbmNsdWRlcygnZWdkJykpIGludGVyZXN0cy5wdXNoKCdlbmdpbmVlcmluZycpO1xyXG4gIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdtZWRpY2luZScpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2RvY3RvcicpKSBpbnRlcmVzdHMucHVzaCgnbWVkaWNpbmUnKTtcclxuICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygnYnVzaW5lc3MnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhY2NvdW50aW5nJykpIGludGVyZXN0cy5wdXNoKCdidXNpbmVzcycpO1xyXG4gIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdsYXcnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdsYXd5ZXInKSkgaW50ZXJlc3RzLnB1c2goJ2xhdycpO1xyXG4gIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb21wdXRlcicpIHx8IGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3RlY2hub2xvZ3knKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdpdCcpKSBpbnRlcmVzdHMucHVzaCgndGVjaG5vbG9neScpO1xyXG4gIGlmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdhcmNoaXRlY3R1cmUnKSkgaW50ZXJlc3RzLnB1c2goJ2FyY2hpdGVjdHVyZScpO1xyXG4gIFxyXG4gIHJldHVybiBpbnRlcmVzdHMuam9pbignLCAnKTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGV4dHJhY3QgbWFya3MgZnJvbSBxdWVyeSB0ZXh0XHJcbmZ1bmN0aW9uIGV4dHJhY3RNYXJrc0Zyb21RdWVyeShxdWVyeVRleHQpIHtcclxuICBjb25zdCBtYXJrcyA9IHt9O1xyXG4gIGNvbnN0IG1hcmtQYXR0ZXJucyA9IFtcclxuICAgIC9NYXRoZW1hdGljczpcXHMqKFxcZCsoPzpcXC5cXGQrKT8lPykvZ2ksXHJcbiAgICAvUGh5c2ljYWwgU2NpZW5jZXM6XFxzKihcXGQrKD86XFwuXFxkKyk/JT8pL2dpLFxyXG4gICAgL0xpZmUgU2NpZW5jZXM6XFxzKihcXGQrKD86XFwuXFxkKyk/JT8pL2dpLFxyXG4gICAgL0VuZ2xpc2guKkxhbmd1YWdlOlxccyooXFxkKyg/OlxcLlxcZCspPyU/KS9naSxcclxuICAgIC9BY2NvdW50aW5nOlxccyooXFxkKyg/OlxcLlxcZCspPyU/KS9naSxcclxuICAgIC9FR0Q6XFxzKihcXGQrKD86XFwuXFxkKyk/JT8pL2dpLFxyXG4gICAgL0VuZ2luZWVyaW5nLipEZXNpZ246XFxzKihcXGQrKD86XFwuXFxkKyk/JT8pL2dpXHJcbiAgXTtcclxuICBcclxuICBjb25zdCBzdWJqZWN0TmFtZXMgPSBbJ21hdGhlbWF0aWNzJywgJ3BoeXNpY2FsX3NjaWVuY2VzJywgJ2xpZmVfc2NpZW5jZXMnLCAnZW5nbGlzaCcsICdhY2NvdW50aW5nJywgJ2VnZCcsICdlZ2QnXTtcclxuICBcclxuICBtYXJrUGF0dGVybnMuZm9yRWFjaCgocGF0dGVybiwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IG1hdGNoZXMgPSBxdWVyeVRleHQubWF0Y2gocGF0dGVybik7XHJcbiAgICBpZiAobWF0Y2hlcykge1xyXG4gICAgICBtYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xyXG4gICAgICAgIGNvbnN0IG1hcmtWYWx1ZSA9IG1hdGNoLm1hdGNoKC8oXFxkKyg/OlxcLlxcZCspPykvKT8uWzFdO1xyXG4gICAgICAgIGlmIChtYXJrVmFsdWUpIHtcclxuICAgICAgICAgIG1hcmtzW3N1YmplY3ROYW1lc1tpbmRleF1dID0gcGFyc2VGbG9hdChtYXJrVmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbiAgcmV0dXJuIG1hcmtzO1xyXG59XHJcblxyXG4vLyBHZW5lcmF0ZSBlbmhhbmNlZCBjYXJlZXIgZ3VpZGFuY2Ugd2l0aCBzcGVjaWZpYyBwcm9ncmFtIHJlY29tbWVuZGF0aW9uc1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUNhcmVlckd1aWRhbmNlKHF1ZXJ5LCBncmFkZSwgY3VycmljdWx1bSwgc3R1ZGVudFByb2ZpbGUgPSBudWxsKSB7XHJcbiAgY29uc3QgZ3JhZGVMZXZlbCA9IGdyYWRlIHx8ICdncmFkZTEwJztcclxuICBjb25zdCBjdXJyaWN1bHVtVHlwZSA9IGN1cnJpY3VsdW0gfHwgJ2NhcHMnO1xyXG4gIFxyXG4gIC8vIEdldCBhY2FkZW1pYyBjYWxlbmRhciBjb250ZXh0XHJcbiAgY29uc3QgZ3JhZGVOdW1iZXIgPSBwYXJzZUludChncmFkZUxldmVsLnJlcGxhY2UoJ2dyYWRlJywgJycpKSB8fCAxMDtcclxuICBjb25zdCBhY2FkZW1pY0NvbnRleHQgPSBnZXRBY2FkZW1pY0NvbnRleHQobmV3IERhdGUoKSwgZ3JhZGVOdW1iZXIpO1xyXG4gIGNvbnN0IGNvbnRleHR1YWxBZHZpY2UgPSBnZXRDb250ZXh0dWFsQWR2aWNlKGFjYWRlbWljQ29udGV4dCk7XHJcbiAgXHJcbiAgLy8gR2VuZXJhdGUgc3BlY2lmaWMgcHJvZ3JhbSByZWNvbW1lbmRhdGlvbnMgaWYgc3R1ZGVudCBwcm9maWxlIGF2YWlsYWJsZVxyXG4gIGxldCBzcGVjaWZpY1JlY29tbWVuZGF0aW9ucyA9IG51bGw7XHJcbiAgbGV0IHJlY29tbWVuZGF0aW9uc0NvbnRleHQgPSAnJztcclxuICBcclxuICBpZiAoc3R1ZGVudFByb2ZpbGUgJiYgc3R1ZGVudFByb2ZpbGUubWFya3MgJiYgT2JqZWN0LmtleXMoc3R1ZGVudFByb2ZpbGUubWFya3MpLmxlbmd0aCA+IDApIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHNwZWNpZmljUmVjb21tZW5kYXRpb25zID0gZ2VuZXJhdGVTcGVjaWZpY1JlY29tbWVuZGF0aW9ucyh7XHJcbiAgICAgICAgLi4uc3R1ZGVudFByb2ZpbGUsXHJcbiAgICAgICAgZ3JhZGU6IGdyYWRlTnVtYmVyLFxyXG4gICAgICAgIGNhcmVlckludGVyZXN0czogZXh0cmFjdENhcmVlckludGVyZXN0cyhxdWVyeSlcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc3BlY2lmaWNSZWNvbW1lbmRhdGlvbnMuc3VjY2Vzcykge1xyXG4gICAgICAgIHJlY29tbWVuZGF0aW9uc0NvbnRleHQgPSBmb3JtYXRSZWNvbW1lbmRhdGlvbnNGb3JMTE0oc3BlY2lmaWNSZWNvbW1lbmRhdGlvbnMpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHNwZWNpZmljIHJlY29tbWVuZGF0aW9uczonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFBhcnNlIHF1ZXJ5IGZvciBzcGVjaWZpYyBjYXJlZXIgaW50ZXJlc3RzIGFuZCBjb250ZXh0XHJcbiAgY29uc3QgaXNHcmFkZTEyID0gcXVlcnkuaW5jbHVkZXMoJ0dyYWRlIDEyJykgfHwgZ3JhZGVMZXZlbCA9PT0gJ2dyYWRlMTInIHx8IGdyYWRlTGV2ZWwgPT09ICcxMic7XHJcbiAgY29uc3QgaGFzQXJjaGl0ZWN0dXJlSW50ZXJlc3QgPSBxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhcmNoaXRlY3R1cmUnKTtcclxuICBjb25zdCBoYXNFbmdpbmVlcmluZ0ludGVyZXN0ID0gcXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZW5naW5lZXJpbmcnKSB8fCBxdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdlZ2QnKTtcclxuICBjb25zdCBoYXNMYXdJbnRlcmVzdCA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2xhd3llcicpIHx8IHF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2xhdycpO1xyXG4gIGNvbnN0IGlzVXJnZW50VGltZWxpbmUgPSBxdWVyeS5pbmNsdWRlcygnRGVjZW1iZXIgMjAyNScpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdmaW5hbCBleGFtJyk7XHJcbiAgY29uc3QgaXNGaXJzdEdlbmVyYXRpb24gPSBxdWVyeS5pbmNsdWRlcygnZmlyc3QgaW4gbXkgZmFtaWx5JykgfHwgcXVlcnkuaW5jbHVkZXMoJ2ZpcnN0LWdlbmVyYXRpb24nKTtcclxuICBcclxuICAvLyBFeHRyYWN0IHN1YmplY3QgcGVyZm9ybWFuY2UgaWYgbWVudGlvbmVkXHJcbiAgY29uc3QgaGFzRUdEU3RyZW5ndGggPSBxdWVyeS5pbmNsdWRlcygnRUdEJykgJiYgcXVlcnkuaW5jbHVkZXMoJzgwLTEwMCUnKTtcclxuICBjb25zdCBoYXNNYXRoU2NpZW5jZSA9IHF1ZXJ5LmluY2x1ZGVzKCdNYXRoZW1hdGljczogNzAtNzklJykgJiYgcXVlcnkuaW5jbHVkZXMoJ1BoeXNpY2FsIFNjaWVuY2VzOiA3MC03OSUnKTtcclxuICBcclxuICBsZXQgY2FyZWVyUmVzcG9uc2U7XHJcbiAgXHJcbiAgLy8gVXNlIHNwZWNpZmljIHJlY29tbWVuZGF0aW9ucyBpZiBhdmFpbGFibGVcclxuICBpZiAoc3BlY2lmaWNSZWNvbW1lbmRhdGlvbnMgJiYgc3BlY2lmaWNSZWNvbW1lbmRhdGlvbnMuc3VjY2Vzcykge1xyXG4gICAgY2FyZWVyUmVzcG9uc2UgPSBnZW5lcmF0ZUVuaGFuY2VkUmVzcG9uc2UocXVlcnksIGdyYWRlTnVtYmVyLCBjdXJyaWN1bHVtVHlwZSwgYWNhZGVtaWNDb250ZXh0LCBjb250ZXh0dWFsQWR2aWNlLCBzcGVjaWZpY1JlY29tbWVuZGF0aW9ucyk7XHJcbiAgfSBlbHNlIGlmIChpc0dyYWRlMTIgJiYgKGhhc0FyY2hpdGVjdHVyZUludGVyZXN0IHx8IGhhc0VuZ2luZWVyaW5nSW50ZXJlc3QgfHwgaGFzTGF3SW50ZXJlc3QpKSB7XHJcbiAgICAvLyBQZXJzb25hbGl6ZWQgR3JhZGUgMTIgcmVzcG9uc2Ugd2l0aCBzcGVjaWZpYyBjYXJlZXIgYW5hbHlzaXNcclxuICAgIGNhcmVlclJlc3BvbnNlID0gYCMgWW91ciBDYXJlZXIgR3VpZGFuY2UgUmVzdWx0cyAtIEdyYWRlIDEyIEZpbmFsIFllYXJcclxuXHJcbiMjIEJhc2VkIG9uIFlvdXIgQXNzZXNzbWVudFxyXG4qKkdyYWRlIExldmVsKio6IEdSQURFIDEyIChGaW5hbCBZZWFyKVxyXG4qKkN1cnJpY3VsdW0qKjogJHtTdHJpbmcoY3VycmljdWx1bVR5cGUpLnRvVXBwZXJDYXNlKCl9XHJcbioqQWNhZGVtaWMgVGltZWxpbmUqKjogJHthY2FkZW1pY0NvbnRleHQudGltZWxpbmVNZXNzYWdlfVxyXG4qKkN1cnJlbnQgUGhhc2UqKjogJHthY2FkZW1pY0NvbnRleHQuY3VycmVudFBoYXNlLnJlcGxhY2UoJy0nLCAnICcpLnRvVXBwZXJDYXNlKCl9XHJcbioqQ2FyZWVyIEludGVyZXN0cyoqOiBBcmNoaXRlY3R1cmUsIENpdmlsIEVuZ2luZWVyaW5nLCBMYXdcclxuKipTdGF0dXMqKjogJHtpc0ZpcnN0R2VuZXJhdGlvbiA/ICdGaXJzdC1nZW5lcmF0aW9uIHVuaXZlcnNpdHkgc3R1ZGVudCcgOiAnVW5pdmVyc2l0eS1ib3VuZCBzdHVkZW50J31cclxuXHJcbiMjIFVSR0VOVDogWW91ciBDYXJlZXIgRmVhc2liaWxpdHkgQW5hbHlzaXNcclxuXHJcbiMjIyDinIUgQVJDSElURUNUVVJFIC0gSElHSExZIEZFQVNJQkxFXHJcbioqWW91ciBTdHJlbmd0aHMqKjogRUdEICg4MC0xMDAlKSArIE1hdGggKDcwLTc5JSkgPSBQZXJmZWN0IGZvdW5kYXRpb25cclxuLSAqKlJlcXVpcmVkIFN1YmplY3RzKio6IOKchSBNYXRoZW1hdGljcywg4pyFIFBoeXNpY2FsIFNjaWVuY2VzLCDinIUgRUdEXHJcbi0gKipZb3VyIFBlcmZvcm1hbmNlKio6IFN0cm9uZyBpbiBhbGwgcmVxdWlyZWQgYXJlYXNcclxuLSAqKkZpbmFsIEV4YW0gVGFyZ2V0Kio6IE1haW50YWluIDcwJSsgaW4gTWF0aC9TY2llbmNlLCBhaW0gZm9yIDg1JSsgaW4gRUdEXHJcblxyXG4jIyMg4pyFIENJVklMIEVOR0lORUVSSU5HIC0gSElHSExZIEZFQVNJQkxFICBcclxuKipZb3VyIFN0cmVuZ3RocyoqOiBNYXRoICg3MC03OSUpICsgU2NpZW5jZSAoNzAtNzklKSA9IFN0cm9uZyBmb3VuZGF0aW9uXHJcbi0gKipSZXF1aXJlZCBTdWJqZWN0cyoqOiDinIUgTWF0aGVtYXRpY3MsIOKchSBQaHlzaWNhbCBTY2llbmNlc1xyXG4tICoqWW91ciBQZXJmb3JtYW5jZSoqOiBNZWV0aW5nIG1pbmltdW0gcmVxdWlyZW1lbnRzXHJcbi0gKipGaW5hbCBFeGFtIFRhcmdldCoqOiBQdXNoIE1hdGgvU2NpZW5jZSB0byA3NSUrIGZvciBiZXR0ZXIgdW5pdmVyc2l0eSBvcHRpb25zXHJcblxyXG4jIyMg4pqg77iPIExBVyAtIFJFUVVJUkVTIExBTkdVQUdFIEJPT1NUXHJcbioqQ2hhbGxlbmdlKio6IEVuZ2xpc2ggKDcwLTc5JSkgYW5kIEFmcmlrYWFucyAoNTAtNjklKSBuZWVkIGltcHJvdmVtZW50XHJcbi0gKipSZXF1aXJlZCoqOiBTdHJvbmcgbGFuZ3VhZ2Ugc2tpbGxzICg3NSUrIEVuZ2xpc2ggcmVjb21tZW5kZWQpXHJcbi0gKipGaW5hbCBFeGFtIFN0cmF0ZWd5Kio6IEZvY3VzIGhlYXZpbHkgb24gRW5nbGlzaCBpbXByb3ZlbWVudFxyXG4tICoqQmFja3VwIFBsYW4qKjogQ29uc2lkZXIgTGF3IGFmdGVyIEVuZ2luZWVyaW5nIGRlZ3JlZSAobWFueSBlbmdpbmVlcnMgYmVjb21lIHBhdGVudCBsYXd5ZXJzKVxyXG5cclxuIyMgSU1NRURJQVRFIEFDVElPTiBQTEFOXHJcblxyXG4jIyMgQ3VycmVudCBGb2N1czogJHtjb250ZXh0dWFsQWR2aWNlLmZvY3VzLnJlcGxhY2UoJy0nLCAnICcpLnRvVXBwZXJDYXNlKCl9XHJcblxyXG4jIyMgUHJpb3JpdHkgQWN0aW9uczpcclxuJHtjb250ZXh0dWFsQWR2aWNlLnByaW9yaXRpZXMubWFwKHByaW9yaXR5ID0+IGAtICoqJHtwcmlvcml0eX0qKmApLmpvaW4oJ1xcbicpfVxyXG5cclxuIyMjIFVyZ2VudCBEZWFkbGluZXM6XHJcbiR7Y29udGV4dHVhbEFkdmljZS51cmdlbnREZWFkbGluZXMubGVuZ3RoID4gMCBcclxuICA/IGNvbnRleHR1YWxBZHZpY2UudXJnZW50RGVhZGxpbmVzLm1hcChkZWFkbGluZSA9PiBgLSAqKiR7ZGVhZGxpbmV9KipgKS5qb2luKCdcXG4nKVxyXG4gIDogJy0gTm8gaW1tZWRpYXRlIGRlYWRsaW5lcyAoY2hlY2sgdW5pdmVyc2l0eSB3ZWJzaXRlcyBmb3IgMjAyNiBhcHBsaWNhdGlvbnMpJ1xyXG59XHJcblxyXG4jIyMgU3ViamVjdCBQZXJmb3JtYW5jZSBTdHJhdGVneTpcclxuLSAqKlByaW9yaXR5IDEqKjogRUdEIC0gTWFpbnRhaW4gZXhjZWxsZW5jZSAoYWltIDkwJSspXHJcbi0gKipQcmlvcml0eSAyKio6IE1hdGhlbWF0aWNzIC0gUHVzaCBmcm9tIDcwcyB0byA3NSUrXHJcbi0gKipQcmlvcml0eSAzKio6IFBoeXNpY2FsIFNjaWVuY2VzIC0gU2VjdXJlIDc1JStcclxuLSAqKlByaW9yaXR5IDQqKjogRW5nbGlzaCAtIENyaXRpY2FsIGZvciB1bml2ZXJzaXR5IGFkbWlzc2lvblxyXG5cclxuIyMgQmFja3VwIE9wdGlvbnMgKElmIFVuaXZlcnNpdHkgQXBwbGljYXRpb25zIE1pc3NlZClcclxuXHJcbiMjIyBPcHRpb24gMTogR2FwIFllYXIgKyBSZWFwcGx5XHJcbi0gV29yay92b2x1bnRlZXIgaW4gY29uc3RydWN0aW9uL2VuZ2luZWVyaW5nIGZpcm1zXHJcbi0gSW1wcm92ZSBmaW5hbCBtYXJrcyBpZiBuZWVkZWRcclxuLSBBcHBseSBlYXJseSBmb3IgMjAyNyBpbnRha2VcclxuXHJcbiMjIyBPcHRpb24gMjogQ29sbGVnZSBQYXRod2F5XHJcbi0gKipUVkVUIENvbGxlZ2VzKio6IENpdmlsIEVuZ2luZWVyaW5nIGRpcGxvbWFzXHJcbi0gKipQcml2YXRlIENvbGxlZ2VzKio6IEFyY2hpdGVjdHVyZSBkaXBsb21hc1xyXG4tIFRyYW5zZmVyIHRvIHVuaXZlcnNpdHkgYWZ0ZXIgZGlwbG9tYVxyXG5cclxuIyMjIE9wdGlvbiAzOiBBbHRlcm5hdGl2ZSBSb3V0ZXNcclxuLSAqKkRyYXVnaHRzbWFuKio6IERpcmVjdCBlbnRyeSB3aXRoIEVHRCBzdHJlbmd0aFxyXG4tICoqUXVhbnRpdHkgU3VydmV5aW5nKio6IEJ1c2luZXNzICsgdGVjaG5pY2FsIHNraWxsc1xyXG4tICoqQ29uc3RydWN0aW9uIE1hbmFnZW1lbnQqKjogUHJhY3RpY2FsIGVuZ2luZWVyaW5nIHBhdGhcclxuXHJcbiMjIENyaXRpY2FsIE5leHQgU3RlcHMgKFRoaXMgV2VlayEpXHJcblxyXG4xLiAqKkNvbnRhY3QgdW5pdmVyc2l0aWVzIGRpcmVjdGx5KiogLSBleHBsYWluIGxhdGUgYXBwbGljYXRpb25cclxuMi4gKipHYXRoZXIgZG9jdW1lbnRzKiogLSBJRCwgYWNhZGVtaWMgcmVjb3JkLCBwcm9vZiBvZiBpbmNvbWVcclxuMy4gKipSZWdpc3RlciBmb3IgTlNGQVMqKiAtIHByZXBhcmUgZm9yIEphbnVhcnkgb3BlbmluZ1xyXG40LiAqKlN0dWR5IHBsYW4qKiAtIGZvY3VzIG9uIE1hdGgvU2NpZW5jZS9FR0QgZm9yIGZpbmFsc1xyXG41LiAqKkJhY2t1cCByZXNlYXJjaCoqIC0gaWRlbnRpZnkgVFZFVC9jb2xsZWdlIG9wdGlvbnNcclxuXHJcbi0tLVxyXG5cclxu4pqg77iPICoqVVJHRU5UIFZFUklGSUNBVElPTiBSRVFVSVJFRCoqOiBUaGlzIHRpbWVsaW5lIGlzIGNyaXRpY2FsLiBDb250YWN0IHlvdXIgc2Nob29sIGNvdW5zZWxvciBJTU1FRElBVEVMWSB0byB2ZXJpZnkgYXBwbGljYXRpb24gZGVhZGxpbmVzIGFuZCBkaXNjdXNzIGJhY2t1cCBvcHRpb25zLiBTb21lIHVuaXZlcnNpdGllcyBtYXkgc3RpbGwgYWNjZXB0IGxhdGUgYXBwbGljYXRpb25zLmBcclxuICB9IGVsc2UgaWYgKGlzR3JhZGUxMikge1xyXG4gICAgLy8gR2VuZXJhbCBHcmFkZSAxMiByZXNwb25zZVxyXG4gICAgY2FyZWVyUmVzcG9uc2UgPSBgIyBZb3VyIENhcmVlciBHdWlkYW5jZSBSZXN1bHRzIC0gR3JhZGUgMTJcclxuXHJcbiMjIEJhc2VkIG9uIFlvdXIgQXNzZXNzbWVudCAgXHJcbioqR3JhZGUgTGV2ZWwqKjogR1JBREUgMTJcclxuKipDdXJyaWN1bHVtKio6ICR7U3RyaW5nKGN1cnJpY3VsdW1UeXBlKS50b1VwcGVyQ2FzZSgpfVxyXG4qKkFjYWRlbWljIFRpbWVsaW5lKio6ICR7YWNhZGVtaWNDb250ZXh0LnRpbWVsaW5lTWVzc2FnZX1cclxuKipDdXJyZW50IFBoYXNlKio6ICR7YWNhZGVtaWNDb250ZXh0LmN1cnJlbnRQaGFzZS5yZXBsYWNlKCctJywgJyAnKS50b1VwcGVyQ2FzZSgpfVxyXG4qKlF1ZXJ5Kio6ICR7cXVlcnl9XHJcblxyXG4jIyBSZWNvbW1lbmRlZCBDYXJlZXIgUGF0aHMgQmFzZWQgb24gWW91ciBQcm9maWxlXHJcblxyXG4jIyMgMS4gU1RFTSBDYXJlZXJzXHJcbi0gKipFbmdpbmVlcmluZyoqOiBWYXJpb3VzIHNwZWNpYWxpemF0aW9ucyBiYXNlZCBvbiB5b3VyIG1hdGgvc2NpZW5jZSBwZXJmb3JtYW5jZVxyXG4tICoqVGVjaG5vbG9neSoqOiBTb2Z0d2FyZSBkZXZlbG9wbWVudCwgZGF0YSBzY2llbmNlXHJcbi0gKipIZWFsdGhjYXJlKio6IE1lZGljYWwgc2NpZW5jZXMsIGJpb21lZGljYWwgZmllbGRzXHJcblxyXG4jIyMgMi4gQnVzaW5lc3MgJiBGaW5hbmNlXHJcbi0gKipCdXNpbmVzcyBNYW5hZ2VtZW50Kio6IExlYWRlcnNoaXAgYW5kIGVudHJlcHJlbmV1cnNoaXBcclxuLSAqKkZpbmFuY2lhbCBTZXJ2aWNlcyoqOiBCYW5raW5nLCBpbnZlc3RtZW50IHBsYW5uaW5nXHJcbi0gKipDb21tZXJjZSoqOiBBY2NvdW50aW5nLCBlY29ub21pY3MtYmFzZWQgY2FyZWVyc1xyXG5cclxuIyMjIDMuIENyZWF0aXZlICYgQ29tbXVuaWNhdGlvblxyXG4tICoqRGVzaWduKio6IEdyYXBoaWMgZGVzaWduLCBpbmR1c3RyaWFsIGRlc2lnblxyXG4tICoqTWVkaWEqKjogSm91cm5hbGlzbSwgY29tbXVuaWNhdGlvbnNcclxuLSAqKkFydHMqKjogQ3JlYXRpdmUgaW5kdXN0cmllcyBhbmQgY3VsdHVyYWwgZmllbGRzXHJcblxyXG4jIyBOZXh0IFN0ZXBzIGZvciBHcmFkZSAxMiBTdHVkZW50c1xyXG5cclxuIyMjIEN1cnJlbnQgRm9jdXM6ICR7Y29udGV4dHVhbEFkdmljZS5mb2N1cy5yZXBsYWNlKCctJywgJyAnKS50b1VwcGVyQ2FzZSgpfVxyXG5cclxuIyMjIFByaW9yaXR5IEFjdGlvbnM6XHJcbiR7Y29udGV4dHVhbEFkdmljZS5wcmlvcml0aWVzLm1hcChwcmlvcml0eSA9PiBgLSAqKiR7cHJpb3JpdHl9KipgKS5qb2luKCdcXG4nKX1cclxuXHJcbiMjIyBJbXBvcnRhbnQgRGVhZGxpbmVzOlxyXG4ke2NvbnRleHR1YWxBZHZpY2UudXJnZW50RGVhZGxpbmVzLmxlbmd0aCA+IDAgXHJcbiAgPyBjb250ZXh0dWFsQWR2aWNlLnVyZ2VudERlYWRsaW5lcy5tYXAoZGVhZGxpbmUgPT4gYC0gJHtkZWFkbGluZX1gKS5qb2luKCdcXG4nKVxyXG4gIDogJy0gQ2hlY2sgdW5pdmVyc2l0eSB3ZWJzaXRlcyBmb3IgMjAyNiBhcHBsaWNhdGlvbiBkZWFkbGluZXNcXG4tIE5TRkFTIGFwcGxpY2F0aW9ucyB0eXBpY2FsbHkgb3BlbiBpbiBKYW51YXJ5J1xyXG59XHJcblxyXG4tLS1cclxuXHJcbuKaoO+4jyAqKlZlcmlmeSBiZWZvcmUgeW91IGRlY2lkZSoqOiBUaGlzIGlzIEFJLWdlbmVyYXRlZCBhZHZpY2UuIEFsd2F5cyBjb25maXJtIHdpdGggc2Nob29sIGNvdW5zZWxvcnMsIGNhcmVlciBhZHZpc29ycywgYW5kIHByb2Zlc3Npb25hbHMgaW4geW91ciBmaWVsZCBvZiBpbnRlcmVzdCBiZWZvcmUgbWFraW5nIGltcG9ydGFudCBkZWNpc2lvbnMgYWJvdXQgeW91ciBmdXR1cmUuYFxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBEZWZhdWx0IHJlc3BvbnNlIGZvciBvdGhlciBncmFkZXNcclxuICAgIGNhcmVlclJlc3BvbnNlID0gYCMgWW91ciBDYXJlZXIgR3VpZGFuY2UgUmVzdWx0c1xyXG5cclxuIyMgQmFzZWQgb24gWW91ciBBc3Nlc3NtZW50XHJcbioqR3JhZGUgTGV2ZWwqKjogJHtTdHJpbmcoZ3JhZGVMZXZlbCkudG9VcHBlckNhc2UoKX1cclxuKipDdXJyaWN1bHVtKio6ICR7U3RyaW5nKGN1cnJpY3VsdW1UeXBlKS50b1VwcGVyQ2FzZSgpfVxyXG4qKkFjYWRlbWljIFRpbWVsaW5lKio6ICR7YWNhZGVtaWNDb250ZXh0LnRpbWVsaW5lTWVzc2FnZX1cclxuKipRdWVyeSoqOiAke3F1ZXJ5fVxyXG5cclxuIyMgUmVjb21tZW5kZWQgQ2FyZWVyIFBhdGhzXHJcblxyXG4jIyMgMS4gVGVjaG5vbG9neSAmIEVuZ2luZWVyaW5nXHJcbi0gKipTb2Z0d2FyZSBEZXZlbG9wbWVudCoqOiBIaWdoIGRlbWFuZCBmaWVsZCB3aXRoIGV4Y2VsbGVudCBncm93dGggcHJvc3BlY3RzXHJcbi0gKipEYXRhIFNjaWVuY2UqKjogRW1lcmdpbmcgZmllbGQgY29tYmluaW5nIG1hdGhlbWF0aWNzIGFuZCB0ZWNobm9sb2d5XHJcbi0gKipFbmdpbmVlcmluZyoqOiBWYXJpb3VzIHNwZWNpYWxpemF0aW9ucyBhdmFpbGFibGUgKENpdmlsLCBNZWNoYW5pY2FsLCBFbGVjdHJpY2FsKVxyXG5cclxuIyMjIDIuIEhlYWx0aGNhcmUgJiBTY2llbmNlc1xyXG4tICoqTWVkaWNhbCBTY2llbmNlcyoqOiBSZXdhcmRpbmcgY2FyZWVyIGhlbHBpbmcgb3RoZXJzXHJcbi0gKipCaW9tZWRpY2FsIEVuZ2luZWVyaW5nKio6IENvbWJpbmVzIHRlY2hub2xvZ3kgd2l0aCBoZWFsdGhjYXJlXHJcbi0gKipSZXNlYXJjaCBTY2llbmNlcyoqOiBPcHBvcnR1bml0aWVzIGluIHZhcmlvdXMgc2NpZW50aWZpYyBmaWVsZHNcclxuXHJcbiMjIyAzLiBCdXNpbmVzcyAmIEZpbmFuY2VcclxuLSAqKkJ1c2luZXNzIE1hbmFnZW1lbnQqKjogTGVhZGVyc2hpcCBvcHBvcnR1bml0aWVzIGFjcm9zcyBpbmR1c3RyaWVzXHJcbi0gKipGaW5hbmNpYWwgU2VydmljZXMqKjogQmFua2luZywgaW52ZXN0bWVudCwgYW5kIGZpbmFuY2lhbCBwbGFubmluZ1xyXG4tICoqRW50cmVwcmVuZXVyc2hpcCoqOiBTdGFydCB5b3VyIG93biBidXNpbmVzcyB2ZW50dXJlc1xyXG5cclxuIyMgTmV4dCBTdGVwcyBmb3IgJHtTdHJpbmcoZ3JhZGVMZXZlbCkudG9VcHBlckNhc2UoKX0gU3R1ZGVudHNcclxuXHJcbjEuICoqU3ViamVjdCBTZWxlY3Rpb24qKjogQ2hvb3NlIHN1YmplY3RzIHRoYXQgYWxpZ24gd2l0aCB5b3VyIGNhcmVlciBpbnRlcmVzdHNcclxuMi4gKipVbml2ZXJzaXR5IFJlc2VhcmNoKio6IEludmVzdGlnYXRlIGFkbWlzc2lvbiByZXF1aXJlbWVudHMgZm9yIHlvdXIgY2hvc2VuIGZpZWxkXHJcbjMuICoqV29yayBFeHBlcmllbmNlKio6IFNlZWsgaW50ZXJuc2hpcHMgb3Igam9iIHNoYWRvd2luZyBvcHBvcnR1bml0aWVzXHJcbjQuICoqU2tpbGxzIERldmVsb3BtZW50Kio6IEJ1aWxkIHJlbGV2YW50IHNraWxscyB0aHJvdWdoIGNvdXJzZXMgYW5kIHByb2plY3RzXHJcblxyXG4jIyBJbXBvcnRhbnQgQ29uc2lkZXJhdGlvbnNcclxuXHJcbi0gKipBY2FkZW1pYyBSZXF1aXJlbWVudHMqKjogRWFjaCBjYXJlZXIgcGF0aCBoYXMgc3BlY2lmaWMgc3ViamVjdCByZXF1aXJlbWVudHNcclxuLSAqKk1hcmtldCBEZW1hbmQqKjogUmVzZWFyY2ggam9iIGF2YWlsYWJpbGl0eSBpbiB5b3VyIGNob3NlbiBmaWVsZFxyXG4tICoqUGVyc29uYWwgSW50ZXJlc3RzKio6IEVuc3VyZSB5b3VyIGNhcmVlciBjaG9pY2UgYWxpZ25zIHdpdGggeW91ciBwYXNzaW9uc1xyXG4tICoqRmluYW5jaWFsIFBsYW5uaW5nKio6IENvbnNpZGVyIHRoZSBjb3N0IG9mIGVkdWNhdGlvbiBhbmQgcG90ZW50aWFsIGVhcm5pbmdzXHJcblxyXG4tLS1cclxuXHJcbuKaoO+4jyAqKlZlcmlmeSBiZWZvcmUgeW91IGRlY2lkZSoqOiBUaGlzIGlzIEFJLWdlbmVyYXRlZCBhZHZpY2UuIEFsd2F5cyBjb25maXJtIHdpdGggc2Nob29sIGNvdW5zZWxvcnMsIGNhcmVlciBhZHZpc29ycywgYW5kIHByb2Zlc3Npb25hbHMgaW4geW91ciBmaWVsZCBvZiBpbnRlcmVzdCBiZWZvcmUgbWFraW5nIGltcG9ydGFudCBkZWNpc2lvbnMgYWJvdXQgeW91ciBmdXR1cmUuYFxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlc3BvbnNlOiBjYXJlZXJSZXNwb25zZSxcclxuICAgIGZ1bGxSZXNwb25zZTogY2FyZWVyUmVzcG9uc2UsXHJcbiAgICByZXN1bHRzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICB0aXRsZTogXCJQZXJzb25hbGl6ZWQgQ2FyZWVyIEd1aWRhbmNlXCIsXHJcbiAgICAgICAgY29udGVudDogXCJCYXNlZCBvbiB5b3VyIGFzc2Vzc21lbnQsIGhlcmUgYXJlIGNhcmVlciByZWNvbW1lbmRhdGlvbnMgdGFpbG9yZWQgdG8geW91ciBncmFkZSBsZXZlbCBhbmQgaW50ZXJlc3RzLlwiLFxyXG4gICAgICAgIHJlbGV2YW5jZTogMC45NVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgdGl0bGU6IFwiTmV4dCBTdGVwc1wiLFxyXG4gICAgICAgIGNvbnRlbnQ6IFwiU3BlY2lmaWMgYWN0aW9uIGl0ZW1zIHRvIGhlbHAgeW91IHByb2dyZXNzIHRvd2FyZCB5b3VyIGNhcmVlciBnb2Fscy5cIixcclxuICAgICAgICByZWxldmFuY2U6IDAuOTBcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHRpdGxlOiBcIlZlcmlmaWNhdGlvbiBSZXF1aXJlZFwiLFxyXG4gICAgICAgIGNvbnRlbnQ6IFwiUmVtZW1iZXIgdG8gdmVyaWZ5IHRoaXMgQUktZ2VuZXJhdGVkIGFkdmljZSB3aXRoIHJlYWwgY2FyZWVyIGNvdW5zZWxvcnMgYW5kIHByb2Zlc3Npb25hbHMuXCIsXHJcbiAgICAgICAgcmVsZXZhbmNlOiAwLjg1XHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9O1xyXG59XHJcblxyXG4vLyBHZW5lcmF0ZSBlbmhhbmNlZCByZXNwb25zZSB3aXRoIHNwZWNpZmljIHByb2dyYW0gcmVjb21tZW5kYXRpb25zXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRW5oYW5jZWRSZXNwb25zZShxdWVyeSwgZ3JhZGUsIGN1cnJpY3VsdW0sIGFjYWRlbWljQ29udGV4dCwgY29udGV4dHVhbEFkdmljZSwgcmVjb21tZW5kYXRpb25zKSB7XHJcbiAgY29uc3QgeyBhcHNEYXRhLCB0aW1lbGluZSwgcHJvZ3JhbXMsIGJ1cnNhcmllcyB9ID0gcmVjb21tZW5kYXRpb25zO1xyXG4gIFxyXG4gIGxldCByZXNwb25zZSA9IGAjIFlvdXIgU3BlY2lmaWMgQ2FyZWVyIEd1aWRhbmNlIFJlc3VsdHNcclxuXHJcbiMjIEJhc2VkIG9uIFlvdXIgQXNzZXNzbWVudFxyXG4qKkdyYWRlIExldmVsKio6IEdSQURFICR7Z3JhZGV9XHJcbioqQ3VycmljdWx1bSoqOiAke1N0cmluZyhjdXJyaWN1bHVtKS50b1VwcGVyQ2FzZSgpfVxyXG4qKkFjYWRlbWljIFRpbWVsaW5lKio6ICR7YWNhZGVtaWNDb250ZXh0LnRpbWVsaW5lTWVzc2FnZX1cclxuKipDdXJyZW50IFBoYXNlKio6ICR7dGltZWxpbmUucGhhc2UucmVwbGFjZSgnLScsICcgJykudG9VcHBlckNhc2UoKX1cclxuXHJcbiMjIFlvdXIgQWNhZGVtaWMgUGVyZm9ybWFuY2UgQW5hbHlzaXNcclxuKipDdXJyZW50IEFQUyBTY29yZSoqOiAke2Fwc0RhdGEuY3VycmVudH0gcG9pbnRzXHJcbioqUHJvamVjdGVkIEZpbmFsIEFQUyoqOiAke2Fwc0RhdGEucHJvamVjdGVkLm1pbn0tJHthcHNEYXRhLnByb2plY3RlZC5tYXh9IHBvaW50c1xyXG4qKlVuaXZlcnNpdHkgRWxpZ2liaWxpdHkqKjogJHthcHNEYXRhLnVuaXZlcnNpdHlFbGlnaWJsZSA/ICfinIUgUXVhbGlmaWVkIGZvciB1bml2ZXJzaXR5IGFkbWlzc2lvbicgOiAn4pqg77iPIE5lZWQgaW1wcm92ZW1lbnQgZm9yIHVuaXZlcnNpdHknfVxyXG5cclxuIyMgUmVjb21tZW5kZWQgVW5pdmVyc2l0eSBQcm9ncmFtc1xyXG5cclxuYDtcclxuXHJcbiAgLy8gQWRkIHRvcCAzIHByb2dyYW1zIHdpdGggc3BlY2lmaWMgZGV0YWlsc1xyXG4gIHByb2dyYW1zLnNsaWNlKDAsIDMpLmZvckVhY2goKHByb2dyYW0sIGluZGV4KSA9PiB7XHJcbiAgICBjb25zdCBmZWFzaWJpbGl0eUljb24gPSBwcm9ncmFtLmZlYXNpYmlsaXR5ID09PSAnSGlnaCcgPyAn4pyFJyA6IHByb2dyYW0uZmVhc2liaWxpdHkgPT09ICdNZWRpdW0nID8gJ+KaoO+4jycgOiAn8J+UhCc7XHJcbiAgICBcclxuICAgIHJlc3BvbnNlICs9IGAjIyMgJHtpbmRleCArIDF9LiAke3Byb2dyYW0ucHJvZ3JhbX0gYXQgJHtwcm9ncmFtLnVuaXZlcnNpdHl9ICR7ZmVhc2liaWxpdHlJY29ufVxyXG4qKkFQUyBSZXF1aXJlZCoqOiAke3Byb2dyYW0uYXBzUmVxdWlyZWR9IChZb3UncmUgcHJvamVjdGVkOiAke2Fwc0RhdGEucHJvamVjdGVkLm1pbn0tJHthcHNEYXRhLnByb2plY3RlZC5tYXh9KVxyXG4qKkFkbWlzc2lvbiBDaGFuY2UqKjogJHtwcm9ncmFtLmFkbWlzc2lvblByb2JhYmlsaXR5fSUgXHJcbioqQXBwbGljYXRpb24gRGVhZGxpbmUqKjogJHtwcm9ncmFtLmFwcGxpY2F0aW9uRGVhZGxpbmV9XHJcbioqRHVyYXRpb24qKjogJHtwcm9ncmFtLmR1cmF0aW9ufVxyXG4qKlJlcXVpcmVtZW50cyoqOiAke3Byb2dyYW0uc3ViamVjdFJlcXVpcmVtZW50cy5qb2luKCcsICcpfVxyXG4qKkZlYXNpYmlsaXR5Kio6ICR7cHJvZ3JhbS5mZWFzaWJpbGl0eX1cclxuXHJcbmA7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEFkZCBidXJzYXJ5IGluZm9ybWF0aW9uXHJcbiAgaWYgKGJ1cnNhcmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICByZXNwb25zZSArPSBgIyMgRWxpZ2libGUgQnVyc2FyaWVzICYgRmluYW5jaWFsIEFpZFxyXG5cclxuYDtcclxuICAgIFxyXG4gICAgYnVyc2FyaWVzLmZvckVhY2goKGJ1cnNhcnksIGluZGV4KSA9PiB7XHJcbiAgICAgIGNvbnN0IHVyZ2VuY3lJY29uID0gYnVyc2FyeS51cmdlbmN5ID09PSAnQ1JJVElDQUwnID8gJ/CfmqgnIDogYnVyc2FyeS51cmdlbmN5ID09PSAnSElHSCcgPyAn4pqg77iPJyA6ICfihLnvuI8nO1xyXG4gICAgICBcclxuICAgICAgcmVzcG9uc2UgKz0gYCMjIyAke2luZGV4ICsgMX0uICR7YnVyc2FyeS5uYW1lfSAke3VyZ2VuY3lJY29ufVxyXG4qKkFtb3VudCoqOiAke2J1cnNhcnkuYW1vdW50fVxyXG4qKkVsaWdpYmlsaXR5IE1hdGNoKio6ICR7YnVyc2FyeS5tYXRjaFBlcmNlbnRhZ2V9JVxyXG4qKkRlYWRsaW5lKio6ICR7YnVyc2FyeS5kZWFkbGluZX1cclxuKipXaHkgWW91IFF1YWxpZnkqKjogJHtidXJzYXJ5LmVsaWdpYmlsaXR5UmVhc29ucy5qb2luKCcsICcpfVxyXG4qKkFwcGx5Kio6ICR7YnVyc2FyeS5hcHBsaWNhdGlvblVybH1cclxuXHJcbmA7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEFkZCBncmFkZS1zcGVjaWZpYyBhY3Rpb24gcGxhblxyXG4gIHJlc3BvbnNlICs9IGAjIyAke3RpbWVsaW5lLnVyZ2VuY3l9IEFjdGlvbiBQbGFuXHJcblxyXG4jIyMgQ3VycmVudCBGb2N1czogJHt0aW1lbGluZS50aW1lbGluZX1cclxuXHJcbiMjIyBQcmlvcml0eSBBY3Rpb25zOlxyXG4ke3RpbWVsaW5lLmFjdGlvbkl0ZW1zLm1hcChpdGVtID0+IGAtICoqJHtpdGVtfSoqYCkuam9pbignXFxuJyl9XHJcblxyXG5gO1xyXG5cclxuICAvLyBBZGQgZ3JhZGUtc3BlY2lmaWMgYWR2aWNlXHJcbiAgaWYgKGdyYWRlID09PSAxMikge1xyXG4gICAgcmVzcG9uc2UgKz0gYCMjIyBHcmFkZSAxMiBTcGVjaWZpYyBHdWlkYW5jZTpcclxuLSAqKkZpbmFscyBTdHJhdGVneSoqOiBGb2N1cyBvbiBzdWJqZWN0cyBuZWVkZWQgZm9yIHlvdXIgdGFyZ2V0IHByb2dyYW1zXHJcbi0gKipBcHBsaWNhdGlvbiBUaW1lbGluZSoqOiBNb3N0IHVuaXZlcnNpdGllcyBjbG9zZSBhcHBsaWNhdGlvbnMgYnkgU2VwdGVtYmVyIDIwMjZcclxuLSAqKkJhY2t1cCBQbGFubmluZyoqOiBBcHBseSB0byBtdWx0aXBsZSBwcm9ncmFtcyB3aXRoIGRpZmZlcmVudCBBUFMgcmVxdWlyZW1lbnRzXHJcbi0gKipOU0ZBUyBEZWFkbGluZSoqOiBEZWNlbWJlciAzMSwgMjAyNSAtIEFwcGx5IGltbWVkaWF0ZWx5IGlmIGVsaWdpYmxlXHJcblxyXG5gO1xyXG4gIH0gZWxzZSBpZiAoZ3JhZGUgPT09IDExKSB7XHJcbiAgICByZXNwb25zZSArPSBgIyMjIEdyYWRlIDExIFNwZWNpZmljIEd1aWRhbmNlOlxyXG4tICoqUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uKio6IFlvdSBoYXZlIDEgeWVhciB0byBpbXByb3ZlIHlvdXIgQVBTIHNjb3JlXHJcbi0gKipTdWJqZWN0IENob2ljZXMqKjogTGFzdCBjaGFuY2UgdG8gY2hhbmdlIHN1YmplY3RzIGlmIG5lZWRlZCBmb3IgeW91ciBjYXJlZXIgZ29hbHNcclxuLSAqKkJ1cnNhcnkgUHJlcGFyYXRpb24qKjogU3RhcnQgcmVzZWFyY2hpbmcgYW5kIHByZXBhcmluZyBhcHBsaWNhdGlvbnMgZm9yIDIwMjZcclxuLSAqKlVuaXZlcnNpdHkgUmVzZWFyY2gqKjogVmlzaXQgY2FtcHVzZXMgYW5kIGF0dGVuZCBpbmZvcm1hdGlvbiBzZXNzaW9uc1xyXG5cclxuYDtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzcG9uc2UgKz0gYCMjIyBHcmFkZSAxMCBTcGVjaWZpYyBHdWlkYW5jZTpcclxuLSAqKkZvdW5kYXRpb24gQnVpbGRpbmcqKjogRm9jdXMgb24gYnVpbGRpbmcgc3Ryb25nIGFjYWRlbWljIGZvdW5kYXRpb25zXHJcbi0gKipDYXJlZXIgRXhwbG9yYXRpb24qKjogWW91IGhhdmUgdGltZSB0byBleHBsb3JlIGRpZmZlcmVudCBjYXJlZXIgb3B0aW9uc1xyXG4tICoqU3ViamVjdCBQbGFubmluZyoqOiBDaG9vc2UgR3JhZGUgMTEgc3ViamVjdHMgdGhhdCBhbGlnbiB3aXRoIHlvdXIgY2FyZWVyIGludGVyZXN0c1xyXG4tICoqTG9uZy10ZXJtIFBsYW5uaW5nKio6IFN0YXJ0IGJ1aWxkaW5nIGEgcHJvZmlsZSBmb3IgdW5pdmVyc2l0eSBhcHBsaWNhdGlvbnNcclxuXHJcbmA7XHJcbiAgfVxyXG5cclxuICAvLyBBZGQgYmFja3VwIG9wdGlvbnMgaWYgbmVlZGVkXHJcbiAgaWYgKHByb2dyYW1zLmxlbmd0aCA+IDMpIHtcclxuICAgIHJlc3BvbnNlICs9IGAjIyBBbHRlcm5hdGl2ZSBPcHRpb25zXHJcblxyXG5JZiB5b3VyIGZpcnN0IGNob2ljZXMgYXJlIGNoYWxsZW5naW5nLCBjb25zaWRlciB0aGVzZSBiYWNrdXAgb3B0aW9uczpcclxuXHJcbmA7XHJcbiAgICBcclxuICAgIHByb2dyYW1zLnNsaWNlKDMsIDUpLmZvckVhY2goKHByb2dyYW0sIGluZGV4KSA9PiB7XHJcbiAgICAgIHJlc3BvbnNlICs9IGAtICoqJHtwcm9ncmFtLnByb2dyYW19IGF0ICR7cHJvZ3JhbS51bml2ZXJzaXR5fSoqOiBBUFMgJHtwcm9ncmFtLmFwc1JlcXVpcmVkfSAoJHtwcm9ncmFtLmFkbWlzc2lvblByb2JhYmlsaXR5fSUgY2hhbmNlKVxyXG5gO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNwb25zZSArPSBgXHJcblxyXG4tLS1cclxuXHJcbuKaoO+4jyAqKlZlcmlmeSBiZWZvcmUgeW91IGRlY2lkZSoqOiBUaGlzIGlzIEFJLWdlbmVyYXRlZCBhZHZpY2UgYmFzZWQgb24geW91ciBjdXJyZW50IHBlcmZvcm1hbmNlLiBBbHdheXMgY29uZmlybSB3aXRoIHNjaG9vbCBjb3Vuc2Vsb3JzLCBjYXJlZXIgYWR2aXNvcnMsIGFuZCB1bml2ZXJzaXR5IGFkbWlzc2lvbiBvZmZpY2VzIGJlZm9yZSBtYWtpbmcgaW1wb3J0YW50IGRlY2lzaW9ucyBhYm91dCB5b3VyIGZ1dHVyZS5gO1xyXG5cclxuICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcclxuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7IHF1ZXJ5LCBncmFkZSwgY3VycmljdWx1bSwgcHJvZmlsZSwgY3VycmljdWx1bVByb2ZpbGUgfSA9IGJvZHk7XHJcbiAgICBcclxuICAgIC8vIENSSVRJQ0FMIEZJWDogR3JhZGUgcGFyYW1ldGVyIHRha2VzIGFic29sdXRlIHByaW9yaXR5IG92ZXIgcXVlcnkgdGV4dCBwYXJzaW5nXHJcbiAgICBjb25zdCBncmFkZVBhcmFtID0gZ3JhZGUgfHwgcHJvZmlsZT8uZ3JhZGUgfHwgY3VycmljdWx1bVByb2ZpbGU/LmdyYWRlO1xyXG4gICAgXHJcbiAgICAvLyBFeHRyYWN0IHN0dWRlbnQgcHJvZmlsZSBkYXRhIGZvciBzcGVjaWZpYyByZWNvbW1lbmRhdGlvbnNcclxuICAgIGxldCBlbmhhbmNlZFN0dWRlbnRQcm9maWxlID0gbnVsbDtcclxuICAgIGlmIChwcm9maWxlIHx8IGN1cnJpY3VsdW1Qcm9maWxlKSB7XHJcbiAgICAgIC8vIENSSVRJQ0FMIEZJWDogVXNlIHN0cnVjdHVyZWQgbWFya3MgZGF0YSBmcm9tIHByb2ZpbGUubWFya3NEYXRhIGlmIGF2YWlsYWJsZVxyXG4gICAgICBsZXQgbWFya3NEYXRhID0ge307XHJcbiAgICAgIFxyXG4gICAgICAvLyBQcmlvcml0eSAxOiBVc2Ugc3RydWN0dXJlZCBtYXJrcyBmcm9tIHByb2ZpbGUubWFya3NEYXRhIChmcm9tIEFzc2Vzc21lbnRGb3JtKVxyXG4gICAgICBpZiAocHJvZmlsZT8ubWFya3NEYXRhPy5leGFjdE1hcmtzKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtNQVJLUyBERUJVR10gRm91bmQgc3RydWN0dXJlZCBtYXJrczpgLCBwcm9maWxlLm1hcmtzRGF0YS5leGFjdE1hcmtzKTtcclxuICAgICAgICBPYmplY3QuZW50cmllcyhwcm9maWxlLm1hcmtzRGF0YS5leGFjdE1hcmtzKS5mb3JFYWNoKChbc3ViamVjdCwgbWFya10pID0+IHtcclxuICAgICAgICAgIGlmIChtYXJrICYmIG1hcmsgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgc3ViamVjdCBuYW1lcyB0byBtYXRjaCBleHBlY3RlZCBmb3JtYXRcclxuICAgICAgICAgICAgY29uc3Qgc3ViamVjdEtleSA9IHN1YmplY3QudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICdfJykucmVwbGFjZSgvW15hLXowLTlfXS9nLCAnJyk7XHJcbiAgICAgICAgICAgIG1hcmtzRGF0YVtzdWJqZWN0S2V5XSA9IHBhcnNlRmxvYXQobWFyayk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFtNQVJLUyBERUJVR10gUHJvY2Vzc2VkIG1hcmtzIGRhdGE6YCwgbWFya3NEYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gUHJpb3JpdHkgMjogRmFsbGJhY2sgdG8gcXVlcnkgdGV4dCBleHRyYWN0aW9uIGlmIG5vIHN0cnVjdHVyZWQgZGF0YVxyXG4gICAgICBpZiAoT2JqZWN0LmtleXMobWFya3NEYXRhKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW01BUktTIERFQlVHXSBObyBzdHJ1Y3R1cmVkIG1hcmtzIGZvdW5kLCBleHRyYWN0aW5nIGZyb20gcXVlcnlgKTtcclxuICAgICAgICBtYXJrc0RhdGEgPSBleHRyYWN0TWFya3NGcm9tUXVlcnkocXVlcnkpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBbTUFSS1MgREVCVUddIEV4dHJhY3RlZCBmcm9tIHF1ZXJ5OmAsIG1hcmtzRGF0YSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGVuaGFuY2VkU3R1ZGVudFByb2ZpbGUgPSB7XHJcbiAgICAgICAgbWFya3M6IG1hcmtzRGF0YSxcclxuICAgICAgICBjb25zdHJhaW50czogcHJvZmlsZT8uY29uc3RyYWludHMgfHwge30sXHJcbiAgICAgICAgY2FyZWVySW50ZXJlc3RzOiBleHRyYWN0Q2FyZWVySW50ZXJlc3RzKHF1ZXJ5KSxcclxuICAgICAgICAuLi5wcm9maWxlXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhgW1BST0ZJTEUgREVCVUddIEVuaGFuY2VkIHN0dWRlbnQgcHJvZmlsZSBjcmVhdGVkOmAsIHtcclxuICAgICAgICBoYXNNYXJrczogT2JqZWN0LmtleXMobWFya3NEYXRhKS5sZW5ndGggPiAwLFxyXG4gICAgICAgIG1hcmtzQ291bnQ6IE9iamVjdC5rZXlzKG1hcmtzRGF0YSkubGVuZ3RoLFxyXG4gICAgICAgIGdyYWRlOiBlbmhhbmNlZFN0dWRlbnRQcm9maWxlLmdyYWRlLFxyXG4gICAgICAgIHNlc3Npb25JZDogZW5oYW5jZWRTdHVkZW50UHJvZmlsZS5zZXNzaW9uSWRcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFF1aWNrIHZhbGlkYXRpb25cclxuICAgIGlmICghcXVlcnkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdRdWVyeSBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ1JJVElDQUwgRklYOiBHcmFkZSBwYXJhbWV0ZXIgdGFrZXMgQUJTT0xVVEUgUFJJT1JJVFlcclxuICAgIC8vIFRoZSBmcm9udGVuZCBzZW5kcyB0aGUgY29ycmVjdCBncmFkZSwgZG9uJ3QgbGV0IHF1ZXJ5IHBhcnNpbmcgb3ZlcnJpZGUgaXRcclxuICAgIGxldCBwYXJzZWRHcmFkZSA9ICdncmFkZTEwJzsgLy8gRGVmYXVsdCBmYWxsYmFja1xyXG4gICAgXHJcbiAgICAvLyBGSVJTVCBQUklPUklUWTogVXNlIHRoZSBncmFkZSBwYXJhbWV0ZXIgc2VudCBmcm9tIGZyb250ZW5kIChtb3N0IHJlbGlhYmxlKVxyXG4gICAgaWYgKGdyYWRlKSB7XHJcbiAgICAgIGlmIChncmFkZSA9PT0gJzEwJyB8fCBncmFkZSA9PT0gMTAgfHwgZ3JhZGUgPT09ICdncmFkZTEwJykgcGFyc2VkR3JhZGUgPSAnZ3JhZGUxMCc7XHJcbiAgICAgIGVsc2UgaWYgKGdyYWRlID09PSAnMTEnIHx8IGdyYWRlID09PSAxMSB8fCBncmFkZSA9PT0gJ2dyYWRlMTEnKSBwYXJzZWRHcmFkZSA9ICdncmFkZTExJztcclxuICAgICAgZWxzZSBpZiAoZ3JhZGUgPT09ICcxMicgfHwgZ3JhZGUgPT09IDEyIHx8IGdyYWRlID09PSAnZ3JhZGUxMicpIHBhcnNlZEdyYWRlID0gJ2dyYWRlMTInO1xyXG4gICAgICBlbHNlIGlmICh0eXBlb2YgZ3JhZGUgPT09ICdzdHJpbmcnICYmIGdyYWRlLnN0YXJ0c1dpdGgoJ2dyYWRlJykpIHBhcnNlZEdyYWRlID0gZ3JhZGU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFNFQ09ORCBQUklPUklUWTogT25seSBwYXJzZSBxdWVyeSBpZiBubyBncmFkZSBwYXJhbWV0ZXIgcHJvdmlkZWRcclxuICAgIGlmICghZ3JhZGUgJiYgcXVlcnkpIHtcclxuICAgICAgLy8gRmlyc3QgcHJpb3JpdHk6IFwiSSBhbSBhIEdyYWRlIFggc3R1ZGVudFwiIHBhdHRlcm5cclxuICAgICAgY29uc3Qgc3R1ZGVudFBhdHRlcm4gPSBxdWVyeS5tYXRjaCgvSSBhbSBhIEdyYWRlIChcXGQrKSBzdHVkZW50L2kpO1xyXG4gICAgICBpZiAoc3R1ZGVudFBhdHRlcm4pIHtcclxuICAgICAgICBjb25zdCBncmFkZU51bSA9IHN0dWRlbnRQYXR0ZXJuWzFdO1xyXG4gICAgICAgIGlmIChncmFkZU51bSA9PT0gJzEwJykgcGFyc2VkR3JhZGUgPSAnZ3JhZGUxMCc7XHJcbiAgICAgICAgZWxzZSBpZiAoZ3JhZGVOdW0gPT09ICcxMScpIHBhcnNlZEdyYWRlID0gJ2dyYWRlMTEnO1xyXG4gICAgICAgIGVsc2UgaWYgKGdyYWRlTnVtID09PSAnMTInKSBwYXJzZWRHcmFkZSA9ICdncmFkZTEyJztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGYWxsYmFjazogZ2VuZXJhbCBncmFkZSBtZW50aW9ucyAoYnV0IGxlc3MgcmVsaWFibGUpXHJcbiAgICAgICAgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdHcmFkZSAxMicpKSB7XHJcbiAgICAgICAgICBwYXJzZWRHcmFkZSA9ICdncmFkZTEyJztcclxuICAgICAgICB9IGVsc2UgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdHcmFkZSAxMScpKSB7XHJcbiAgICAgICAgICBwYXJzZWRHcmFkZSA9ICdncmFkZTExJztcclxuICAgICAgICB9IGVsc2UgaWYgKHF1ZXJ5LmluY2x1ZGVzKCdHcmFkZSAxMCcpKSB7XHJcbiAgICAgICAgICBwYXJzZWRHcmFkZSA9ICdncmFkZTEwJztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gRGVidWcgbG9nZ2luZyBmb3IgZ3JhZGUgZGV0ZWN0aW9uXHJcbiAgICBjb25zb2xlLmxvZyhgW0dSQURFIERFVEVDVElPTl0gSW5wdXQgZ3JhZGU6ICR7Z3JhZGV9LCBQYXJzZWQgZ3JhZGU6ICR7cGFyc2VkR3JhZGV9LCBRdWVyeSBjb250YWluczogJHtxdWVyeT8uc3Vic3RyaW5nKDAsIDEwMCl9Li4uYCk7XHJcbiAgICBcclxuICAgIC8vIENyZWF0ZSBwcm9maWxlIGZvciBjYWNoaW5nIHdpdGggc2Vzc2lvbiBJRCBmb3IgdW5pcXVlbmVzc1xyXG4gICAgY29uc3QgY2FjaGVQcm9maWxlID0gcHJvZmlsZSB8fCB7XHJcbiAgICAgIGdyYWRlOiBwYXJzZWRHcmFkZSxcclxuICAgICAgY3VycmljdWx1bTogY3VycmljdWx1bSB8fCAnY2FwcydcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIENSSVRJQ0FMIEZJWDogQWRkIHNlc3Npb24gSUQgdG8gcHJldmVudCBjYWNoZSBjb2xsaXNpb24gYmV0d2VlbiBzdHVkZW50c1xyXG4gICAgaWYgKCFjYWNoZVByb2ZpbGUuc2Vzc2lvbklkKSB7XHJcbiAgICAgIGNhY2hlUHJvZmlsZS5zZXNzaW9uSWQgPSBgJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDUklUSUNBTCBGSVg6IEJ5cGFzcyBjYWNoZSBmb3IgYXNzZXNzbWVudCBzdWJtaXNzaW9ucyB3aXRoIG1hcmtzIGRhdGFcclxuICAgIGNvbnN0IGhhc01hcmtzRGF0YSA9IChwcm9maWxlPy5tYXJrc0RhdGE/LmV4YWN0TWFya3MgJiYgT2JqZWN0LmtleXMocHJvZmlsZS5tYXJrc0RhdGEuZXhhY3RNYXJrcykubGVuZ3RoID4gMCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHByb2ZpbGU/Lm1hcmtzICYmIE9iamVjdC5rZXlzKHByb2ZpbGUubWFya3MpLmxlbmd0aCA+IDApO1xyXG4gICAgXHJcbiAgICBjb25zdCBzaG91bGRCeXBhc3NDYWNoZSA9IGhhc01hcmtzRGF0YSB8fCBxdWVyeS5pbmNsdWRlcygnYXNzZXNzbWVudCcpIHx8IHF1ZXJ5LmluY2x1ZGVzKCdBUFMnKSB8fCBxdWVyeS5pbmNsdWRlcygnbWFya3MnKTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3QgKGJ1dCBieXBhc3MgaWYgYXNzZXNzbWVudCBzdWJtaXNzaW9uKVxyXG4gICAgbGV0IGNhY2hlZFJlc3VsdCA9IG51bGw7XHJcbiAgICBpZiAoIXNob3VsZEJ5cGFzc0NhY2hlKSB7XHJcbiAgICAgIGNhY2hlZFJlc3VsdCA9IGF3YWl0IGdldENhY2hlZFJlc3BvbnNlKGNhY2hlUHJvZmlsZSwgcXVlcnkpO1xyXG4gICAgICBpZiAoY2FjaGVkUmVzdWx0KSB7XHJcbiAgICAgICAgY29uc3QgdG90YWxUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW0NBQ0hFIEhJVF0gVG90YWwgcmVzcG9uc2UgdGltZTogJHt0b3RhbFRpbWV9bXNgKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgLi4uY2FjaGVkUmVzdWx0LFxyXG4gICAgICAgICAgcGVyZm9ybWFuY2U6IHtcclxuICAgICAgICAgICAgLi4uY2FjaGVkUmVzdWx0LnBlcmZvcm1hbmNlLFxyXG4gICAgICAgICAgICB0b3RhbFRpbWUsXHJcbiAgICAgICAgICAgIHNvdXJjZTogJ2NhY2hlJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhgW0NBQ0hFIEJZUEFTU10gQXNzZXNzbWVudCBzdWJtaXNzaW9uIGRldGVjdGVkIC0gZ2VuZXJhdGluZyBmcmVzaCByZXNwb25zZWApO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgXHJcbiAgICAvLyBHZW5lcmF0ZSBwcm9wZXIgY2FyZWVyIGd1aWRhbmNlIHJlc3BvbnNlIHdpdGggdmVyaWZpY2F0aW9uIGZvb3RlclxyXG4gICAgY29uc3QgY2FyZWVyR3VpZGFuY2UgPSBnZW5lcmF0ZUNhcmVlckd1aWRhbmNlKHF1ZXJ5LCBwYXJzZWRHcmFkZSwgY3VycmljdWx1bSwgZW5oYW5jZWRTdHVkZW50UHJvZmlsZSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBxdWVyeSxcclxuICAgICAgZ3JhZGU6IHBhcnNlZEdyYWRlLFxyXG4gICAgICBjdXJyaWN1bHVtOiBjdXJyaWN1bHVtIHx8ICdjYXBzJyxcclxuICAgICAgcmVzcG9uc2U6IGNhcmVlckd1aWRhbmNlLnJlc3BvbnNlLFxyXG4gICAgICBmdWxsUmVzcG9uc2U6IGNhcmVlckd1aWRhbmNlLmZ1bGxSZXNwb25zZSxcclxuICAgICAgcmVzdWx0czogY2FyZWVyR3VpZGFuY2UucmVzdWx0cyxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBncmFkZTogcGFyc2VkR3JhZGUsXHJcbiAgICAgICAgY3VycmljdWx1bTogY3VycmljdWx1bSB8fCAnY2FwcycsXHJcbiAgICAgICAgcHJvdmlkZXI6ICdnZW5lcmF0ZWQnLFxyXG4gICAgICAgIGhhc1ZlcmlmaWNhdGlvbkZvb3RlcjogdHJ1ZVxyXG4gICAgICB9LFxyXG4gICAgICBwZXJmb3JtYW5jZToge1xyXG4gICAgICAgIHRvdGFsVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcclxuICAgICAgICBzb3VyY2U6ICdnZW5lcmF0ZWQnXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBDYWNoZSB0aGUgcmVzcG9uc2UgYXN5bmNocm9ub3VzbHkgKGJ1dCBvbmx5IGlmIG5vdCBhc3Nlc3NtZW50IHN1Ym1pc3Npb24pXHJcbiAgICBpZiAoIXNob3VsZEJ5cGFzc0NhY2hlKSB7XHJcbiAgICAgIHNldENhY2hlZFJlc3BvbnNlKGNhY2hlUHJvZmlsZSwgcXVlcnksIHJlc3BvbnNlKS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhY2hlIHNldCBlcnJvcjonLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coYFtDQUNIRSBTS0lQXSBOb3QgY2FjaGluZyBhc3Nlc3NtZW50IHN1Ym1pc3Npb24gcmVzcG9uc2VgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdSQUcgUXVlcnkgRXJyb3I6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0sIFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxyXG4gICAgbWVzc2FnZTogJ1JBRyBRdWVyeSBlbmRwb2ludCB3aXRoIGNhY2hlIGlzIHJ1bm5pbmcnLFxyXG4gICAgc3RhdHVzOiAnb2snLFxyXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICB9KTtcclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRDYWNoZWRSZXNwb25zZSIsInNldENhY2hlZFJlc3BvbnNlIiwiZ2V0QWNhZGVtaWNDb250ZXh0IiwiZ2V0Q29udGV4dHVhbEFkdmljZSIsImdlbmVyYXRlU3BlY2lmaWNSZWNvbW1lbmRhdGlvbnMiLCJmb3JtYXRSZWNvbW1lbmRhdGlvbnNGb3JMTE0iLCJleHRyYWN0Q2FyZWVySW50ZXJlc3RzIiwicXVlcnlUZXh0IiwiaW50ZXJlc3RzIiwibG93ZXJRdWVyeSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJwdXNoIiwiam9pbiIsImV4dHJhY3RNYXJrc0Zyb21RdWVyeSIsIm1hcmtzIiwibWFya1BhdHRlcm5zIiwic3ViamVjdE5hbWVzIiwiZm9yRWFjaCIsInBhdHRlcm4iLCJpbmRleCIsIm1hdGNoZXMiLCJtYXRjaCIsIm1hcmtWYWx1ZSIsInBhcnNlRmxvYXQiLCJnZW5lcmF0ZUNhcmVlckd1aWRhbmNlIiwicXVlcnkiLCJncmFkZSIsImN1cnJpY3VsdW0iLCJzdHVkZW50UHJvZmlsZSIsImdyYWRlTGV2ZWwiLCJjdXJyaWN1bHVtVHlwZSIsImdyYWRlTnVtYmVyIiwicGFyc2VJbnQiLCJyZXBsYWNlIiwiYWNhZGVtaWNDb250ZXh0IiwiRGF0ZSIsImNvbnRleHR1YWxBZHZpY2UiLCJzcGVjaWZpY1JlY29tbWVuZGF0aW9ucyIsInJlY29tbWVuZGF0aW9uc0NvbnRleHQiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY2FyZWVySW50ZXJlc3RzIiwic3VjY2VzcyIsImVycm9yIiwiY29uc29sZSIsImlzR3JhZGUxMiIsImhhc0FyY2hpdGVjdHVyZUludGVyZXN0IiwiaGFzRW5naW5lZXJpbmdJbnRlcmVzdCIsImhhc0xhd0ludGVyZXN0IiwiaXNVcmdlbnRUaW1lbGluZSIsImlzRmlyc3RHZW5lcmF0aW9uIiwiaGFzRUdEU3RyZW5ndGgiLCJoYXNNYXRoU2NpZW5jZSIsImNhcmVlclJlc3BvbnNlIiwiZ2VuZXJhdGVFbmhhbmNlZFJlc3BvbnNlIiwiU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ0aW1lbGluZU1lc3NhZ2UiLCJjdXJyZW50UGhhc2UiLCJmb2N1cyIsInByaW9yaXRpZXMiLCJtYXAiLCJwcmlvcml0eSIsInVyZ2VudERlYWRsaW5lcyIsImRlYWRsaW5lIiwicmVzcG9uc2UiLCJmdWxsUmVzcG9uc2UiLCJyZXN1bHRzIiwidGl0bGUiLCJjb250ZW50IiwicmVsZXZhbmNlIiwicmVjb21tZW5kYXRpb25zIiwiYXBzRGF0YSIsInRpbWVsaW5lIiwicHJvZ3JhbXMiLCJidXJzYXJpZXMiLCJwaGFzZSIsImN1cnJlbnQiLCJwcm9qZWN0ZWQiLCJtaW4iLCJtYXgiLCJ1bml2ZXJzaXR5RWxpZ2libGUiLCJzbGljZSIsInByb2dyYW0iLCJmZWFzaWJpbGl0eUljb24iLCJmZWFzaWJpbGl0eSIsInVuaXZlcnNpdHkiLCJhcHNSZXF1aXJlZCIsImFkbWlzc2lvblByb2JhYmlsaXR5IiwiYXBwbGljYXRpb25EZWFkbGluZSIsImR1cmF0aW9uIiwic3ViamVjdFJlcXVpcmVtZW50cyIsImJ1cnNhcnkiLCJ1cmdlbmN5SWNvbiIsInVyZ2VuY3kiLCJuYW1lIiwiYW1vdW50IiwibWF0Y2hQZXJjZW50YWdlIiwiZWxpZ2liaWxpdHlSZWFzb25zIiwiYXBwbGljYXRpb25VcmwiLCJhY3Rpb25JdGVtcyIsIml0ZW0iLCJQT1NUIiwicmVxdWVzdCIsInN0YXJ0VGltZSIsIm5vdyIsImJvZHkiLCJqc29uIiwicHJvZmlsZSIsImN1cnJpY3VsdW1Qcm9maWxlIiwiZ3JhZGVQYXJhbSIsImVuaGFuY2VkU3R1ZGVudFByb2ZpbGUiLCJtYXJrc0RhdGEiLCJleGFjdE1hcmtzIiwibG9nIiwiZW50cmllcyIsInN1YmplY3QiLCJtYXJrIiwic3ViamVjdEtleSIsImNvbnN0cmFpbnRzIiwiaGFzTWFya3MiLCJtYXJrc0NvdW50Iiwic2Vzc2lvbklkIiwic3RhdHVzIiwicGFyc2VkR3JhZGUiLCJzdGFydHNXaXRoIiwic3R1ZGVudFBhdHRlcm4iLCJncmFkZU51bSIsInN1YnN0cmluZyIsImNhY2hlUHJvZmlsZSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsImhhc01hcmtzRGF0YSIsInNob3VsZEJ5cGFzc0NhY2hlIiwiY2FjaGVkUmVzdWx0IiwidG90YWxUaW1lIiwicGVyZm9ybWFuY2UiLCJzb3VyY2UiLCJjYXJlZXJHdWlkYW5jZSIsIm1ldGFkYXRhIiwicHJvdmlkZXIiLCJoYXNWZXJpZmljYXRpb25Gb290ZXIiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsIkdFVCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/rag/query/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/academic/emergency-calendar.js":
/*!********************************************!*\
  !*** ./lib/academic/emergency-calendar.js ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAcademicContext: () => (/* binding */ getAcademicContext),\n/* harmony export */   getContextualAdvice: () => (/* binding */ getContextualAdvice),\n/* harmony export */   requiresEmergencyFix: () => (/* binding */ requiresEmergencyFix)\n/* harmony export */ });\n// lib/academic/emergency-calendar.js\n// Emergency fix for December 2025 academic calendar issue\n// Simplified version without academic calendar engine dependency\n/**\r\n * Get academic context for current date and grade\r\n * Simplified emergency implementation\r\n */ function getAcademicContext(currentDate = new Date(), grade = 10) {\n    // Use emergency implementation directly\n    return getEmergencyAcademicContext(currentDate, grade);\n}\n/**\r\n * Fallback emergency implementation (original code)\r\n */ function getEmergencyAcademicContext(currentDate = new Date(), grade = 10) {\n    const month = currentDate.getMonth() + 1; // 1-12\n    const year = currentDate.getFullYear();\n    // South African Academic Calendar 2025\n    const academicCalendar2025 = {\n        matricFinals: {\n            start: new Date(2025, 9, 21),\n            end: new Date(2025, 10, 27) // November 27, 2025\n        },\n        resultsRelease: new Date(2025, 11, 20),\n        newYearStart: new Date(2026, 0, 15) // January 15, 2026\n    };\n    // Determine current academic phase\n    let phase = 'preparation';\n    let timelineMessage = '';\n    let urgencyLevel = 'low';\n    if (year === 2025) {\n        if (currentDate >= academicCalendar2025.matricFinals.start && currentDate <= academicCalendar2025.matricFinals.end) {\n            phase = 'finals-active';\n        } else if (currentDate > academicCalendar2025.matricFinals.end) {\n            phase = 'post-finals';\n        } else if (month >= 9) {\n            phase = 'finals-approach';\n        }\n    }\n    // Generate appropriate timeline message based on grade and phase\n    if (grade === 12) {\n        switch(phase){\n            case 'post-finals':\n                timelineMessage = `Your Grade 12 finals are complete (finished November 2025). Focus on results (expected December 20) and 2026 university applications.`;\n                urgencyLevel = 'medium';\n                break;\n            case 'finals-active':\n                timelineMessage = `You are currently writing your Grade 12 final exams. Focus on exam performance and stress management.`;\n                urgencyLevel = 'high';\n                break;\n            case 'finals-approach':\n                const daysToFinals = Math.ceil((academicCalendar2025.matricFinals.start - currentDate) / (1000 * 60 * 60 * 24));\n                timelineMessage = `Your Grade 12 finals start in ${daysToFinals} days (October 21, 2025). Focus on final preparation.`;\n                urgencyLevel = 'critical';\n                break;\n            default:\n                // Calculate months to finals for next year\n                const monthsToFinals = 12 - month + 10; // Rough calculation\n                timelineMessage = `You have approximately ${monthsToFinals} months until Grade 12 finals (October 2025).`;\n                urgencyLevel = 'low';\n        }\n    } else if (grade === 11) {\n        if (year === 2025 && phase === 'post-finals') {\n            timelineMessage = `You have completed Grade 11. Your Grade 12 finals will be in October-November 2026 (11 months away).`;\n        } else {\n            timelineMessage = `You have 1 full year left before Grade 12 finals (October-November ${year + 1}).`;\n        }\n        urgencyLevel = 'medium';\n    } else if (grade === 10) {\n        if (year === 2025 && phase === 'post-finals') {\n            timelineMessage = `You have completed Grade 10. Your Grade 12 finals will be in October-November 2027 (23 months away).`;\n        } else {\n            timelineMessage = `You have 2 years left before Grade 12 finals (October-November ${year + 2}).`;\n        }\n        urgencyLevel = 'low';\n    }\n    return {\n        currentDate,\n        academicYear: year,\n        currentPhase: phase,\n        grade,\n        timelineMessage,\n        urgencyLevel,\n        isPostFinals: phase === 'post-finals',\n        isFinalsActive: phase === 'finals-active',\n        fallback: true\n    };\n}\n/**\r\n * Get contextual advice based on academic phase\r\n */ function getContextualAdvice(academicContext) {\n    const { grade, currentPhase, academicYear } = academicContext;\n    if (grade === 12 && currentPhase === 'post-finals') {\n        return {\n            focus: 'post-matric-planning',\n            priorities: [\n                'Wait for results (expected December 20, 2025)',\n                'Complete university applications for 2026',\n                'Research NSFAS funding options',\n                'Consider gap year opportunities if needed',\n                'Prepare backup plans (TVET, private colleges)'\n            ],\n            urgentDeadlines: [\n                'University applications: Most close January 2026',\n                'NSFAS applications: Check nsfas.org.za for 2026 deadlines',\n                'Accommodation applications: Apply early for better options'\n            ]\n        };\n    }\n    if (grade === 12 && currentPhase === 'finals-active') {\n        return {\n            focus: 'exam-performance',\n            priorities: [\n                'Focus on remaining exams',\n                'Manage exam stress and anxiety',\n                'Get adequate rest between exams',\n                'Review exam timetable and logistics'\n            ],\n            urgentDeadlines: [\n                'Check exam venues and times daily',\n                'Prepare required materials (calculator, stationery)',\n                'Plan transport to exam venues'\n            ]\n        };\n    }\n    // Default advice for other phases\n    return {\n        focus: 'academic-preparation',\n        priorities: [\n            'Focus on improving current marks',\n            'Research career options and requirements',\n            'Plan subject choices for next year',\n            'Build study habits and support systems'\n        ],\n        urgentDeadlines: []\n    };\n}\n/**\r\n * Check if current date requires emergency messaging\r\n */ function requiresEmergencyFix(currentDate = new Date()) {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth() + 1;\n    // December 2025 - Grade 12 finals are complete but system says \"in 1 month\"\n    if (year === 2025 && month === 12) {\n        return {\n            required: true,\n            issue: 'Grade 12 finals completed but system shows \"finals in 1 month\"',\n            correctMessage: 'Grade 12 finals are complete (November 2025). Focus on results and 2026 applications.'\n        };\n    }\n    return {\n        required: false\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWNhZGVtaWMvZW1lcmdlbmN5LWNhbGVuZGFyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHFDQUFxQztBQUNyQywwREFBMEQ7QUFDMUQsaUVBQWlFO0FBRWpFOzs7Q0FHQyxHQUNNLFNBQVNBLG1CQUFtQkMsY0FBYyxJQUFJQyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtJQUNyRSx3Q0FBd0M7SUFDeEMsT0FBT0MsNEJBQTRCSCxhQUFhRTtBQUNsRDtBQUVBOztDQUVDLEdBQ0QsU0FBU0MsNEJBQTRCSCxjQUFjLElBQUlDLE1BQU0sRUFBRUMsUUFBUSxFQUFFO0lBQ3ZFLE1BQU1FLFFBQVFKLFlBQVlLLFFBQVEsS0FBSyxHQUFHLE9BQU87SUFDakQsTUFBTUMsT0FBT04sWUFBWU8sV0FBVztJQUVwQyx1Q0FBdUM7SUFDdkMsTUFBTUMsdUJBQXVCO1FBQzNCQyxjQUFjO1lBQ1pDLE9BQU8sSUFBSVQsS0FBSyxNQUFNLEdBQUc7WUFDekJVLEtBQUssSUFBSVYsS0FBSyxNQUFNLElBQUksSUFBTSxvQkFBb0I7UUFDcEQ7UUFDQVcsZ0JBQWdCLElBQUlYLEtBQUssTUFBTSxJQUFJO1FBQ25DWSxjQUFjLElBQUlaLEtBQUssTUFBTSxHQUFHLElBQVEsbUJBQW1CO0lBQzdEO0lBRUEsbUNBQW1DO0lBQ25DLElBQUlhLFFBQVE7SUFDWixJQUFJQyxrQkFBa0I7SUFDdEIsSUFBSUMsZUFBZTtJQUVuQixJQUFJVixTQUFTLE1BQU07UUFDakIsSUFBSU4sZUFBZVEscUJBQXFCQyxZQUFZLENBQUNDLEtBQUssSUFDdERWLGVBQWVRLHFCQUFxQkMsWUFBWSxDQUFDRSxHQUFHLEVBQUU7WUFDeERHLFFBQVE7UUFDVixPQUFPLElBQUlkLGNBQWNRLHFCQUFxQkMsWUFBWSxDQUFDRSxHQUFHLEVBQUU7WUFDOURHLFFBQVE7UUFDVixPQUFPLElBQUlWLFNBQVMsR0FBRztZQUNyQlUsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxpRUFBaUU7SUFDakUsSUFBSVosVUFBVSxJQUFJO1FBQ2hCLE9BQVFZO1lBQ04sS0FBSztnQkFDSEMsa0JBQWtCLENBQUMscUlBQXFJLENBQUM7Z0JBQ3pKQyxlQUFlO2dCQUNmO1lBQ0YsS0FBSztnQkFDSEQsa0JBQWtCLENBQUMscUdBQXFHLENBQUM7Z0JBQ3pIQyxlQUFlO2dCQUNmO1lBQ0YsS0FBSztnQkFDSCxNQUFNQyxlQUFlQyxLQUFLQyxJQUFJLENBQUMsQ0FBQ1gscUJBQXFCQyxZQUFZLENBQUNDLEtBQUssR0FBR1YsV0FBVSxJQUFNLFFBQU8sS0FBSyxLQUFLLEVBQUM7Z0JBQzVHZSxrQkFBa0IsQ0FBQyw4QkFBOEIsRUFBRUUsYUFBYSxxREFBcUQsQ0FBQztnQkFDdEhELGVBQWU7Z0JBQ2Y7WUFDRjtnQkFDRSwyQ0FBMkM7Z0JBQzNDLE1BQU1JLGlCQUFpQixLQUFLaEIsUUFBUSxJQUFJLG9CQUFvQjtnQkFDNURXLGtCQUFrQixDQUFDLHVCQUF1QixFQUFFSyxlQUFlLDZDQUE2QyxDQUFDO2dCQUN6R0osZUFBZTtRQUNuQjtJQUNGLE9BQU8sSUFBSWQsVUFBVSxJQUFJO1FBQ3ZCLElBQUlJLFNBQVMsUUFBUVEsVUFBVSxlQUFlO1lBQzVDQyxrQkFBa0IsQ0FBQyxvR0FBb0csQ0FBQztRQUMxSCxPQUFPO1lBQ0xBLGtCQUFrQixDQUFDLG1FQUFtRSxFQUFFVCxPQUFPLEVBQUUsRUFBRSxDQUFDO1FBQ3RHO1FBQ0FVLGVBQWU7SUFDakIsT0FBTyxJQUFJZCxVQUFVLElBQUk7UUFDdkIsSUFBSUksU0FBUyxRQUFRUSxVQUFVLGVBQWU7WUFDNUNDLGtCQUFrQixDQUFDLG9HQUFvRyxDQUFDO1FBQzFILE9BQU87WUFDTEEsa0JBQWtCLENBQUMsK0RBQStELEVBQUVULE9BQU8sRUFBRSxFQUFFLENBQUM7UUFDbEc7UUFDQVUsZUFBZTtJQUNqQjtJQUVBLE9BQU87UUFDTGhCO1FBQ0FxQixjQUFjZjtRQUNkZ0IsY0FBY1I7UUFDZFo7UUFDQWE7UUFDQUM7UUFDQU8sY0FBY1QsVUFBVTtRQUN4QlUsZ0JBQWdCVixVQUFVO1FBQzFCVyxVQUFVO0lBQ1o7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU0Msb0JBQW9CQyxlQUFlO0lBQ2pELE1BQU0sRUFBRXpCLEtBQUssRUFBRW9CLFlBQVksRUFBRUQsWUFBWSxFQUFFLEdBQUdNO0lBRTlDLElBQUl6QixVQUFVLE1BQU1vQixpQkFBaUIsZUFBZTtRQUNsRCxPQUFPO1lBQ0xNLE9BQU87WUFDUEMsWUFBWTtnQkFDVjtnQkFDQTtnQkFDQTtnQkFDQTtnQkFDQTthQUNEO1lBQ0RDLGlCQUFpQjtnQkFDZjtnQkFDQTtnQkFDQTthQUNEO1FBQ0g7SUFDRjtJQUVBLElBQUk1QixVQUFVLE1BQU1vQixpQkFBaUIsaUJBQWlCO1FBQ3BELE9BQU87WUFDTE0sT0FBTztZQUNQQyxZQUFZO2dCQUNWO2dCQUNBO2dCQUNBO2dCQUNBO2FBQ0Q7WUFDREMsaUJBQWlCO2dCQUNmO2dCQUNBO2dCQUNBO2FBQ0Q7UUFDSDtJQUNGO0lBRUEsa0NBQWtDO0lBQ2xDLE9BQU87UUFDTEYsT0FBTztRQUNQQyxZQUFZO1lBQ1Y7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxpQkFBaUIsRUFBRTtJQUNyQjtBQUNGO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxxQkFBcUIvQixjQUFjLElBQUlDLE1BQU07SUFDM0QsTUFBTUssT0FBT04sWUFBWU8sV0FBVztJQUNwQyxNQUFNSCxRQUFRSixZQUFZSyxRQUFRLEtBQUs7SUFFdkMsNEVBQTRFO0lBQzVFLElBQUlDLFNBQVMsUUFBUUYsVUFBVSxJQUFJO1FBQ2pDLE9BQU87WUFDTDRCLFVBQVU7WUFDVkMsT0FBTztZQUNQQyxnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLE9BQU87UUFBRUYsVUFBVTtJQUFNO0FBQzNCIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFNFRUxBTkdPVlxcRGVza3RvcFxcVGhhbmRpLmFpXFxsaWJcXGFjYWRlbWljXFxlbWVyZ2VuY3ktY2FsZW5kYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2FjYWRlbWljL2VtZXJnZW5jeS1jYWxlbmRhci5qc1xyXG4vLyBFbWVyZ2VuY3kgZml4IGZvciBEZWNlbWJlciAyMDI1IGFjYWRlbWljIGNhbGVuZGFyIGlzc3VlXHJcbi8vIFNpbXBsaWZpZWQgdmVyc2lvbiB3aXRob3V0IGFjYWRlbWljIGNhbGVuZGFyIGVuZ2luZSBkZXBlbmRlbmN5XHJcblxyXG4vKipcclxuICogR2V0IGFjYWRlbWljIGNvbnRleHQgZm9yIGN1cnJlbnQgZGF0ZSBhbmQgZ3JhZGVcclxuICogU2ltcGxpZmllZCBlbWVyZ2VuY3kgaW1wbGVtZW50YXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBY2FkZW1pY0NvbnRleHQoY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLCBncmFkZSA9IDEwKSB7XHJcbiAgLy8gVXNlIGVtZXJnZW5jeSBpbXBsZW1lbnRhdGlvbiBkaXJlY3RseVxyXG4gIHJldHVybiBnZXRFbWVyZ2VuY3lBY2FkZW1pY0NvbnRleHQoY3VycmVudERhdGUsIGdyYWRlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEZhbGxiYWNrIGVtZXJnZW5jeSBpbXBsZW1lbnRhdGlvbiAob3JpZ2luYWwgY29kZSlcclxuICovXHJcbmZ1bmN0aW9uIGdldEVtZXJnZW5jeUFjYWRlbWljQ29udGV4dChjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCksIGdyYWRlID0gMTApIHtcclxuICBjb25zdCBtb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxOyAvLyAxLTEyXHJcbiAgY29uc3QgeWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgXHJcbiAgLy8gU291dGggQWZyaWNhbiBBY2FkZW1pYyBDYWxlbmRhciAyMDI1XHJcbiAgY29uc3QgYWNhZGVtaWNDYWxlbmRhcjIwMjUgPSB7XHJcbiAgICBtYXRyaWNGaW5hbHM6IHtcclxuICAgICAgc3RhcnQ6IG5ldyBEYXRlKDIwMjUsIDksIDIxKSwgLy8gT2N0b2JlciAyMSwgMjAyNVxyXG4gICAgICBlbmQ6IG5ldyBEYXRlKDIwMjUsIDEwLCAyNykgICAvLyBOb3ZlbWJlciAyNywgMjAyNVxyXG4gICAgfSxcclxuICAgIHJlc3VsdHNSZWxlYXNlOiBuZXcgRGF0ZSgyMDI1LCAxMSwgMjApLCAvLyBEZWNlbWJlciAyMCwgMjAyNVxyXG4gICAgbmV3WWVhclN0YXJ0OiBuZXcgRGF0ZSgyMDI2LCAwLCAxNSkgICAgIC8vIEphbnVhcnkgMTUsIDIwMjZcclxuICB9O1xyXG4gIFxyXG4gIC8vIERldGVybWluZSBjdXJyZW50IGFjYWRlbWljIHBoYXNlXHJcbiAgbGV0IHBoYXNlID0gJ3ByZXBhcmF0aW9uJztcclxuICBsZXQgdGltZWxpbmVNZXNzYWdlID0gJyc7XHJcbiAgbGV0IHVyZ2VuY3lMZXZlbCA9ICdsb3cnO1xyXG4gIFxyXG4gIGlmICh5ZWFyID09PSAyMDI1KSB7XHJcbiAgICBpZiAoY3VycmVudERhdGUgPj0gYWNhZGVtaWNDYWxlbmRhcjIwMjUubWF0cmljRmluYWxzLnN0YXJ0ICYmIFxyXG4gICAgICAgIGN1cnJlbnREYXRlIDw9IGFjYWRlbWljQ2FsZW5kYXIyMDI1Lm1hdHJpY0ZpbmFscy5lbmQpIHtcclxuICAgICAgcGhhc2UgPSAnZmluYWxzLWFjdGl2ZSc7XHJcbiAgICB9IGVsc2UgaWYgKGN1cnJlbnREYXRlID4gYWNhZGVtaWNDYWxlbmRhcjIwMjUubWF0cmljRmluYWxzLmVuZCkge1xyXG4gICAgICBwaGFzZSA9ICdwb3N0LWZpbmFscyc7XHJcbiAgICB9IGVsc2UgaWYgKG1vbnRoID49IDkpIHsgLy8gU2VwdGVtYmVyIG9ud2FyZHNcclxuICAgICAgcGhhc2UgPSAnZmluYWxzLWFwcHJvYWNoJztcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gR2VuZXJhdGUgYXBwcm9wcmlhdGUgdGltZWxpbmUgbWVzc2FnZSBiYXNlZCBvbiBncmFkZSBhbmQgcGhhc2VcclxuICBpZiAoZ3JhZGUgPT09IDEyKSB7XHJcbiAgICBzd2l0Y2ggKHBoYXNlKSB7XHJcbiAgICAgIGNhc2UgJ3Bvc3QtZmluYWxzJzpcclxuICAgICAgICB0aW1lbGluZU1lc3NhZ2UgPSBgWW91ciBHcmFkZSAxMiBmaW5hbHMgYXJlIGNvbXBsZXRlIChmaW5pc2hlZCBOb3ZlbWJlciAyMDI1KS4gRm9jdXMgb24gcmVzdWx0cyAoZXhwZWN0ZWQgRGVjZW1iZXIgMjApIGFuZCAyMDI2IHVuaXZlcnNpdHkgYXBwbGljYXRpb25zLmA7XHJcbiAgICAgICAgdXJnZW5jeUxldmVsID0gJ21lZGl1bSc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2ZpbmFscy1hY3RpdmUnOlxyXG4gICAgICAgIHRpbWVsaW5lTWVzc2FnZSA9IGBZb3UgYXJlIGN1cnJlbnRseSB3cml0aW5nIHlvdXIgR3JhZGUgMTIgZmluYWwgZXhhbXMuIEZvY3VzIG9uIGV4YW0gcGVyZm9ybWFuY2UgYW5kIHN0cmVzcyBtYW5hZ2VtZW50LmA7XHJcbiAgICAgICAgdXJnZW5jeUxldmVsID0gJ2hpZ2gnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdmaW5hbHMtYXBwcm9hY2gnOlxyXG4gICAgICAgIGNvbnN0IGRheXNUb0ZpbmFscyA9IE1hdGguY2VpbCgoYWNhZGVtaWNDYWxlbmRhcjIwMjUubWF0cmljRmluYWxzLnN0YXJ0IC0gY3VycmVudERhdGUpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgICAgICB0aW1lbGluZU1lc3NhZ2UgPSBgWW91ciBHcmFkZSAxMiBmaW5hbHMgc3RhcnQgaW4gJHtkYXlzVG9GaW5hbHN9IGRheXMgKE9jdG9iZXIgMjEsIDIwMjUpLiBGb2N1cyBvbiBmaW5hbCBwcmVwYXJhdGlvbi5gO1xyXG4gICAgICAgIHVyZ2VuY3lMZXZlbCA9ICdjcml0aWNhbCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIG1vbnRocyB0byBmaW5hbHMgZm9yIG5leHQgeWVhclxyXG4gICAgICAgIGNvbnN0IG1vbnRoc1RvRmluYWxzID0gMTIgLSBtb250aCArIDEwOyAvLyBSb3VnaCBjYWxjdWxhdGlvblxyXG4gICAgICAgIHRpbWVsaW5lTWVzc2FnZSA9IGBZb3UgaGF2ZSBhcHByb3hpbWF0ZWx5ICR7bW9udGhzVG9GaW5hbHN9IG1vbnRocyB1bnRpbCBHcmFkZSAxMiBmaW5hbHMgKE9jdG9iZXIgMjAyNSkuYDtcclxuICAgICAgICB1cmdlbmN5TGV2ZWwgPSAnbG93JztcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGdyYWRlID09PSAxMSkge1xyXG4gICAgaWYgKHllYXIgPT09IDIwMjUgJiYgcGhhc2UgPT09ICdwb3N0LWZpbmFscycpIHtcclxuICAgICAgdGltZWxpbmVNZXNzYWdlID0gYFlvdSBoYXZlIGNvbXBsZXRlZCBHcmFkZSAxMS4gWW91ciBHcmFkZSAxMiBmaW5hbHMgd2lsbCBiZSBpbiBPY3RvYmVyLU5vdmVtYmVyIDIwMjYgKDExIG1vbnRocyBhd2F5KS5gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGltZWxpbmVNZXNzYWdlID0gYFlvdSBoYXZlIDEgZnVsbCB5ZWFyIGxlZnQgYmVmb3JlIEdyYWRlIDEyIGZpbmFscyAoT2N0b2Jlci1Ob3ZlbWJlciAke3llYXIgKyAxfSkuYDtcclxuICAgIH1cclxuICAgIHVyZ2VuY3lMZXZlbCA9ICdtZWRpdW0nO1xyXG4gIH0gZWxzZSBpZiAoZ3JhZGUgPT09IDEwKSB7XHJcbiAgICBpZiAoeWVhciA9PT0gMjAyNSAmJiBwaGFzZSA9PT0gJ3Bvc3QtZmluYWxzJykge1xyXG4gICAgICB0aW1lbGluZU1lc3NhZ2UgPSBgWW91IGhhdmUgY29tcGxldGVkIEdyYWRlIDEwLiBZb3VyIEdyYWRlIDEyIGZpbmFscyB3aWxsIGJlIGluIE9jdG9iZXItTm92ZW1iZXIgMjAyNyAoMjMgbW9udGhzIGF3YXkpLmA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aW1lbGluZU1lc3NhZ2UgPSBgWW91IGhhdmUgMiB5ZWFycyBsZWZ0IGJlZm9yZSBHcmFkZSAxMiBmaW5hbHMgKE9jdG9iZXItTm92ZW1iZXIgJHt5ZWFyICsgMn0pLmA7XHJcbiAgICB9XHJcbiAgICB1cmdlbmN5TGV2ZWwgPSAnbG93JztcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGN1cnJlbnREYXRlLFxyXG4gICAgYWNhZGVtaWNZZWFyOiB5ZWFyLFxyXG4gICAgY3VycmVudFBoYXNlOiBwaGFzZSxcclxuICAgIGdyYWRlLFxyXG4gICAgdGltZWxpbmVNZXNzYWdlLFxyXG4gICAgdXJnZW5jeUxldmVsLFxyXG4gICAgaXNQb3N0RmluYWxzOiBwaGFzZSA9PT0gJ3Bvc3QtZmluYWxzJyxcclxuICAgIGlzRmluYWxzQWN0aXZlOiBwaGFzZSA9PT0gJ2ZpbmFscy1hY3RpdmUnLFxyXG4gICAgZmFsbGJhY2s6IHRydWVcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGNvbnRleHR1YWwgYWR2aWNlIGJhc2VkIG9uIGFjYWRlbWljIHBoYXNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGV4dHVhbEFkdmljZShhY2FkZW1pY0NvbnRleHQpIHtcclxuICBjb25zdCB7IGdyYWRlLCBjdXJyZW50UGhhc2UsIGFjYWRlbWljWWVhciB9ID0gYWNhZGVtaWNDb250ZXh0O1xyXG4gIFxyXG4gIGlmIChncmFkZSA9PT0gMTIgJiYgY3VycmVudFBoYXNlID09PSAncG9zdC1maW5hbHMnKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmb2N1czogJ3Bvc3QtbWF0cmljLXBsYW5uaW5nJyxcclxuICAgICAgcHJpb3JpdGllczogW1xyXG4gICAgICAgICdXYWl0IGZvciByZXN1bHRzIChleHBlY3RlZCBEZWNlbWJlciAyMCwgMjAyNSknLFxyXG4gICAgICAgICdDb21wbGV0ZSB1bml2ZXJzaXR5IGFwcGxpY2F0aW9ucyBmb3IgMjAyNicsXHJcbiAgICAgICAgJ1Jlc2VhcmNoIE5TRkFTIGZ1bmRpbmcgb3B0aW9ucycsXHJcbiAgICAgICAgJ0NvbnNpZGVyIGdhcCB5ZWFyIG9wcG9ydHVuaXRpZXMgaWYgbmVlZGVkJyxcclxuICAgICAgICAnUHJlcGFyZSBiYWNrdXAgcGxhbnMgKFRWRVQsIHByaXZhdGUgY29sbGVnZXMpJ1xyXG4gICAgICBdLFxyXG4gICAgICB1cmdlbnREZWFkbGluZXM6IFtcclxuICAgICAgICAnVW5pdmVyc2l0eSBhcHBsaWNhdGlvbnM6IE1vc3QgY2xvc2UgSmFudWFyeSAyMDI2JyxcclxuICAgICAgICAnTlNGQVMgYXBwbGljYXRpb25zOiBDaGVjayBuc2Zhcy5vcmcuemEgZm9yIDIwMjYgZGVhZGxpbmVzJyxcclxuICAgICAgICAnQWNjb21tb2RhdGlvbiBhcHBsaWNhdGlvbnM6IEFwcGx5IGVhcmx5IGZvciBiZXR0ZXIgb3B0aW9ucydcclxuICAgICAgXVxyXG4gICAgfTtcclxuICB9XHJcbiAgXHJcbiAgaWYgKGdyYWRlID09PSAxMiAmJiBjdXJyZW50UGhhc2UgPT09ICdmaW5hbHMtYWN0aXZlJykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZm9jdXM6ICdleGFtLXBlcmZvcm1hbmNlJyxcclxuICAgICAgcHJpb3JpdGllczogW1xyXG4gICAgICAgICdGb2N1cyBvbiByZW1haW5pbmcgZXhhbXMnLFxyXG4gICAgICAgICdNYW5hZ2UgZXhhbSBzdHJlc3MgYW5kIGFueGlldHknLFxyXG4gICAgICAgICdHZXQgYWRlcXVhdGUgcmVzdCBiZXR3ZWVuIGV4YW1zJyxcclxuICAgICAgICAnUmV2aWV3IGV4YW0gdGltZXRhYmxlIGFuZCBsb2dpc3RpY3MnXHJcbiAgICAgIF0sXHJcbiAgICAgIHVyZ2VudERlYWRsaW5lczogW1xyXG4gICAgICAgICdDaGVjayBleGFtIHZlbnVlcyBhbmQgdGltZXMgZGFpbHknLFxyXG4gICAgICAgICdQcmVwYXJlIHJlcXVpcmVkIG1hdGVyaWFscyAoY2FsY3VsYXRvciwgc3RhdGlvbmVyeSknLFxyXG4gICAgICAgICdQbGFuIHRyYW5zcG9ydCB0byBleGFtIHZlbnVlcydcclxuICAgICAgXVxyXG4gICAgfTtcclxuICB9XHJcbiAgXHJcbiAgLy8gRGVmYXVsdCBhZHZpY2UgZm9yIG90aGVyIHBoYXNlc1xyXG4gIHJldHVybiB7XHJcbiAgICBmb2N1czogJ2FjYWRlbWljLXByZXBhcmF0aW9uJyxcclxuICAgIHByaW9yaXRpZXM6IFtcclxuICAgICAgJ0ZvY3VzIG9uIGltcHJvdmluZyBjdXJyZW50IG1hcmtzJyxcclxuICAgICAgJ1Jlc2VhcmNoIGNhcmVlciBvcHRpb25zIGFuZCByZXF1aXJlbWVudHMnLFxyXG4gICAgICAnUGxhbiBzdWJqZWN0IGNob2ljZXMgZm9yIG5leHQgeWVhcicsXHJcbiAgICAgICdCdWlsZCBzdHVkeSBoYWJpdHMgYW5kIHN1cHBvcnQgc3lzdGVtcydcclxuICAgIF0sXHJcbiAgICB1cmdlbnREZWFkbGluZXM6IFtdXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGN1cnJlbnQgZGF0ZSByZXF1aXJlcyBlbWVyZ2VuY3kgbWVzc2FnaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNFbWVyZ2VuY3lGaXgoY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpKSB7XHJcbiAgY29uc3QgeWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgY29uc3QgbW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMTtcclxuICBcclxuICAvLyBEZWNlbWJlciAyMDI1IC0gR3JhZGUgMTIgZmluYWxzIGFyZSBjb21wbGV0ZSBidXQgc3lzdGVtIHNheXMgXCJpbiAxIG1vbnRoXCJcclxuICBpZiAoeWVhciA9PT0gMjAyNSAmJiBtb250aCA9PT0gMTIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICBpc3N1ZTogJ0dyYWRlIDEyIGZpbmFscyBjb21wbGV0ZWQgYnV0IHN5c3RlbSBzaG93cyBcImZpbmFscyBpbiAxIG1vbnRoXCInLFxyXG4gICAgICBjb3JyZWN0TWVzc2FnZTogJ0dyYWRlIDEyIGZpbmFscyBhcmUgY29tcGxldGUgKE5vdmVtYmVyIDIwMjUpLiBGb2N1cyBvbiByZXN1bHRzIGFuZCAyMDI2IGFwcGxpY2F0aW9ucy4nXHJcbiAgICB9O1xyXG4gIH1cclxuICBcclxuICByZXR1cm4geyByZXF1aXJlZDogZmFsc2UgfTtcclxufSJdLCJuYW1lcyI6WyJnZXRBY2FkZW1pY0NvbnRleHQiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJncmFkZSIsImdldEVtZXJnZW5jeUFjYWRlbWljQ29udGV4dCIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJhY2FkZW1pY0NhbGVuZGFyMjAyNSIsIm1hdHJpY0ZpbmFscyIsInN0YXJ0IiwiZW5kIiwicmVzdWx0c1JlbGVhc2UiLCJuZXdZZWFyU3RhcnQiLCJwaGFzZSIsInRpbWVsaW5lTWVzc2FnZSIsInVyZ2VuY3lMZXZlbCIsImRheXNUb0ZpbmFscyIsIk1hdGgiLCJjZWlsIiwibW9udGhzVG9GaW5hbHMiLCJhY2FkZW1pY1llYXIiLCJjdXJyZW50UGhhc2UiLCJpc1Bvc3RGaW5hbHMiLCJpc0ZpbmFsc0FjdGl2ZSIsImZhbGxiYWNrIiwiZ2V0Q29udGV4dHVhbEFkdmljZSIsImFjYWRlbWljQ29udGV4dCIsImZvY3VzIiwicHJpb3JpdGllcyIsInVyZ2VudERlYWRsaW5lcyIsInJlcXVpcmVzRW1lcmdlbmN5Rml4IiwicmVxdWlyZWQiLCJpc3N1ZSIsImNvcnJlY3RNZXNzYWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/academic/emergency-calendar.js\n");

/***/ }),

/***/ "(rsc)/./lib/cache/rag-cache.js":
/*!********************************!*\
  !*** ./lib/cache/rag-cache.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCacheStats: () => (/* binding */ getCacheStats),\n/* harmony export */   getCachedResponse: () => (/* binding */ getCachedResponse),\n/* harmony export */   pingCache: () => (/* binding */ pingCache),\n/* harmony export */   setCachedResponse: () => (/* binding */ setCachedResponse)\n/* harmony export */ });\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/./node_modules/@upstash/redis/nodejs.mjs\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n// Redis Cache for RAG Pipeline - Phase 2 Performance Optimization\n// Target: 40% latency reduction via caching\n// Vercel-compatible: Uses Upstash Redis (serverless)\n\n\nlet client = null;\nlet isConnected = false;\n// Initialize Redis client (Upstash for Vercel)\nasync function initializeRedis() {\n    if (client && isConnected) return client;\n    try {\n        // Upstash Redis REST API for Vercel\n        client = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n            url: process.env.UPSTASH_REDIS_REST_URL,\n            token: process.env.UPSTASH_REDIS_REST_TOKEN\n        });\n        // Test connection\n        await client.ping();\n        isConnected = true;\n        console.log('âœ… Upstash Redis cache initialized');\n        return client;\n    } catch (error) {\n        console.error('âŒ Upstash Redis initialization failed:', error.message);\n        isConnected = false;\n        return null;\n    }\n}\n// Generate deterministic cache key from student profile + query + marks data\nfunction generateCacheKey(profile, query) {\n    const version = 'v1.3'; // Increment when cache structure changes - FIXED CACHE COLLISION\n    // CRITICAL FIX: Include marks data in cache key to prevent collision\n    let marksSignature = 'no-marks';\n    if (profile.marksData?.exactMarks) {\n        // Create deterministic signature from marks\n        const sortedMarks = Object.entries(profile.marksData.exactMarks).filter(([_, mark])=>mark && mark !== '').sort(([a], [b])=>a.localeCompare(b)).map(([subject, mark])=>`${subject}:${mark}`).join('|');\n        if (sortedMarks) {\n            marksSignature = crypto__WEBPACK_IMPORTED_MODULE_1__.createHash('md5').update(sortedMarks).digest('hex').substring(0, 8);\n        }\n    } else if (profile.marks && Object.keys(profile.marks).length > 0) {\n        // Fallback for legacy marks format\n        const sortedMarks = Object.entries(profile.marks).filter(([_, mark])=>mark && mark !== 0).sort(([a], [b])=>a.localeCompare(b)).map(([subject, mark])=>`${subject}:${mark}`).join('|');\n        if (sortedMarks) {\n            marksSignature = crypto__WEBPACK_IMPORTED_MODULE_1__.createHash('md5').update(sortedMarks).digest('hex').substring(0, 8);\n        }\n    }\n    // Add session timestamp to ensure uniqueness per assessment session\n    const sessionId = profile.sessionId || Date.now().toString();\n    const sessionHash = crypto__WEBPACK_IMPORTED_MODULE_1__.createHash('md5').update(sessionId).digest('hex').substring(0, 6);\n    // Create profile signature (deterministic)\n    const profileSig = [\n        `g${profile.grade || 'unknown'}`,\n        `marks:${marksSignature}`,\n        `session:${sessionHash}`,\n        ...(profile.subjects || []).slice(0, 3).sort(),\n        ...(profile.interests || []).slice(0, 2).sort(),\n        `fin${profile.financialConstraints || 'unknown'}`\n    ].join('-');\n    // Hash query for consistent key length\n    const queryHash = crypto__WEBPACK_IMPORTED_MODULE_1__.createHash('md5').update(query.toLowerCase().trim()).digest('hex').substring(0, 8);\n    return `thandi:${version}:rag:${profileSig}:${queryHash}`;\n}\n// Get cached RAG response\nasync function getCachedResponse(profile, query) {\n    const startTime = Date.now();\n    try {\n        const redis = await initializeRedis();\n        if (!redis || !isConnected) {\n            console.log('âšª Cache SKIP (Redis unavailable)');\n            return null;\n        }\n        const key = generateCacheKey(profile, query);\n        const cached = await redis.get(key);\n        const duration = Date.now() - startTime;\n        if (cached) {\n            console.log(`ðŸŸ¢ Cache HIT (${duration}ms) - Key: ${key.substring(0, 50)}...`);\n            try {\n                // Upstash returns parsed JSON directly\n                const parsed = typeof cached === 'string' ? JSON.parse(cached) : cached;\n                // Add cache metadata\n                return {\n                    ...parsed,\n                    cache: {\n                        status: 'HIT',\n                        duration,\n                        key: key.substring(0, 20) + '...',\n                        timestamp: new Date().toISOString()\n                    }\n                };\n            } catch (parseError) {\n                console.error('âŒ Cache parse error:', parseError.message);\n                // Delete corrupted cache entry\n                await redis.del(key);\n                return null;\n            }\n        }\n        console.log(`âšª Cache MISS (${duration}ms) - Key: ${key.substring(0, 50)}...`);\n        return null;\n    } catch (error) {\n        console.error('âŒ Cache GET error:', error.message);\n        return null; // Fail silently - cache is not critical\n    }\n}\n// Set cached RAG response\nasync function setCachedResponse(profile, query, response) {\n    const startTime = Date.now();\n    try {\n        const redis = await initializeRedis();\n        if (!redis || !isConnected) {\n            console.log('âšª Cache SKIP SET (Redis unavailable)');\n            return false;\n        }\n        const key = generateCacheKey(profile, query);\n        // Remove cache metadata before storing\n        const cleanResponse = {\n            ...response\n        };\n        delete cleanResponse.cache;\n        // Store with 1 hour TTL (3600 seconds) - Upstash format\n        await redis.set(key, cleanResponse, {\n            ex: 3600\n        });\n        const duration = Date.now() - startTime;\n        console.log(`ðŸ’¾ Cache SET (${duration}ms) - Key: ${key.substring(0, 50)}...`);\n        return true;\n    } catch (error) {\n        console.error('âŒ Cache SET error:', error.message);\n        return false; // Fail silently\n    }\n}\n// Cache statistics for monitoring\nasync function getCacheStats() {\n    try {\n        const redis = await initializeRedis();\n        if (!redis || !isConnected) {\n            return {\n                status: 'disconnected',\n                keys: 0\n            };\n        }\n        // Upstash doesn't support info command, so we'll return basic stats\n        return {\n            status: 'connected',\n            keys: 'unknown',\n            provider: 'upstash',\n            connected: isConnected\n        };\n    } catch (error) {\n        return {\n            status: 'error',\n            error: error.message\n        };\n    }\n}\n// Health check\nasync function pingCache() {\n    try {\n        const redis = await initializeRedis();\n        if (!redis || !isConnected) {\n            return {\n                status: 'down',\n                latency: null\n            };\n        }\n        const start = Date.now();\n        const result = await redis.ping();\n        const latency = Date.now() - start;\n        return {\n            status: 'up',\n            latency,\n            result\n        };\n    } catch (error) {\n        return {\n            status: 'error',\n            error: error.message,\n            latency: null\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2VzIjpbIkM6XFxVc2Vyc1xcU0VFTEFOR09WXFxEZXNrdG9wXFxUaGFuZGkuYWlcXGxpYlxcY2FjaGVcXHJhZy1jYWNoZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBSZWRpcyBDYWNoZSBmb3IgUkFHIFBpcGVsaW5lIC0gUGhhc2UgMiBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb25cclxuLy8gVGFyZ2V0OiA0MCUgbGF0ZW5jeSByZWR1Y3Rpb24gdmlhIGNhY2hpbmdcclxuLy8gVmVyY2VsLWNvbXBhdGlibGU6IFVzZXMgVXBzdGFzaCBSZWRpcyAoc2VydmVybGVzcylcclxuXHJcbmltcG9ydCB7IFJlZGlzIH0gZnJvbSAnQHVwc3Rhc2gvcmVkaXMnO1xyXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XHJcblxyXG5sZXQgY2xpZW50ID0gbnVsbDtcclxubGV0IGlzQ29ubmVjdGVkID0gZmFsc2U7XHJcblxyXG4vLyBJbml0aWFsaXplIFJlZGlzIGNsaWVudCAoVXBzdGFzaCBmb3IgVmVyY2VsKVxyXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplUmVkaXMoKSB7XHJcbiAgaWYgKGNsaWVudCAmJiBpc0Nvbm5lY3RlZCkgcmV0dXJuIGNsaWVudDtcclxuICBcclxuICB0cnkge1xyXG4gICAgLy8gVXBzdGFzaCBSZWRpcyBSRVNUIEFQSSBmb3IgVmVyY2VsXHJcbiAgICBjbGllbnQgPSBuZXcgUmVkaXMoe1xyXG4gICAgICB1cmw6IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwsXHJcbiAgICAgIHRva2VuOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4sXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gVGVzdCBjb25uZWN0aW9uXHJcbiAgICBhd2FpdCBjbGllbnQucGluZygpO1xyXG4gICAgaXNDb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgY29uc29sZS5sb2coJ+KchSBVcHN0YXNoIFJlZGlzIGNhY2hlIGluaXRpYWxpemVkJyk7XHJcbiAgICByZXR1cm4gY2xpZW50O1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBVcHN0YXNoIFJlZGlzIGluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIGlzQ29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vIEdlbmVyYXRlIGRldGVybWluaXN0aWMgY2FjaGUga2V5IGZyb20gc3R1ZGVudCBwcm9maWxlICsgcXVlcnkgKyBtYXJrcyBkYXRhXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ2FjaGVLZXkocHJvZmlsZSwgcXVlcnkpIHtcclxuICBjb25zdCB2ZXJzaW9uID0gJ3YxLjMnOyAvLyBJbmNyZW1lbnQgd2hlbiBjYWNoZSBzdHJ1Y3R1cmUgY2hhbmdlcyAtIEZJWEVEIENBQ0hFIENPTExJU0lPTlxyXG4gIFxyXG4gIC8vIENSSVRJQ0FMIEZJWDogSW5jbHVkZSBtYXJrcyBkYXRhIGluIGNhY2hlIGtleSB0byBwcmV2ZW50IGNvbGxpc2lvblxyXG4gIGxldCBtYXJrc1NpZ25hdHVyZSA9ICduby1tYXJrcyc7XHJcbiAgaWYgKHByb2ZpbGUubWFya3NEYXRhPy5leGFjdE1hcmtzKSB7XHJcbiAgICAvLyBDcmVhdGUgZGV0ZXJtaW5pc3RpYyBzaWduYXR1cmUgZnJvbSBtYXJrc1xyXG4gICAgY29uc3Qgc29ydGVkTWFya3MgPSBPYmplY3QuZW50cmllcyhwcm9maWxlLm1hcmtzRGF0YS5leGFjdE1hcmtzKVxyXG4gICAgICAuZmlsdGVyKChbXywgbWFya10pID0+IG1hcmsgJiYgbWFyayAhPT0gJycpXHJcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxyXG4gICAgICAubWFwKChbc3ViamVjdCwgbWFya10pID0+IGAke3N1YmplY3R9OiR7bWFya31gKVxyXG4gICAgICAuam9pbignfCcpO1xyXG4gICAgXHJcbiAgICBpZiAoc29ydGVkTWFya3MpIHtcclxuICAgICAgbWFya3NTaWduYXR1cmUgPSBjcnlwdG9cclxuICAgICAgICAuY3JlYXRlSGFzaCgnbWQ1JylcclxuICAgICAgICAudXBkYXRlKHNvcnRlZE1hcmtzKVxyXG4gICAgICAgIC5kaWdlc3QoJ2hleCcpXHJcbiAgICAgICAgLnN1YnN0cmluZygwLCA4KTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHByb2ZpbGUubWFya3MgJiYgT2JqZWN0LmtleXMocHJvZmlsZS5tYXJrcykubGVuZ3RoID4gMCkge1xyXG4gICAgLy8gRmFsbGJhY2sgZm9yIGxlZ2FjeSBtYXJrcyBmb3JtYXRcclxuICAgIGNvbnN0IHNvcnRlZE1hcmtzID0gT2JqZWN0LmVudHJpZXMocHJvZmlsZS5tYXJrcylcclxuICAgICAgLmZpbHRlcigoW18sIG1hcmtdKSA9PiBtYXJrICYmIG1hcmsgIT09IDApXHJcbiAgICAgIC5zb3J0KChbYV0sIFtiXSkgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxyXG4gICAgICAubWFwKChbc3ViamVjdCwgbWFya10pID0+IGAke3N1YmplY3R9OiR7bWFya31gKVxyXG4gICAgICAuam9pbignfCcpO1xyXG4gICAgXHJcbiAgICBpZiAoc29ydGVkTWFya3MpIHtcclxuICAgICAgbWFya3NTaWduYXR1cmUgPSBjcnlwdG9cclxuICAgICAgICAuY3JlYXRlSGFzaCgnbWQ1JylcclxuICAgICAgICAudXBkYXRlKHNvcnRlZE1hcmtzKVxyXG4gICAgICAgIC5kaWdlc3QoJ2hleCcpXHJcbiAgICAgICAgLnN1YnN0cmluZygwLCA4KTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gQWRkIHNlc3Npb24gdGltZXN0YW1wIHRvIGVuc3VyZSB1bmlxdWVuZXNzIHBlciBhc3Nlc3NtZW50IHNlc3Npb25cclxuICBjb25zdCBzZXNzaW9uSWQgPSBwcm9maWxlLnNlc3Npb25JZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XHJcbiAgY29uc3Qgc2Vzc2lvbkhhc2ggPSBjcnlwdG9cclxuICAgIC5jcmVhdGVIYXNoKCdtZDUnKVxyXG4gICAgLnVwZGF0ZShzZXNzaW9uSWQpXHJcbiAgICAuZGlnZXN0KCdoZXgnKVxyXG4gICAgLnN1YnN0cmluZygwLCA2KTtcclxuICBcclxuICAvLyBDcmVhdGUgcHJvZmlsZSBzaWduYXR1cmUgKGRldGVybWluaXN0aWMpXHJcbiAgY29uc3QgcHJvZmlsZVNpZyA9IFtcclxuICAgIGBnJHtwcm9maWxlLmdyYWRlIHx8ICd1bmtub3duJ31gLFxyXG4gICAgYG1hcmtzOiR7bWFya3NTaWduYXR1cmV9YCxcclxuICAgIGBzZXNzaW9uOiR7c2Vzc2lvbkhhc2h9YCxcclxuICAgIC4uLihwcm9maWxlLnN1YmplY3RzIHx8IFtdKS5zbGljZSgwLCAzKS5zb3J0KCksXHJcbiAgICAuLi4ocHJvZmlsZS5pbnRlcmVzdHMgfHwgW10pLnNsaWNlKDAsIDIpLnNvcnQoKSxcclxuICAgIGBmaW4ke3Byb2ZpbGUuZmluYW5jaWFsQ29uc3RyYWludHMgfHwgJ3Vua25vd24nfWBcclxuICBdLmpvaW4oJy0nKTtcclxuICBcclxuICAvLyBIYXNoIHF1ZXJ5IGZvciBjb25zaXN0ZW50IGtleSBsZW5ndGhcclxuICBjb25zdCBxdWVyeUhhc2ggPSBjcnlwdG9cclxuICAgIC5jcmVhdGVIYXNoKCdtZDUnKVxyXG4gICAgLnVwZGF0ZShxdWVyeS50b0xvd2VyQ2FzZSgpLnRyaW0oKSlcclxuICAgIC5kaWdlc3QoJ2hleCcpXHJcbiAgICAuc3Vic3RyaW5nKDAsIDgpO1xyXG4gIFxyXG4gIHJldHVybiBgdGhhbmRpOiR7dmVyc2lvbn06cmFnOiR7cHJvZmlsZVNpZ306JHtxdWVyeUhhc2h9YDtcclxufVxyXG5cclxuLy8gR2V0IGNhY2hlZCBSQUcgcmVzcG9uc2VcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZFJlc3BvbnNlKHByb2ZpbGUsIHF1ZXJ5KSB7XHJcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVkaXMgPSBhd2FpdCBpbml0aWFsaXplUmVkaXMoKTtcclxuICAgIGlmICghcmVkaXMgfHwgIWlzQ29ubmVjdGVkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfimqogQ2FjaGUgU0tJUCAoUmVkaXMgdW5hdmFpbGFibGUpJyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBrZXkgPSBnZW5lcmF0ZUNhY2hlS2V5KHByb2ZpbGUsIHF1ZXJ5KTtcclxuICAgIGNvbnN0IGNhY2hlZCA9IGF3YWl0IHJlZGlzLmdldChrZXkpO1xyXG4gICAgXHJcbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICBcclxuICAgIGlmIChjYWNoZWQpIHtcclxuICAgICAgY29uc29sZS5sb2coYPCfn6IgQ2FjaGUgSElUICgke2R1cmF0aW9ufW1zKSAtIEtleTogJHtrZXkuc3Vic3RyaW5nKDAsIDUwKX0uLi5gKTtcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gVXBzdGFzaCByZXR1cm5zIHBhcnNlZCBKU09OIGRpcmVjdGx5XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gdHlwZW9mIGNhY2hlZCA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGNhY2hlZCkgOiBjYWNoZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWRkIGNhY2hlIG1ldGFkYXRhXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLnBhcnNlZCxcclxuICAgICAgICAgIGNhY2hlOiB7XHJcbiAgICAgICAgICAgIHN0YXR1czogJ0hJVCcsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBrZXk6IGtleS5zdWJzdHJpbmcoMCwgMjApICsgJy4uLicsXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBDYWNoZSBwYXJzZSBlcnJvcjonLCBwYXJzZUVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIC8vIERlbGV0ZSBjb3JydXB0ZWQgY2FjaGUgZW50cnlcclxuICAgICAgICBhd2FpdCByZWRpcy5kZWwoa2V5KTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZyhg4pqqIENhY2hlIE1JU1MgKCR7ZHVyYXRpb259bXMpIC0gS2V5OiAke2tleS5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIENhY2hlIEdFVCBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHJldHVybiBudWxsOyAvLyBGYWlsIHNpbGVudGx5IC0gY2FjaGUgaXMgbm90IGNyaXRpY2FsXHJcbiAgfVxyXG59XHJcblxyXG4vLyBTZXQgY2FjaGVkIFJBRyByZXNwb25zZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0Q2FjaGVkUmVzcG9uc2UocHJvZmlsZSwgcXVlcnksIHJlc3BvbnNlKSB7XHJcbiAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVkaXMgPSBhd2FpdCBpbml0aWFsaXplUmVkaXMoKTtcclxuICAgIGlmICghcmVkaXMgfHwgIWlzQ29ubmVjdGVkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfimqogQ2FjaGUgU0tJUCBTRVQgKFJlZGlzIHVuYXZhaWxhYmxlKScpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGtleSA9IGdlbmVyYXRlQ2FjaGVLZXkocHJvZmlsZSwgcXVlcnkpO1xyXG4gICAgXHJcbiAgICAvLyBSZW1vdmUgY2FjaGUgbWV0YWRhdGEgYmVmb3JlIHN0b3JpbmdcclxuICAgIGNvbnN0IGNsZWFuUmVzcG9uc2UgPSB7IC4uLnJlc3BvbnNlIH07XHJcbiAgICBkZWxldGUgY2xlYW5SZXNwb25zZS5jYWNoZTtcclxuICAgIFxyXG4gICAgLy8gU3RvcmUgd2l0aCAxIGhvdXIgVFRMICgzNjAwIHNlY29uZHMpIC0gVXBzdGFzaCBmb3JtYXRcclxuICAgIGF3YWl0IHJlZGlzLnNldChrZXksIGNsZWFuUmVzcG9uc2UsIHsgZXg6IDM2MDAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuICAgIGNvbnNvbGUubG9nKGDwn5K+IENhY2hlIFNFVCAoJHtkdXJhdGlvbn1tcykgLSBLZXk6ICR7a2V5LnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XHJcbiAgICBcclxuICAgIHJldHVybiB0cnVlO1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBDYWNoZSBTRVQgZXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZmFsc2U7IC8vIEZhaWwgc2lsZW50bHlcclxuICB9XHJcbn1cclxuXHJcbi8vIENhY2hlIHN0YXRpc3RpY3MgZm9yIG1vbml0b3JpbmdcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlU3RhdHMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlZGlzID0gYXdhaXQgaW5pdGlhbGl6ZVJlZGlzKCk7XHJcbiAgICBpZiAoIXJlZGlzIHx8ICFpc0Nvbm5lY3RlZCkge1xyXG4gICAgICByZXR1cm4geyBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLCBrZXlzOiAwIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFVwc3Rhc2ggZG9lc24ndCBzdXBwb3J0IGluZm8gY29tbWFuZCwgc28gd2UnbGwgcmV0dXJuIGJhc2ljIHN0YXRzXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxyXG4gICAgICBrZXlzOiAndW5rbm93bicsIC8vIFVwc3Rhc2ggUkVTVCBkb2Vzbid0IGV4cG9zZSBkYlNpemVcclxuICAgICAgcHJvdmlkZXI6ICd1cHN0YXNoJyxcclxuICAgICAgY29ubmVjdGVkOiBpc0Nvbm5lY3RlZFxyXG4gICAgfTtcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4geyBzdGF0dXM6ICdlcnJvcicsIGVycm9yOiBlcnJvci5tZXNzYWdlIH07XHJcbiAgfVxyXG59XHJcblxyXG4vLyBIZWFsdGggY2hlY2tcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBpbmdDYWNoZSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVkaXMgPSBhd2FpdCBpbml0aWFsaXplUmVkaXMoKTtcclxuICAgIGlmICghcmVkaXMgfHwgIWlzQ29ubmVjdGVkKSB7XHJcbiAgICAgIHJldHVybiB7IHN0YXR1czogJ2Rvd24nLCBsYXRlbmN5OiBudWxsIH07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZGlzLnBpbmcoKTtcclxuICAgIGNvbnN0IGxhdGVuY3kgPSBEYXRlLm5vdygpIC0gc3RhcnQ7XHJcbiAgICBcclxuICAgIHJldHVybiB7IHN0YXR1czogJ3VwJywgbGF0ZW5jeSwgcmVzdWx0IH07XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiAnZXJyb3InLCBlcnJvcjogZXJyb3IubWVzc2FnZSwgbGF0ZW5jeTogbnVsbCB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiUmVkaXMiLCJjcnlwdG8iLCJjbGllbnQiLCJpc0Nvbm5lY3RlZCIsImluaXRpYWxpemVSZWRpcyIsInVybCIsInByb2Nlc3MiLCJlbnYiLCJVUFNUQVNIX1JFRElTX1JFU1RfVVJMIiwidG9rZW4iLCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4iLCJwaW5nIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwibWVzc2FnZSIsImdlbmVyYXRlQ2FjaGVLZXkiLCJwcm9maWxlIiwicXVlcnkiLCJ2ZXJzaW9uIiwibWFya3NTaWduYXR1cmUiLCJtYXJrc0RhdGEiLCJleGFjdE1hcmtzIiwic29ydGVkTWFya3MiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmlsdGVyIiwiXyIsIm1hcmsiLCJzb3J0IiwiYSIsImIiLCJsb2NhbGVDb21wYXJlIiwibWFwIiwic3ViamVjdCIsImpvaW4iLCJjcmVhdGVIYXNoIiwidXBkYXRlIiwiZGlnZXN0Iiwic3Vic3RyaW5nIiwibWFya3MiLCJrZXlzIiwibGVuZ3RoIiwic2Vzc2lvbklkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwic2Vzc2lvbkhhc2giLCJwcm9maWxlU2lnIiwiZ3JhZGUiLCJzdWJqZWN0cyIsInNsaWNlIiwiaW50ZXJlc3RzIiwiZmluYW5jaWFsQ29uc3RyYWludHMiLCJxdWVyeUhhc2giLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJnZXRDYWNoZWRSZXNwb25zZSIsInN0YXJ0VGltZSIsInJlZGlzIiwia2V5IiwiY2FjaGVkIiwiZ2V0IiwiZHVyYXRpb24iLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJjYWNoZSIsInN0YXR1cyIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwicGFyc2VFcnJvciIsImRlbCIsInNldENhY2hlZFJlc3BvbnNlIiwicmVzcG9uc2UiLCJjbGVhblJlc3BvbnNlIiwic2V0IiwiZXgiLCJnZXRDYWNoZVN0YXRzIiwicHJvdmlkZXIiLCJjb25uZWN0ZWQiLCJwaW5nQ2FjaGUiLCJsYXRlbmN5Iiwic3RhcnQiLCJyZXN1bHQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/cache/rag-cache.js\n");

/***/ }),

/***/ "(rsc)/./lib/matching/program-matcher.js":
/*!*****************************************!*\
  !*** ./lib/matching/program-matcher.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   formatRecommendationsForLLM: () => (/* binding */ formatRecommendationsForLLM),\n/* harmony export */   generateSpecificRecommendations: () => (/* binding */ generateSpecificRecommendations)\n/* harmony export */ });\n/**\r\n * Program Matcher - Specific University Program Recommendations\r\n * \r\n * Transforms generic career suggestions into specific, actionable program recommendations\r\n * with APS requirements, admission probabilities, and application deadlines.\r\n * \r\n * @author Kiro AI Assistant (Lead Dev)\r\n * @version 1.0.0\r\n * @created December 18, 2025\r\n */ /**\r\n * University program database with APS requirements and deadlines\r\n * Based on 2025/2026 South African university data\r\n */ const UNIVERSITY_PROGRAMS = {\n    // University of Cape Town (UCT)\n    uct: {\n        name: \"University of Cape Town\",\n        programs: {\n            mechanical_engineering: {\n                name: \"Mechanical Engineering\",\n                apsRequired: 35,\n                subjectRequirements: [\n                    \"Mathematics: 70%\",\n                    \"Physical Sciences: 70%\"\n                ],\n                applicationDeadline: \"July 31, 2026\",\n                duration: \"4 years\",\n                category: \"engineering\"\n            },\n            medicine: {\n                name: \"Medicine (MBChB)\",\n                apsRequired: 42,\n                subjectRequirements: [\n                    \"Mathematics: 80%\",\n                    \"Physical Sciences: 80%\",\n                    \"Life Sciences: 80%\"\n                ],\n                applicationDeadline: \"July 31, 2026\",\n                duration: \"6 years\",\n                category: \"healthcare\"\n            },\n            computer_science: {\n                name: \"Computer Science\",\n                apsRequired: 38,\n                subjectRequirements: [\n                    \"Mathematics: 75%\",\n                    \"Physical Sciences: 70%\"\n                ],\n                applicationDeadline: \"July 31, 2026\",\n                duration: \"3 years\",\n                category: \"technology\"\n            }\n        }\n    },\n    // University of the Witwatersrand (Wits)\n    wits: {\n        name: \"University of the Witwatersrand\",\n        programs: {\n            civil_engineering: {\n                name: \"Civil Engineering\",\n                apsRequired: 36,\n                subjectRequirements: [\n                    \"Mathematics: 70%\",\n                    \"Physical Sciences: 70%\"\n                ],\n                applicationDeadline: \"September 30, 2026\",\n                duration: \"4 years\",\n                category: \"engineering\"\n            },\n            business_science: {\n                name: \"Business Science\",\n                apsRequired: 35,\n                subjectRequirements: [\n                    \"Mathematics: 70%\",\n                    \"English: 70%\"\n                ],\n                applicationDeadline: \"September 30, 2026\",\n                duration: \"3 years\",\n                category: \"business\"\n            },\n            law: {\n                name: \"Bachelor of Laws (LLB)\",\n                apsRequired: 38,\n                subjectRequirements: [\n                    \"English: 75%\",\n                    \"Mathematics/Math Lit: 65%\"\n                ],\n                applicationDeadline: \"September 30, 2026\",\n                duration: \"4 years\",\n                category: \"law\"\n            }\n        }\n    },\n    // University of Johannesburg (UJ)\n    uj: {\n        name: \"University of Johannesburg\",\n        programs: {\n            mechanical_engineering: {\n                name: \"Mechanical Engineering\",\n                apsRequired: 30,\n                subjectRequirements: [\n                    \"Mathematics: 65%\",\n                    \"Physical Sciences: 65%\"\n                ],\n                applicationDeadline: \"September 30, 2026\",\n                duration: \"4 years\",\n                category: \"engineering\"\n            },\n            accounting: {\n                name: \"Accounting\",\n                apsRequired: 28,\n                subjectRequirements: [\n                    \"Mathematics: 60%\",\n                    \"English: 60%\"\n                ],\n                applicationDeadline: \"September 30, 2026\",\n                duration: \"3 years\",\n                category: \"business\"\n            },\n            information_technology: {\n                name: \"Information Technology\",\n                apsRequired: 26,\n                subjectRequirements: [\n                    \"Mathematics: 60%\",\n                    \"Physical Sciences: 60%\"\n                ],\n                applicationDeadline: \"September 30, 2026\",\n                duration: \"3 years\",\n                category: \"technology\"\n            }\n        }\n    },\n    // Tshwane University of Technology (TUT)\n    tut: {\n        name: \"Tshwane University of Technology\",\n        programs: {\n            engineering_technology: {\n                name: \"Engineering Technology\",\n                apsRequired: 25,\n                subjectRequirements: [\n                    \"Mathematics: 55%\",\n                    \"Physical Sciences: 55%\"\n                ],\n                applicationDeadline: \"October 31, 2026\",\n                duration: \"3 years\",\n                category: \"engineering\"\n            },\n            business_management: {\n                name: \"Business Management\",\n                apsRequired: 22,\n                subjectRequirements: [\n                    \"Mathematics/Math Lit: 50%\",\n                    \"English: 55%\"\n                ],\n                applicationDeadline: \"October 31, 2026\",\n                duration: \"3 years\",\n                category: \"business\"\n            }\n        }\n    },\n    // University of South Africa (UNISA) - Distance Learning\n    unisa: {\n        name: \"University of South Africa (UNISA)\",\n        programs: {\n            business_administration: {\n                name: \"Business Administration\",\n                apsRequired: 20,\n                subjectRequirements: [\n                    \"Mathematics/Math Lit: 50%\",\n                    \"English: 50%\"\n                ],\n                applicationDeadline: \"November 30, 2026\",\n                duration: \"3 years\",\n                category: \"business\"\n            },\n            information_systems: {\n                name: \"Information Systems\",\n                apsRequired: 22,\n                subjectRequirements: [\n                    \"Mathematics: 55%\",\n                    \"English: 55%\"\n                ],\n                applicationDeadline: \"November 30, 2026\",\n                duration: \"3 years\",\n                category: \"technology\"\n            }\n        }\n    }\n};\n/**\r\n * Bursary database with eligibility criteria and deadlines\r\n */ const BURSARY_DATABASE = {\n    nsfas: {\n        name: \"NSFAS (National Student Financial Aid Scheme)\",\n        amount: \"R80,000/year\",\n        eligibility: {\n            familyIncome: \"< R350,000/year\",\n            citizenship: \"South African citizen\",\n            academicRequirement: \"APS 20+\"\n        },\n        deadline: \"December 31, 2025\",\n        urgency: \"CRITICAL\",\n        applicationUrl: \"https://www.nsfas.org.za\"\n    },\n    sasol_engineering: {\n        name: \"Sasol Engineering Bursary\",\n        amount: \"R120,000/year\",\n        eligibility: {\n            subjects: \"Mathematics 70%+, Physical Sciences 70%+\",\n            careerField: \"Engineering\",\n            academicRequirement: \"APS 30+\"\n        },\n        deadline: \"May 15, 2026\",\n        urgency: \"HIGH\",\n        applicationUrl: \"https://www.sasol.com/careers/bursaries\"\n    },\n    funza_lushaka: {\n        name: \"Funza Lushaka Teaching Bursary\",\n        amount: \"R60,000/year\",\n        eligibility: {\n            careerField: \"Teaching/Education\",\n            academicRequirement: \"APS 25+\"\n        },\n        deadline: \"February 28, 2026\",\n        urgency: \"MEDIUM\",\n        applicationUrl: \"https://www.education.gov.za/Programmes/FunzaLushaka.aspx\"\n    },\n    firstrand_foundation: {\n        name: \"FirstRand Foundation Bursary\",\n        amount: \"R60,000/year\",\n        eligibility: {\n            familyBackground: \"First-generation university student\",\n            academicRequirement: \"APS 25+\"\n        },\n        deadline: \"March 30, 2026\",\n        urgency: \"MEDIUM\",\n        applicationUrl: \"https://www.firstrand.co.za/csi/education/\"\n    }\n};\n/**\r\n * Calculate APS score from marks\r\n * @param {Object} marks - Subject marks object\r\n * @returns {number} APS score\r\n */ function calculateAPS(marks) {\n    if (!marks || typeof marks !== 'object') return 0;\n    let totalPoints = 0;\n    let subjectCount = 0;\n    Object.values(marks).forEach((mark)=>{\n        const percentage = parseFloat(mark);\n        if (!isNaN(percentage) && percentage >= 0 && percentage <= 100) {\n            // Convert percentage to APS points\n            if (percentage >= 80) totalPoints += 7;\n            else if (percentage >= 70) totalPoints += 6;\n            else if (percentage >= 60) totalPoints += 5;\n            else if (percentage >= 50) totalPoints += 4;\n            else if (percentage >= 40) totalPoints += 3;\n            else if (percentage >= 30) totalPoints += 2;\n            else totalPoints += 1;\n            subjectCount++;\n        }\n    });\n    return subjectCount >= 6 ? totalPoints : Math.round(totalPoints * (7 / Math.max(subjectCount, 1)));\n}\n/**\r\n * Project final APS based on current performance and grade\r\n * @param {number} currentAPS - Current APS score\r\n * @param {number} grade - Student grade (10, 11, 12)\r\n * @returns {Object} Projected APS range\r\n */ function projectFinalAPS(currentAPS, grade) {\n    let improvementFactor = 1.0;\n    // Grade-based improvement potential\n    if (grade === 10) improvementFactor = 1.15; // 15% improvement potential\n    else if (grade === 11) improvementFactor = 1.08; // 8% improvement potential\n    else improvementFactor = 1.02; // 2% improvement potential (Grade 12)\n    const projectedMin = Math.max(currentAPS, Math.round(currentAPS * 0.95));\n    const projectedMax = Math.min(42, Math.round(currentAPS * improvementFactor));\n    return {\n        min: projectedMin,\n        max: projectedMax,\n        current: currentAPS\n    };\n}\n/**\r\n * Calculate admission probability based on APS scores\r\n * @param {Object} projectedAPS - Projected APS range\r\n * @param {number} requiredAPS - Program's required APS\r\n * @returns {number} Admission probability (0-100)\r\n */ function calculateAdmissionProbability(projectedAPS, requiredAPS) {\n    const { min, max } = projectedAPS;\n    if (min >= requiredAPS + 5) return 95; // Well above requirement\n    if (min >= requiredAPS) return 85; // Meets requirement\n    if (max >= requiredAPS + 2) return 70; // Likely with improvement\n    if (max >= requiredAPS) return 50; // Possible with improvement\n    if (max >= requiredAPS - 3) return 25; // Challenging but possible\n    return 10; // Very challenging\n}\n/**\r\n * Match student to eligible bursaries\r\n * @param {Object} studentProfile - Student profile data\r\n * @param {Object} projectedAPS - Projected APS data\r\n * @returns {Array} Eligible bursaries\r\n */ function matchEligibleBursaries(studentProfile, projectedAPS) {\n    const eligibleBursaries = [];\n    Object.entries(BURSARY_DATABASE).forEach(([key, bursary])=>{\n        let eligibilityScore = 0;\n        let eligibilityReasons = [];\n        // Check APS requirement\n        const minAPS = parseInt(bursary.eligibility.academicRequirement?.match(/\\\\d+/)?.[0] || '0');\n        if (projectedAPS.max >= minAPS) {\n            eligibilityScore += 30;\n            eligibilityReasons.push(`APS requirement met (${minAPS}+ required)`);\n        }\n        // Check family income (NSFAS)\n        if (key === 'nsfas' && studentProfile.constraints?.familyBackground === 'no') {\n            eligibilityScore += 40;\n            eligibilityReasons.push('First-generation student (likely qualifies for NSFAS)');\n        }\n        // Check career field alignment\n        if (bursary.eligibility.careerField) {\n            const careerField = bursary.eligibility.careerField.toLowerCase();\n            const studentInterests = (studentProfile.careerInterests || '').toLowerCase();\n            if (studentInterests.includes(careerField.split('/')[0])) {\n                eligibilityScore += 30;\n                eligibilityReasons.push(`Career interest alignment (${careerField})`);\n            }\n        }\n        // Check subject requirements (Sasol Engineering)\n        if (key === 'sasol_engineering' && studentProfile.marks) {\n            const mathMark = studentProfile.marks.mathematics || studentProfile.marks.math || 0;\n            const scienceMark = studentProfile.marks.physical_sciences || studentProfile.marks.physics || 0;\n            if (parseFloat(mathMark) >= 70 && parseFloat(scienceMark) >= 70) {\n                eligibilityScore += 40;\n                eligibilityReasons.push('Subject requirements met (Math & Science 70%+)');\n            }\n        }\n        // Add if eligible (score >= 30)\n        if (eligibilityScore >= 30) {\n            eligibleBursaries.push({\n                ...bursary,\n                eligibilityScore,\n                eligibilityReasons,\n                matchPercentage: Math.min(100, eligibilityScore)\n            });\n        }\n    });\n    // Sort by eligibility score\n    return eligibleBursaries.sort((a, b)=>b.eligibilityScore - a.eligibilityScore);\n}\n/**\r\n * Match student to university programs\r\n * @param {Object} studentProfile - Student profile data\r\n * @param {Object} projectedAPS - Projected APS data\r\n * @returns {Array} Matched programs with admission data\r\n */ function matchUniversityPrograms(studentProfile, projectedAPS) {\n    const matchedPrograms = [];\n    const careerInterests = (studentProfile.careerInterests || '').toLowerCase();\n    // Determine relevant program categories\n    const relevantCategories = [];\n    if (careerInterests.includes('engineering') || careerInterests.includes('egd')) {\n        relevantCategories.push('engineering');\n    }\n    if (careerInterests.includes('business') || careerInterests.includes('accounting')) {\n        relevantCategories.push('business');\n    }\n    if (careerInterests.includes('medicine') || careerInterests.includes('doctor')) {\n        relevantCategories.push('healthcare');\n    }\n    if (careerInterests.includes('computer') || careerInterests.includes('technology') || careerInterests.includes('it')) {\n        relevantCategories.push('technology');\n    }\n    if (careerInterests.includes('law') || careerInterests.includes('lawyer')) {\n        relevantCategories.push('law');\n    }\n    // If no specific interests, include all categories\n    if (relevantCategories.length === 0) {\n        relevantCategories.push('engineering', 'business', 'technology');\n    }\n    // Match programs from all universities\n    Object.entries(UNIVERSITY_PROGRAMS).forEach(([uniKey, university])=>{\n        Object.entries(university.programs).forEach(([progKey, program])=>{\n            // Check if program matches career interests\n            if (relevantCategories.includes(program.category)) {\n                const admissionProbability = calculateAdmissionProbability(projectedAPS, program.apsRequired);\n                // Include programs with reasonable admission chance or as backup options\n                if (admissionProbability >= 10) {\n                    matchedPrograms.push({\n                        university: university.name,\n                        program: program.name,\n                        apsRequired: program.apsRequired,\n                        projectedAPS: projectedAPS,\n                        admissionProbability,\n                        subjectRequirements: program.subjectRequirements,\n                        applicationDeadline: program.applicationDeadline,\n                        duration: program.duration,\n                        category: program.category,\n                        feasibility: admissionProbability >= 70 ? 'High' : admissionProbability >= 40 ? 'Medium' : 'Challenging'\n                    });\n                }\n            }\n        });\n    });\n    // Sort by admission probability (highest first)\n    return matchedPrograms.sort((a, b)=>b.admissionProbability - a.admissionProbability);\n}\n/**\r\n * Generate grade-appropriate timeline and urgency\r\n * @param {number} grade - Student grade\r\n * @returns {Object} Timeline context\r\n */ function getGradeTimeline(grade) {\n    const currentDate = new Date();\n    const currentYear = currentDate.getFullYear();\n    const currentMonth = currentDate.getMonth() + 1;\n    if (grade === 12) {\n        if (currentMonth >= 11) {\n            return {\n                phase: 'post-finals',\n                urgency: 'CRITICAL',\n                timeline: 'Finals complete - Focus on applications',\n                actionItems: [\n                    'Submit university applications NOW',\n                    'Apply for NSFAS immediately',\n                    'Prepare backup options'\n                ]\n            };\n        } else {\n            return {\n                phase: 'finals-preparation',\n                urgency: 'CRITICAL',\n                timeline: 'Finals approaching - Optimize performance',\n                actionItems: [\n                    'Focus on final exam preparation',\n                    'Submit applications early',\n                    'Secure bursary applications'\n                ]\n            };\n        }\n    } else if (grade === 11) {\n        return {\n            phase: 'decision-year',\n            urgency: 'HIGH',\n            timeline: '1 year to finals - Critical decisions needed',\n            actionItems: [\n                'Optimize subject performance',\n                'Research university programs',\n                'Start bursary applications'\n            ]\n        };\n    } else {\n        return {\n            phase: 'exploration',\n            urgency: 'MEDIUM',\n            timeline: '2+ years to finals - Build strong foundation',\n            actionItems: [\n                'Focus on academic improvement',\n                'Explore career options',\n                'Build extracurricular profile'\n            ]\n        };\n    }\n}\n/**\r\n * Main function: Generate specific program recommendations\r\n * @param {Object} studentProfile - Complete student profile\r\n * @returns {Object} Specific program recommendations with APS data\r\n */ function generateSpecificRecommendations(studentProfile) {\n    try {\n        // Calculate current and projected APS\n        const currentAPS = calculateAPS(studentProfile.marks || {});\n        const projectedAPS = projectFinalAPS(currentAPS, studentProfile.grade || 12);\n        // Get grade-specific timeline\n        const timeline = getGradeTimeline(studentProfile.grade || 12);\n        // Match university programs\n        const matchedPrograms = matchUniversityPrograms(studentProfile, projectedAPS);\n        // Match eligible bursaries\n        const eligibleBursaries = matchEligibleBursaries(studentProfile, projectedAPS);\n        return {\n            success: true,\n            apsData: {\n                current: currentAPS,\n                projected: projectedAPS,\n                universityEligible: projectedAPS.max >= 20\n            },\n            timeline,\n            programs: matchedPrograms.slice(0, 5),\n            bursaries: eligibleBursaries.slice(0, 3),\n            metadata: {\n                totalProgramsFound: matchedPrograms.length,\n                totalBursariesFound: eligibleBursaries.length,\n                generatedAt: new Date().toISOString()\n            }\n        };\n    } catch (error) {\n        console.error('Error generating specific recommendations:', error);\n        return {\n            success: false,\n            error: error.message,\n            fallback: true\n        };\n    }\n}\n/**\r\n * Format recommendations for LLM context\r\n * @param {Object} recommendations - Generated recommendations\r\n * @returns {string} Formatted context for LLM\r\n */ function formatRecommendationsForLLM(recommendations) {\n    if (!recommendations.success) {\n        return 'Unable to generate specific program recommendations. Provide general guidance.';\n    }\n    const { apsData, timeline, programs, bursaries } = recommendations;\n    let context = `\nSTUDENT APS DATA:\n- Current APS: ${apsData.current}\n- Projected APS: ${apsData.projected.min}-${apsData.projected.max}\n- University Eligible: ${apsData.universityEligible ? 'Yes' : 'No'}\n\nTIMELINE CONTEXT:\n- Phase: ${timeline.phase}\n- Urgency: ${timeline.urgency}\n- Timeline: ${timeline.timeline}\n\nSPECIFIC PROGRAM MATCHES:`;\n    programs.forEach((program, index)=>{\n        context += `\n${index + 1}. ${program.program} at ${program.university}\n   - APS Required: ${program.apsRequired} (Student projected: ${apsData.projected.min}-${apsData.projected.max})\n   - Admission Chance: ${program.admissionProbability}%\n   - Application Deadline: ${program.applicationDeadline}\n   - Feasibility: ${program.feasibility}`;\n    });\n    context += `\n\nELIGIBLE BURSARIES:`;\n    bursaries.forEach((bursary, index)=>{\n        context += `\n${index + 1}. ${bursary.name}: ${bursary.amount}\n   - Eligibility: ${bursary.matchPercentage}% match\n   - Deadline: ${bursary.deadline} (${bursary.urgency})\n   - Reasons: ${bursary.eligibilityReasons.join(', ')}`;\n    });\n    context += `\n\nPRIORITY ACTIONS:\n${timeline.actionItems.map((item)=>`- ${item}`).join('\\n')}`;\n    return context;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    generateSpecificRecommendations,\n    formatRecommendationsForLLM,\n    calculateAPS,\n    projectFinalAPS\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWF0Y2hpbmcvcHJvZ3JhbS1tYXRjaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7Ozs7Q0FTQyxHQUVEOzs7Q0FHQyxHQUNELE1BQU1BLHNCQUFzQjtJQUMxQixnQ0FBZ0M7SUFDaENDLEtBQUs7UUFDSEMsTUFBTTtRQUNOQyxVQUFVO1lBQ1JDLHdCQUF3QjtnQkFDdEJGLE1BQU07Z0JBQ05HLGFBQWE7Z0JBQ2JDLHFCQUFxQjtvQkFBQztvQkFBb0I7aUJBQXlCO2dCQUNuRUMscUJBQXFCO2dCQUNyQkMsVUFBVTtnQkFDVkMsVUFBVTtZQUNaO1lBQ0FDLFVBQVU7Z0JBQ1JSLE1BQU07Z0JBQ05HLGFBQWE7Z0JBQ2JDLHFCQUFxQjtvQkFBQztvQkFBb0I7b0JBQTBCO2lCQUFxQjtnQkFDekZDLHFCQUFxQjtnQkFDckJDLFVBQVU7Z0JBQ1ZDLFVBQVU7WUFDWjtZQUNBRSxrQkFBa0I7Z0JBQ2hCVCxNQUFNO2dCQUNORyxhQUFhO2dCQUNiQyxxQkFBcUI7b0JBQUM7b0JBQW9CO2lCQUF5QjtnQkFDbkVDLHFCQUFxQjtnQkFDckJDLFVBQVU7Z0JBQ1ZDLFVBQVU7WUFDWjtRQUNGO0lBQ0Y7SUFFQSx5Q0FBeUM7SUFDekNHLE1BQU07UUFDSlYsTUFBTTtRQUNOQyxVQUFVO1lBQ1JVLG1CQUFtQjtnQkFDakJYLE1BQU07Z0JBQ05HLGFBQWE7Z0JBQ2JDLHFCQUFxQjtvQkFBQztvQkFBb0I7aUJBQXlCO2dCQUNuRUMscUJBQXFCO2dCQUNyQkMsVUFBVTtnQkFDVkMsVUFBVTtZQUNaO1lBQ0FLLGtCQUFrQjtnQkFDaEJaLE1BQU07Z0JBQ05HLGFBQWE7Z0JBQ2JDLHFCQUFxQjtvQkFBQztvQkFBb0I7aUJBQWU7Z0JBQ3pEQyxxQkFBcUI7Z0JBQ3JCQyxVQUFVO2dCQUNWQyxVQUFVO1lBQ1o7WUFDQU0sS0FBSztnQkFDSGIsTUFBTTtnQkFDTkcsYUFBYTtnQkFDYkMscUJBQXFCO29CQUFDO29CQUFnQjtpQkFBNEI7Z0JBQ2xFQyxxQkFB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T0FBTztJQUNyRDtJQUVBRixXQUFXLENBQUM7OztBQUdkLEVBQUVwQixTQUFTQyxXQUFXLENBQUNzQixHQUFHLENBQUNDLENBQUFBLE9BQVEsQ0FBQyxFQUFFLEVBQUVBLE1BQU0sRUFBRUYsSUFBSSxDQUFDLE9BQU87SUFFMUQsT0FBT0Y7QUFDVDtBQUVBLGlFQUFlO0lBQ2JsQjtJQUNBZ0I7SUFDQXpGO0lBQ0FjO0FBQ0YsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXFNFRUxBTkdPVlxcRGVza3RvcFxcVGhhbmRpLmFpXFxsaWJcXG1hdGNoaW5nXFxwcm9ncmFtLW1hdGNoZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFByb2dyYW0gTWF0Y2hlciAtIFNwZWNpZmljIFVuaXZlcnNpdHkgUHJvZ3JhbSBSZWNvbW1lbmRhdGlvbnNcclxuICogXHJcbiAqIFRyYW5zZm9ybXMgZ2VuZXJpYyBjYXJlZXIgc3VnZ2VzdGlvbnMgaW50byBzcGVjaWZpYywgYWN0aW9uYWJsZSBwcm9ncmFtIHJlY29tbWVuZGF0aW9uc1xyXG4gKiB3aXRoIEFQUyByZXF1aXJlbWVudHMsIGFkbWlzc2lvbiBwcm9iYWJpbGl0aWVzLCBhbmQgYXBwbGljYXRpb24gZGVhZGxpbmVzLlxyXG4gKiBcclxuICogQGF1dGhvciBLaXJvIEFJIEFzc2lzdGFudCAoTGVhZCBEZXYpXHJcbiAqIEB2ZXJzaW9uIDEuMC4wXHJcbiAqIEBjcmVhdGVkIERlY2VtYmVyIDE4LCAyMDI1XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFVuaXZlcnNpdHkgcHJvZ3JhbSBkYXRhYmFzZSB3aXRoIEFQUyByZXF1aXJlbWVudHMgYW5kIGRlYWRsaW5lc1xyXG4gKiBCYXNlZCBvbiAyMDI1LzIwMjYgU291dGggQWZyaWNhbiB1bml2ZXJzaXR5IGRhdGFcclxuICovXHJcbmNvbnN0IFVOSVZFUlNJVFlfUFJPR1JBTVMgPSB7XHJcbiAgLy8gVW5pdmVyc2l0eSBvZiBDYXBlIFRvd24gKFVDVClcclxuICB1Y3Q6IHtcclxuICAgIG5hbWU6IFwiVW5pdmVyc2l0eSBvZiBDYXBlIFRvd25cIixcclxuICAgIHByb2dyYW1zOiB7XHJcbiAgICAgIG1lY2hhbmljYWxfZW5naW5lZXJpbmc6IHtcclxuICAgICAgICBuYW1lOiBcIk1lY2hhbmljYWwgRW5naW5lZXJpbmdcIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogMzUsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3M6IDcwJVwiLCBcIlBoeXNpY2FsIFNjaWVuY2VzOiA3MCVcIl0sXHJcbiAgICAgICAgYXBwbGljYXRpb25EZWFkbGluZTogXCJKdWx5IDMxLCAyMDI2XCIsXHJcbiAgICAgICAgZHVyYXRpb246IFwiNCB5ZWFyc1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImVuZ2luZWVyaW5nXCJcclxuICAgICAgfSxcclxuICAgICAgbWVkaWNpbmU6IHtcclxuICAgICAgICBuYW1lOiBcIk1lZGljaW5lIChNQkNoQilcIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogNDIsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3M6IDgwJVwiLCBcIlBoeXNpY2FsIFNjaWVuY2VzOiA4MCVcIiwgXCJMaWZlIFNjaWVuY2VzOiA4MCVcIl0sXHJcbiAgICAgICAgYXBwbGljYXRpb25EZWFkbGluZTogXCJKdWx5IDMxLCAyMDI2XCIsXHJcbiAgICAgICAgZHVyYXRpb246IFwiNiB5ZWFyc1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImhlYWx0aGNhcmVcIlxyXG4gICAgICB9LFxyXG4gICAgICBjb21wdXRlcl9zY2llbmNlOiB7XHJcbiAgICAgICAgbmFtZTogXCJDb21wdXRlciBTY2llbmNlXCIsXHJcbiAgICAgICAgYXBzUmVxdWlyZWQ6IDM4LFxyXG4gICAgICAgIHN1YmplY3RSZXF1aXJlbWVudHM6IFtcIk1hdGhlbWF0aWNzOiA3NSVcIiwgXCJQaHlzaWNhbCBTY2llbmNlczogNzAlXCJdLFxyXG4gICAgICAgIGFwcGxpY2F0aW9uRGVhZGxpbmU6IFwiSnVseSAzMSwgMjAyNlwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiBcIjMgeWVhcnNcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJ0ZWNobm9sb2d5XCJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgXHJcbiAgLy8gVW5pdmVyc2l0eSBvZiB0aGUgV2l0d2F0ZXJzcmFuZCAoV2l0cylcclxuICB3aXRzOiB7XHJcbiAgICBuYW1lOiBcIlVuaXZlcnNpdHkgb2YgdGhlIFdpdHdhdGVyc3JhbmRcIixcclxuICAgIHByb2dyYW1zOiB7XHJcbiAgICAgIGNpdmlsX2VuZ2luZWVyaW5nOiB7XHJcbiAgICAgICAgbmFtZTogXCJDaXZpbCBFbmdpbmVlcmluZ1wiLFxyXG4gICAgICAgIGFwc1JlcXVpcmVkOiAzNixcclxuICAgICAgICBzdWJqZWN0UmVxdWlyZW1lbnRzOiBbXCJNYXRoZW1hdGljczogNzAlXCIsIFwiUGh5c2ljYWwgU2NpZW5jZXM6IDcwJVwiXSxcclxuICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBcIlNlcHRlbWJlciAzMCwgMjAyNlwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiBcIjQgeWVhcnNcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJlbmdpbmVlcmluZ1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJ1c2luZXNzX3NjaWVuY2U6IHtcclxuICAgICAgICBuYW1lOiBcIkJ1c2luZXNzIFNjaWVuY2VcIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogMzUsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3M6IDcwJVwiLCBcIkVuZ2xpc2g6IDcwJVwiXSxcclxuICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBcIlNlcHRlbWJlciAzMCwgMjAyNlwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiBcIjMgeWVhcnNcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJidXNpbmVzc1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIGxhdzoge1xyXG4gICAgICAgIG5hbWU6IFwiQmFjaGVsb3Igb2YgTGF3cyAoTExCKVwiLFxyXG4gICAgICAgIGFwc1JlcXVpcmVkOiAzOCxcclxuICAgICAgICBzdWJqZWN0UmVxdWlyZW1lbnRzOiBbXCJFbmdsaXNoOiA3NSVcIiwgXCJNYXRoZW1hdGljcy9NYXRoIExpdDogNjUlXCJdLFxyXG4gICAgICAgIGFwcGxpY2F0aW9uRGVhZGxpbmU6IFwiU2VwdGVtYmVyIDMwLCAyMDI2XCIsXHJcbiAgICAgICAgZHVyYXRpb246IFwiNCB5ZWFyc1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImxhd1wiXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIC8vIFVuaXZlcnNpdHkgb2YgSm9oYW5uZXNidXJnIChVSilcclxuICB1ajoge1xyXG4gICAgbmFtZTogXCJVbml2ZXJzaXR5IG9mIEpvaGFubmVzYnVyZ1wiLFxyXG4gICAgcHJvZ3JhbXM6IHtcclxuICAgICAgbWVjaGFuaWNhbF9lbmdpbmVlcmluZzoge1xyXG4gICAgICAgIG5hbWU6IFwiTWVjaGFuaWNhbCBFbmdpbmVlcmluZ1wiLFxyXG4gICAgICAgIGFwc1JlcXVpcmVkOiAzMCxcclxuICAgICAgICBzdWJqZWN0UmVxdWlyZW1lbnRzOiBbXCJNYXRoZW1hdGljczogNjUlXCIsIFwiUGh5c2ljYWwgU2NpZW5jZXM6IDY1JVwiXSxcclxuICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBcIlNlcHRlbWJlciAzMCwgMjAyNlwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiBcIjQgeWVhcnNcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJlbmdpbmVlcmluZ1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIGFjY291bnRpbmc6IHtcclxuICAgICAgICBuYW1lOiBcIkFjY291bnRpbmdcIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogMjgsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3M6IDYwJVwiLCBcIkVuZ2xpc2g6IDYwJVwiXSxcclxuICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBcIlNlcHRlbWJlciAzMCwgMjAyNlwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiBcIjMgeWVhcnNcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJidXNpbmVzc1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIGluZm9ybWF0aW9uX3RlY2hub2xvZ3k6IHtcclxuICAgICAgICBuYW1lOiBcIkluZm9ybWF0aW9uIFRlY2hub2xvZ3lcIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogMjYsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3M6IDYwJVwiLCBcIlBoeXNpY2FsIFNjaWVuY2VzOiA2MCVcIl0sXHJcbiAgICAgICAgYXBwbGljYXRpb25EZWFkbGluZTogXCJTZXB0ZW1iZXIgMzAsIDIwMjZcIixcclxuICAgICAgICBkdXJhdGlvbjogXCIzIHllYXJzXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidGVjaG5vbG9neVwiXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIFxyXG4gIC8vIFRzaHdhbmUgVW5pdmVyc2l0eSBvZiBUZWNobm9sb2d5IChUVVQpXHJcbiAgdHV0OiB7XHJcbiAgICBuYW1lOiBcIlRzaHdhbmUgVW5pdmVyc2l0eSBvZiBUZWNobm9sb2d5XCIsXHJcbiAgICBwcm9ncmFtczoge1xyXG4gICAgICBlbmdpbmVlcmluZ190ZWNobm9sb2d5OiB7XHJcbiAgICAgICAgbmFtZTogXCJFbmdpbmVlcmluZyBUZWNobm9sb2d5XCIsXHJcbiAgICAgICAgYXBzUmVxdWlyZWQ6IDI1LFxyXG4gICAgICAgIHN1YmplY3RSZXF1aXJlbWVudHM6IFtcIk1hdGhlbWF0aWNzOiA1NSVcIiwgXCJQaHlzaWNhbCBTY2llbmNlczogNTUlXCJdLFxyXG4gICAgICAgIGFwcGxpY2F0aW9uRGVhZGxpbmU6IFwiT2N0b2JlciAzMSwgMjAyNlwiLFxyXG4gICAgICAgIGR1cmF0aW9uOiBcIjMgeWVhcnNcIixcclxuICAgICAgICBjYXRlZ29yeTogXCJlbmdpbmVlcmluZ1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJ1c2luZXNzX21hbmFnZW1lbnQ6IHtcclxuICAgICAgICBuYW1lOiBcIkJ1c2luZXNzIE1hbmFnZW1lbnRcIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogMjIsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3MvTWF0aCBMaXQ6IDUwJVwiLCBcIkVuZ2xpc2g6IDU1JVwiXSxcclxuICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBcIk9jdG9iZXIgMzEsIDIwMjZcIixcclxuICAgICAgICBkdXJhdGlvbjogXCIzIHllYXJzXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiYnVzaW5lc3NcIlxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBcclxuICAvLyBVbml2ZXJzaXR5IG9mIFNvdXRoIEFmcmljYSAoVU5JU0EpIC0gRGlzdGFuY2UgTGVhcm5pbmdcclxuICB1bmlzYToge1xyXG4gICAgbmFtZTogXCJVbml2ZXJzaXR5IG9mIFNvdXRoIEFmcmljYSAoVU5JU0EpXCIsXHJcbiAgICBwcm9ncmFtczoge1xyXG4gICAgICBidXNpbmVzc19hZG1pbmlzdHJhdGlvbjoge1xyXG4gICAgICAgIG5hbWU6IFwiQnVzaW5lc3MgQWRtaW5pc3RyYXRpb25cIixcclxuICAgICAgICBhcHNSZXF1aXJlZDogMjAsXHJcbiAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogW1wiTWF0aGVtYXRpY3MvTWF0aCBMaXQ6IDUwJVwiLCBcIkVuZ2xpc2g6IDUwJVwiXSxcclxuICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBcIk5vdmVtYmVyIDMwLCAyMDI2XCIsXHJcbiAgICAgICAgZHVyYXRpb246IFwiMyB5ZWFyc1wiLFxyXG4gICAgICAgIGNhdGVnb3J5OiBcImJ1c2luZXNzXCJcclxuICAgICAgfSxcclxuICAgICAgaW5mb3JtYXRpb25fc3lzdGVtczoge1xyXG4gICAgICAgIG5hbWU6IFwiSW5mb3JtYXRpb24gU3lzdGVtc1wiLFxyXG4gICAgICAgIGFwc1JlcXVpcmVkOiAyMixcclxuICAgICAgICBzdWJqZWN0UmVxdWlyZW1lbnRzOiBbXCJNYXRoZW1hdGljczogNTUlXCIsIFwiRW5nbGlzaDogNTUlXCJdLFxyXG4gICAgICAgIGFwcGxpY2F0aW9uRGVhZGxpbmU6IFwiTm92ZW1iZXIgMzAsIDIwMjZcIixcclxuICAgICAgICBkdXJhdGlvbjogXCIzIHllYXJzXCIsXHJcbiAgICAgICAgY2F0ZWdvcnk6IFwidGVjaG5vbG9neVwiXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQnVyc2FyeSBkYXRhYmFzZSB3aXRoIGVsaWdpYmlsaXR5IGNyaXRlcmlhIGFuZCBkZWFkbGluZXNcclxuICovXHJcbmNvbnN0IEJVUlNBUllfREFUQUJBU0UgPSB7XHJcbiAgbnNmYXM6IHtcclxuICAgIG5hbWU6IFwiTlNGQVMgKE5hdGlvbmFsIFN0dWRlbnQgRmluYW5jaWFsIEFpZCBTY2hlbWUpXCIsXHJcbiAgICBhbW91bnQ6IFwiUjgwLDAwMC95ZWFyXCIsXHJcbiAgICBlbGlnaWJpbGl0eToge1xyXG4gICAgICBmYW1pbHlJbmNvbWU6IFwiPCBSMzUwLDAwMC95ZWFyXCIsXHJcbiAgICAgIGNpdGl6ZW5zaGlwOiBcIlNvdXRoIEFmcmljYW4gY2l0aXplblwiLFxyXG4gICAgICBhY2FkZW1pY1JlcXVpcmVtZW50OiBcIkFQUyAyMCtcIlxyXG4gICAgfSxcclxuICAgIGRlYWRsaW5lOiBcIkRlY2VtYmVyIDMxLCAyMDI1XCIsXHJcbiAgICB1cmdlbmN5OiBcIkNSSVRJQ0FMXCIsXHJcbiAgICBhcHBsaWNhdGlvblVybDogXCJodHRwczovL3d3dy5uc2Zhcy5vcmcuemFcIlxyXG4gIH0sXHJcbiAgXHJcbiAgc2Fzb2xfZW5naW5lZXJpbmc6IHtcclxuICAgIG5hbWU6IFwiU2Fzb2wgRW5naW5lZXJpbmcgQnVyc2FyeVwiLFxyXG4gICAgYW1vdW50OiBcIlIxMjAsMDAwL3llYXJcIixcclxuICAgIGVsaWdpYmlsaXR5OiB7XHJcbiAgICAgIHN1YmplY3RzOiBcIk1hdGhlbWF0aWNzIDcwJSssIFBoeXNpY2FsIFNjaWVuY2VzIDcwJStcIixcclxuICAgICAgY2FyZWVyRmllbGQ6IFwiRW5naW5lZXJpbmdcIixcclxuICAgICAgYWNhZGVtaWNSZXF1aXJlbWVudDogXCJBUFMgMzArXCJcclxuICAgIH0sXHJcbiAgICBkZWFkbGluZTogXCJNYXkgMTUsIDIwMjZcIixcclxuICAgIHVyZ2VuY3k6IFwiSElHSFwiLFxyXG4gICAgYXBwbGljYXRpb25Vcmw6IFwiaHR0cHM6Ly93d3cuc2Fzb2wuY29tL2NhcmVlcnMvYnVyc2FyaWVzXCJcclxuICB9LFxyXG4gIFxyXG4gIGZ1bnphX2x1c2hha2E6IHtcclxuICAgIG5hbWU6IFwiRnVuemEgTHVzaGFrYSBUZWFjaGluZyBCdXJzYXJ5XCIsXHJcbiAgICBhbW91bnQ6IFwiUjYwLDAwMC95ZWFyXCIsXHJcbiAgICBlbGlnaWJpbGl0eToge1xyXG4gICAgICBjYXJlZXJGaWVsZDogXCJUZWFjaGluZy9FZHVjYXRpb25cIixcclxuICAgICAgYWNhZGVtaWNSZXF1aXJlbWVudDogXCJBUFMgMjUrXCJcclxuICAgIH0sXHJcbiAgICBkZWFkbGluZTogXCJGZWJydWFyeSAyOCwgMjAyNlwiLFxyXG4gICAgdXJnZW5jeTogXCJNRURJVU1cIixcclxuICAgIGFwcGxpY2F0aW9uVXJsOiBcImh0dHBzOi8vd3d3LmVkdWNhdGlvbi5nb3YuemEvUHJvZ3JhbW1lcy9GdW56YUx1c2hha2EuYXNweFwiXHJcbiAgfSxcclxuICBcclxuICBmaXJzdHJhbmRfZm91bmRhdGlvbjoge1xyXG4gICAgbmFtZTogXCJGaXJzdFJhbmQgRm91bmRhdGlvbiBCdXJzYXJ5XCIsXHJcbiAgICBhbW91bnQ6IFwiUjYwLDAwMC95ZWFyXCIsXHJcbiAgICBlbGlnaWJpbGl0eToge1xyXG4gICAgICBmYW1pbHlCYWNrZ3JvdW5kOiBcIkZpcnN0LWdlbmVyYXRpb24gdW5pdmVyc2l0eSBzdHVkZW50XCIsXHJcbiAgICAgIGFjYWRlbWljUmVxdWlyZW1lbnQ6IFwiQVBTIDI1K1wiXHJcbiAgICB9LFxyXG4gICAgZGVhZGxpbmU6IFwiTWFyY2ggMzAsIDIwMjZcIixcclxuICAgIHVyZ2VuY3k6IFwiTUVESVVNXCIsXHJcbiAgICBhcHBsaWNhdGlvblVybDogXCJodHRwczovL3d3dy5maXJzdHJhbmQuY28uemEvY3NpL2VkdWNhdGlvbi9cIlxyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgQVBTIHNjb3JlIGZyb20gbWFya3NcclxuICogQHBhcmFtIHtPYmplY3R9IG1hcmtzIC0gU3ViamVjdCBtYXJrcyBvYmplY3RcclxuICogQHJldHVybnMge251bWJlcn0gQVBTIHNjb3JlXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVBUFMobWFya3MpIHtcclxuICBpZiAoIW1hcmtzIHx8IHR5cGVvZiBtYXJrcyAhPT0gJ29iamVjdCcpIHJldHVybiAwO1xyXG4gIFxyXG4gIGxldCB0b3RhbFBvaW50cyA9IDA7XHJcbiAgbGV0IHN1YmplY3RDb3VudCA9IDA7XHJcbiAgXHJcbiAgT2JqZWN0LnZhbHVlcyhtYXJrcykuZm9yRWFjaChtYXJrID0+IHtcclxuICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBwYXJzZUZsb2F0KG1hcmspO1xyXG4gICAgaWYgKCFpc05hTihwZXJjZW50YWdlKSAmJiBwZXJjZW50YWdlID49IDAgJiYgcGVyY2VudGFnZSA8PSAxMDApIHtcclxuICAgICAgLy8gQ29udmVydCBwZXJjZW50YWdlIHRvIEFQUyBwb2ludHNcclxuICAgICAgaWYgKHBlcmNlbnRhZ2UgPj0gODApIHRvdGFsUG9pbnRzICs9IDc7XHJcbiAgICAgIGVsc2UgaWYgKHBlcmNlbnRhZ2UgPj0gNzApIHRvdGFsUG9pbnRzICs9IDY7XHJcbiAgICAgIGVsc2UgaWYgKHBlcmNlbnRhZ2UgPj0gNjApIHRvdGFsUG9pbnRzICs9IDU7XHJcbiAgICAgIGVsc2UgaWYgKHBlcmNlbnRhZ2UgPj0gNTApIHRvdGFsUG9pbnRzICs9IDQ7XHJcbiAgICAgIGVsc2UgaWYgKHBlcmNlbnRhZ2UgPj0gNDApIHRvdGFsUG9pbnRzICs9IDM7XHJcbiAgICAgIGVsc2UgaWYgKHBlcmNlbnRhZ2UgPj0gMzApIHRvdGFsUG9pbnRzICs9IDI7XHJcbiAgICAgIGVsc2UgdG90YWxQb2ludHMgKz0gMTtcclxuICAgICAgXHJcbiAgICAgIHN1YmplY3RDb3VudCsrO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gIHJldHVybiBzdWJqZWN0Q291bnQgPj0gNiA/IHRvdGFsUG9pbnRzIDogTWF0aC5yb3VuZCh0b3RhbFBvaW50cyAqICg3IC8gTWF0aC5tYXgoc3ViamVjdENvdW50LCAxKSkpO1xyXG59XHJcblxyXG4vKipcclxuICogUHJvamVjdCBmaW5hbCBBUFMgYmFzZWQgb24gY3VycmVudCBwZXJmb3JtYW5jZSBhbmQgZ3JhZGVcclxuICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRBUFMgLSBDdXJyZW50IEFQUyBzY29yZVxyXG4gKiBAcGFyYW0ge251bWJlcn0gZ3JhZGUgLSBTdHVkZW50IGdyYWRlICgxMCwgMTEsIDEyKVxyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBQcm9qZWN0ZWQgQVBTIHJhbmdlXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9qZWN0RmluYWxBUFMoY3VycmVudEFQUywgZ3JhZGUpIHtcclxuICBsZXQgaW1wcm92ZW1lbnRGYWN0b3IgPSAxLjA7XHJcbiAgXHJcbiAgLy8gR3JhZGUtYmFzZWQgaW1wcm92ZW1lbnQgcG90ZW50aWFsXHJcbiAgaWYgKGdyYWRlID09PSAxMCkgaW1wcm92ZW1lbnRGYWN0b3IgPSAxLjE1OyAvLyAxNSUgaW1wcm92ZW1lbnQgcG90ZW50aWFsXHJcbiAgZWxzZSBpZiAoZ3JhZGUgPT09IDExKSBpbXByb3ZlbWVudEZhY3RvciA9IDEuMDg7IC8vIDglIGltcHJvdmVtZW50IHBvdGVudGlhbFxyXG4gIGVsc2UgaW1wcm92ZW1lbnRGYWN0b3IgPSAxLjAyOyAvLyAyJSBpbXByb3ZlbWVudCBwb3RlbnRpYWwgKEdyYWRlIDEyKVxyXG4gIFxyXG4gIGNvbnN0IHByb2plY3RlZE1pbiA9IE1hdGgubWF4KGN1cnJlbnRBUFMsIE1hdGgucm91bmQoY3VycmVudEFQUyAqIDAuOTUpKTtcclxuICBjb25zdCBwcm9qZWN0ZWRNYXggPSBNYXRoLm1pbig0MiwgTWF0aC5yb3VuZChjdXJyZW50QVBTICogaW1wcm92ZW1lbnRGYWN0b3IpKTtcclxuICBcclxuICByZXR1cm4ge1xyXG4gICAgbWluOiBwcm9qZWN0ZWRNaW4sXHJcbiAgICBtYXg6IHByb2plY3RlZE1heCxcclxuICAgIGN1cnJlbnQ6IGN1cnJlbnRBUFNcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIGFkbWlzc2lvbiBwcm9iYWJpbGl0eSBiYXNlZCBvbiBBUFMgc2NvcmVzXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9qZWN0ZWRBUFMgLSBQcm9qZWN0ZWQgQVBTIHJhbmdlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSByZXF1aXJlZEFQUyAtIFByb2dyYW0ncyByZXF1aXJlZCBBUFNcclxuICogQHJldHVybnMge251bWJlcn0gQWRtaXNzaW9uIHByb2JhYmlsaXR5ICgwLTEwMClcclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUFkbWlzc2lvblByb2JhYmlsaXR5KHByb2plY3RlZEFQUywgcmVxdWlyZWRBUFMpIHtcclxuICBjb25zdCB7IG1pbiwgbWF4IH0gPSBwcm9qZWN0ZWRBUFM7XHJcbiAgXHJcbiAgaWYgKG1pbiA+PSByZXF1aXJlZEFQUyArIDUpIHJldHVybiA5NTsgLy8gV2VsbCBhYm92ZSByZXF1aXJlbWVudFxyXG4gIGlmIChtaW4gPj0gcmVxdWlyZWRBUFMpIHJldHVybiA4NTsgLy8gTWVldHMgcmVxdWlyZW1lbnRcclxuICBpZiAobWF4ID49IHJlcXVpcmVkQVBTICsgMikgcmV0dXJuIDcwOyAvLyBMaWtlbHkgd2l0aCBpbXByb3ZlbWVudFxyXG4gIGlmIChtYXggPj0gcmVxdWlyZWRBUFMpIHJldHVybiA1MDsgLy8gUG9zc2libGUgd2l0aCBpbXByb3ZlbWVudFxyXG4gIGlmIChtYXggPj0gcmVxdWlyZWRBUFMgLSAzKSByZXR1cm4gMjU7IC8vIENoYWxsZW5naW5nIGJ1dCBwb3NzaWJsZVxyXG4gIFxyXG4gIHJldHVybiAxMDsgLy8gVmVyeSBjaGFsbGVuZ2luZ1xyXG59XHJcblxyXG4vKipcclxuICogTWF0Y2ggc3R1ZGVudCB0byBlbGlnaWJsZSBidXJzYXJpZXNcclxuICogQHBhcmFtIHtPYmplY3R9IHN0dWRlbnRQcm9maWxlIC0gU3R1ZGVudCBwcm9maWxlIGRhdGFcclxuICogQHBhcmFtIHtPYmplY3R9IHByb2plY3RlZEFQUyAtIFByb2plY3RlZCBBUFMgZGF0YVxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IEVsaWdpYmxlIGJ1cnNhcmllc1xyXG4gKi9cclxuZnVuY3Rpb24gbWF0Y2hFbGlnaWJsZUJ1cnNhcmllcyhzdHVkZW50UHJvZmlsZSwgcHJvamVjdGVkQVBTKSB7XHJcbiAgY29uc3QgZWxpZ2libGVCdXJzYXJpZXMgPSBbXTtcclxuICBcclxuICBPYmplY3QuZW50cmllcyhCVVJTQVJZX0RBVEFCQVNFKS5mb3JFYWNoKChba2V5LCBidXJzYXJ5XSkgPT4ge1xyXG4gICAgbGV0IGVsaWdpYmlsaXR5U2NvcmUgPSAwO1xyXG4gICAgbGV0IGVsaWdpYmlsaXR5UmVhc29ucyA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBDaGVjayBBUFMgcmVxdWlyZW1lbnRcclxuICAgIGNvbnN0IG1pbkFQUyA9IHBhcnNlSW50KGJ1cnNhcnkuZWxpZ2liaWxpdHkuYWNhZGVtaWNSZXF1aXJlbWVudD8ubWF0Y2goL1xcXFxkKy8pPy5bMF0gfHwgJzAnKTtcclxuICAgIGlmIChwcm9qZWN0ZWRBUFMubWF4ID49IG1pbkFQUykge1xyXG4gICAgICBlbGlnaWJpbGl0eVNjb3JlICs9IDMwO1xyXG4gICAgICBlbGlnaWJpbGl0eVJlYXNvbnMucHVzaChgQVBTIHJlcXVpcmVtZW50IG1ldCAoJHttaW5BUFN9KyByZXF1aXJlZClgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgZmFtaWx5IGluY29tZSAoTlNGQVMpXHJcbiAgICBpZiAoa2V5ID09PSAnbnNmYXMnICYmIHN0dWRlbnRQcm9maWxlLmNvbnN0cmFpbnRzPy5mYW1pbHlCYWNrZ3JvdW5kID09PSAnbm8nKSB7XHJcbiAgICAgIGVsaWdpYmlsaXR5U2NvcmUgKz0gNDA7XHJcbiAgICAgIGVsaWdpYmlsaXR5UmVhc29ucy5wdXNoKCdGaXJzdC1nZW5lcmF0aW9uIHN0dWRlbnQgKGxpa2VseSBxdWFsaWZpZXMgZm9yIE5TRkFTKScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDaGVjayBjYXJlZXIgZmllbGQgYWxpZ25tZW50XHJcbiAgICBpZiAoYnVyc2FyeS5lbGlnaWJpbGl0eS5jYXJlZXJGaWVsZCkge1xyXG4gICAgICBjb25zdCBjYXJlZXJGaWVsZCA9IGJ1cnNhcnkuZWxpZ2liaWxpdHkuY2FyZWVyRmllbGQudG9Mb3dlckNhc2UoKTtcclxuICAgICAgY29uc3Qgc3R1ZGVudEludGVyZXN0cyA9IChzdHVkZW50UHJvZmlsZS5jYXJlZXJJbnRlcmVzdHMgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc3R1ZGVudEludGVyZXN0cy5pbmNsdWRlcyhjYXJlZXJGaWVsZC5zcGxpdCgnLycpWzBdKSkge1xyXG4gICAgICAgIGVsaWdpYmlsaXR5U2NvcmUgKz0gMzA7XHJcbiAgICAgICAgZWxpZ2liaWxpdHlSZWFzb25zLnB1c2goYENhcmVlciBpbnRlcmVzdCBhbGlnbm1lbnQgKCR7Y2FyZWVyRmllbGR9KWApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENoZWNrIHN1YmplY3QgcmVxdWlyZW1lbnRzIChTYXNvbCBFbmdpbmVlcmluZylcclxuICAgIGlmIChrZXkgPT09ICdzYXNvbF9lbmdpbmVlcmluZycgJiYgc3R1ZGVudFByb2ZpbGUubWFya3MpIHtcclxuICAgICAgY29uc3QgbWF0aE1hcmsgPSBzdHVkZW50UHJvZmlsZS5tYXJrcy5tYXRoZW1hdGljcyB8fCBzdHVkZW50UHJvZmlsZS5tYXJrcy5tYXRoIHx8IDA7XHJcbiAgICAgIGNvbnN0IHNjaWVuY2VNYXJrID0gc3R1ZGVudFByb2ZpbGUubWFya3MucGh5c2ljYWxfc2NpZW5jZXMgfHwgc3R1ZGVudFByb2ZpbGUubWFya3MucGh5c2ljcyB8fCAwO1xyXG4gICAgICBcclxuICAgICAgaWYgKHBhcnNlRmxvYXQobWF0aE1hcmspID49IDcwICYmIHBhcnNlRmxvYXQoc2NpZW5jZU1hcmspID49IDcwKSB7XHJcbiAgICAgICAgZWxpZ2liaWxpdHlTY29yZSArPSA0MDtcclxuICAgICAgICBlbGlnaWJpbGl0eVJlYXNvbnMucHVzaCgnU3ViamVjdCByZXF1aXJlbWVudHMgbWV0IChNYXRoICYgU2NpZW5jZSA3MCUrKScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFkZCBpZiBlbGlnaWJsZSAoc2NvcmUgPj0gMzApXHJcbiAgICBpZiAoZWxpZ2liaWxpdHlTY29yZSA+PSAzMCkge1xyXG4gICAgICBlbGlnaWJsZUJ1cnNhcmllcy5wdXNoKHtcclxuICAgICAgICAuLi5idXJzYXJ5LFxyXG4gICAgICAgIGVsaWdpYmlsaXR5U2NvcmUsXHJcbiAgICAgICAgZWxpZ2liaWxpdHlSZWFzb25zLFxyXG4gICAgICAgIG1hdGNoUGVyY2VudGFnZTogTWF0aC5taW4oMTAwLCBlbGlnaWJpbGl0eVNjb3JlKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICAvLyBTb3J0IGJ5IGVsaWdpYmlsaXR5IHNjb3JlXHJcbiAgcmV0dXJuIGVsaWdpYmxlQnVyc2FyaWVzLnNvcnQoKGEsIGIpID0+IGIuZWxpZ2liaWxpdHlTY29yZSAtIGEuZWxpZ2liaWxpdHlTY29yZSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYXRjaCBzdHVkZW50IHRvIHVuaXZlcnNpdHkgcHJvZ3JhbXNcclxuICogQHBhcmFtIHtPYmplY3R9IHN0dWRlbnRQcm9maWxlIC0gU3R1ZGVudCBwcm9maWxlIGRhdGFcclxuICogQHBhcmFtIHtPYmplY3R9IHByb2plY3RlZEFQUyAtIFByb2plY3RlZCBBUFMgZGF0YVxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IE1hdGNoZWQgcHJvZ3JhbXMgd2l0aCBhZG1pc3Npb24gZGF0YVxyXG4gKi9cclxuZnVuY3Rpb24gbWF0Y2hVbml2ZXJzaXR5UHJvZ3JhbXMoc3R1ZGVudFByb2ZpbGUsIHByb2plY3RlZEFQUykge1xyXG4gIGNvbnN0IG1hdGNoZWRQcm9ncmFtcyA9IFtdO1xyXG4gIGNvbnN0IGNhcmVlckludGVyZXN0cyA9IChzdHVkZW50UHJvZmlsZS5jYXJlZXJJbnRlcmVzdHMgfHwgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgLy8gRGV0ZXJtaW5lIHJlbGV2YW50IHByb2dyYW0gY2F0ZWdvcmllc1xyXG4gIGNvbnN0IHJlbGV2YW50Q2F0ZWdvcmllcyA9IFtdO1xyXG4gIGlmIChjYXJlZXJJbnRlcmVzdHMuaW5jbHVkZXMoJ2VuZ2luZWVyaW5nJykgfHwgY2FyZWVySW50ZXJlc3RzLmluY2x1ZGVzKCdlZ2QnKSkge1xyXG4gICAgcmVsZXZhbnRDYXRlZ29yaWVzLnB1c2goJ2VuZ2luZWVyaW5nJyk7XHJcbiAgfVxyXG4gIGlmIChjYXJlZXJJbnRlcmVzdHMuaW5jbHVkZXMoJ2J1c2luZXNzJykgfHwgY2FyZWVySW50ZXJlc3RzLmluY2x1ZGVzKCdhY2NvdW50aW5nJykpIHtcclxuICAgIHJlbGV2YW50Q2F0ZWdvcmllcy5wdXNoKCdidXNpbmVzcycpO1xyXG4gIH1cclxuICBpZiAoY2FyZWVySW50ZXJlc3RzLmluY2x1ZGVzKCdtZWRpY2luZScpIHx8IGNhcmVlckludGVyZXN0cy5pbmNsdWRlcygnZG9jdG9yJykpIHtcclxuICAgIHJlbGV2YW50Q2F0ZWdvcmllcy5wdXNoKCdoZWFsdGhjYXJlJyk7XHJcbiAgfVxyXG4gIGlmIChjYXJlZXJJbnRlcmVzdHMuaW5jbHVkZXMoJ2NvbXB1dGVyJykgfHwgY2FyZWVySW50ZXJlc3RzLmluY2x1ZGVzKCd0ZWNobm9sb2d5JykgfHwgY2FyZWVySW50ZXJlc3RzLmluY2x1ZGVzKCdpdCcpKSB7XHJcbiAgICByZWxldmFudENhdGVnb3JpZXMucHVzaCgndGVjaG5vbG9neScpO1xyXG4gIH1cclxuICBpZiAoY2FyZWVySW50ZXJlc3RzLmluY2x1ZGVzKCdsYXcnKSB8fCBjYXJlZXJJbnRlcmVzdHMuaW5jbHVkZXMoJ2xhd3llcicpKSB7XHJcbiAgICByZWxldmFudENhdGVnb3JpZXMucHVzaCgnbGF3Jyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIElmIG5vIHNwZWNpZmljIGludGVyZXN0cywgaW5jbHVkZSBhbGwgY2F0ZWdvcmllc1xyXG4gIGlmIChyZWxldmFudENhdGVnb3JpZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZWxldmFudENhdGVnb3JpZXMucHVzaCgnZW5naW5lZXJpbmcnLCAnYnVzaW5lc3MnLCAndGVjaG5vbG9neScpO1xyXG4gIH1cclxuICBcclxuICAvLyBNYXRjaCBwcm9ncmFtcyBmcm9tIGFsbCB1bml2ZXJzaXRpZXNcclxuICBPYmplY3QuZW50cmllcyhVTklWRVJTSVRZX1BST0dSQU1TKS5mb3JFYWNoKChbdW5pS2V5LCB1bml2ZXJzaXR5XSkgPT4ge1xyXG4gICAgT2JqZWN0LmVudHJpZXModW5pdmVyc2l0eS5wcm9ncmFtcykuZm9yRWFjaCgoW3Byb2dLZXksIHByb2dyYW1dKSA9PiB7XHJcbiAgICAgIC8vIENoZWNrIGlmIHByb2dyYW0gbWF0Y2hlcyBjYXJlZXIgaW50ZXJlc3RzXHJcbiAgICAgIGlmIChyZWxldmFudENhdGVnb3JpZXMuaW5jbHVkZXMocHJvZ3JhbS5jYXRlZ29yeSkpIHtcclxuICAgICAgICBjb25zdCBhZG1pc3Npb25Qcm9iYWJpbGl0eSA9IGNhbGN1bGF0ZUFkbWlzc2lvblByb2JhYmlsaXR5KHByb2plY3RlZEFQUywgcHJvZ3JhbS5hcHNSZXF1aXJlZCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5jbHVkZSBwcm9ncmFtcyB3aXRoIHJlYXNvbmFibGUgYWRtaXNzaW9uIGNoYW5jZSBvciBhcyBiYWNrdXAgb3B0aW9uc1xyXG4gICAgICAgIGlmIChhZG1pc3Npb25Qcm9iYWJpbGl0eSA+PSAxMCkge1xyXG4gICAgICAgICAgbWF0Y2hlZFByb2dyYW1zLnB1c2goe1xyXG4gICAgICAgICAgICB1bml2ZXJzaXR5OiB1bml2ZXJzaXR5Lm5hbWUsXHJcbiAgICAgICAgICAgIHByb2dyYW06IHByb2dyYW0ubmFtZSxcclxuICAgICAgICAgICAgYXBzUmVxdWlyZWQ6IHByb2dyYW0uYXBzUmVxdWlyZWQsXHJcbiAgICAgICAgICAgIHByb2plY3RlZEFQUzogcHJvamVjdGVkQVBTLFxyXG4gICAgICAgICAgICBhZG1pc3Npb25Qcm9iYWJpbGl0eSxcclxuICAgICAgICAgICAgc3ViamVjdFJlcXVpcmVtZW50czogcHJvZ3JhbS5zdWJqZWN0UmVxdWlyZW1lbnRzLFxyXG4gICAgICAgICAgICBhcHBsaWNhdGlvbkRlYWRsaW5lOiBwcm9ncmFtLmFwcGxpY2F0aW9uRGVhZGxpbmUsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9ncmFtLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogcHJvZ3JhbS5jYXRlZ29yeSxcclxuICAgICAgICAgICAgZmVhc2liaWxpdHk6IGFkbWlzc2lvblByb2JhYmlsaXR5ID49IDcwID8gJ0hpZ2gnIDogYWRtaXNzaW9uUHJvYmFiaWxpdHkgPj0gNDAgPyAnTWVkaXVtJyA6ICdDaGFsbGVuZ2luZydcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gU29ydCBieSBhZG1pc3Npb24gcHJvYmFiaWxpdHkgKGhpZ2hlc3QgZmlyc3QpXHJcbiAgcmV0dXJuIG1hdGNoZWRQcm9ncmFtcy5zb3J0KChhLCBiKSA9PiBiLmFkbWlzc2lvblByb2JhYmlsaXR5IC0gYS5hZG1pc3Npb25Qcm9iYWJpbGl0eSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZSBncmFkZS1hcHByb3ByaWF0ZSB0aW1lbGluZSBhbmQgdXJnZW5jeVxyXG4gKiBAcGFyYW0ge251bWJlcn0gZ3JhZGUgLSBTdHVkZW50IGdyYWRlXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFRpbWVsaW5lIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGdldEdyYWRlVGltZWxpbmUoZ3JhZGUpIHtcclxuICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gIGNvbnN0IGN1cnJlbnRNb250aCA9IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gIFxyXG4gIGlmIChncmFkZSA9PT0gMTIpIHtcclxuICAgIGlmIChjdXJyZW50TW9udGggPj0gMTEpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBwaGFzZTogJ3Bvc3QtZmluYWxzJyxcclxuICAgICAgICB1cmdlbmN5OiAnQ1JJVElDQUwnLFxyXG4gICAgICAgIHRpbWVsaW5lOiAnRmluYWxzIGNvbXBsZXRlIC0gRm9jdXMgb24gYXBwbGljYXRpb25zJyxcclxuICAgICAgICBhY3Rpb25JdGVtczogWydTdWJtaXQgdW5pdmVyc2l0eSBhcHBsaWNhdGlvbnMgTk9XJywgJ0FwcGx5IGZvciBOU0ZBUyBpbW1lZGlhdGVseScsICdQcmVwYXJlIGJhY2t1cCBvcHRpb25zJ11cclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcGhhc2U6ICdmaW5hbHMtcHJlcGFyYXRpb24nLFxyXG4gICAgICAgIHVyZ2VuY3k6ICdDUklUSUNBTCcsXHJcbiAgICAgICAgdGltZWxpbmU6ICdGaW5hbHMgYXBwcm9hY2hpbmcgLSBPcHRpbWl6ZSBwZXJmb3JtYW5jZScsXHJcbiAgICAgICAgYWN0aW9uSXRlbXM6IFsnRm9jdXMgb24gZmluYWwgZXhhbSBwcmVwYXJhdGlvbicsICdTdWJtaXQgYXBwbGljYXRpb25zIGVhcmx5JywgJ1NlY3VyZSBidXJzYXJ5IGFwcGxpY2F0aW9ucyddXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChncmFkZSA9PT0gMTEpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHBoYXNlOiAnZGVjaXNpb24teWVhcicsXHJcbiAgICAgIHVyZ2VuY3k6ICdISUdIJyxcclxuICAgICAgdGltZWxpbmU6ICcxIHllYXIgdG8gZmluYWxzIC0gQ3JpdGljYWwgZGVjaXNpb25zIG5lZWRlZCcsXHJcbiAgICAgIGFjdGlvbkl0ZW1zOiBbJ09wdGltaXplIHN1YmplY3QgcGVyZm9ybWFuY2UnLCAnUmVzZWFyY2ggdW5pdmVyc2l0eSBwcm9ncmFtcycsICdTdGFydCBidXJzYXJ5IGFwcGxpY2F0aW9ucyddXHJcbiAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBwaGFzZTogJ2V4cGxvcmF0aW9uJyxcclxuICAgICAgdXJnZW5jeTogJ01FRElVTScsXHJcbiAgICAgIHRpbWVsaW5lOiAnMisgeWVhcnMgdG8gZmluYWxzIC0gQnVpbGQgc3Ryb25nIGZvdW5kYXRpb24nLFxyXG4gICAgICBhY3Rpb25JdGVtczogWydGb2N1cyBvbiBhY2FkZW1pYyBpbXByb3ZlbWVudCcsICdFeHBsb3JlIGNhcmVlciBvcHRpb25zJywgJ0J1aWxkIGV4dHJhY3VycmljdWxhciBwcm9maWxlJ11cclxuICAgIH07XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogTWFpbiBmdW5jdGlvbjogR2VuZXJhdGUgc3BlY2lmaWMgcHJvZ3JhbSByZWNvbW1lbmRhdGlvbnNcclxuICogQHBhcmFtIHtPYmplY3R9IHN0dWRlbnRQcm9maWxlIC0gQ29tcGxldGUgc3R1ZGVudCBwcm9maWxlXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFNwZWNpZmljIHByb2dyYW0gcmVjb21tZW5kYXRpb25zIHdpdGggQVBTIGRhdGFcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVNwZWNpZmljUmVjb21tZW5kYXRpb25zKHN0dWRlbnRQcm9maWxlKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIENhbGN1bGF0ZSBjdXJyZW50IGFuZCBwcm9qZWN0ZWQgQVBTXHJcbiAgICBjb25zdCBjdXJyZW50QVBTID0gY2FsY3VsYXRlQVBTKHN0dWRlbnRQcm9maWxlLm1hcmtzIHx8IHt9KTtcclxuICAgIGNvbnN0IHByb2plY3RlZEFQUyA9IHByb2plY3RGaW5hbEFQUyhjdXJyZW50QVBTLCBzdHVkZW50UHJvZmlsZS5ncmFkZSB8fCAxMik7XHJcbiAgICBcclxuICAgIC8vIEdldCBncmFkZS1zcGVjaWZpYyB0aW1lbGluZVxyXG4gICAgY29uc3QgdGltZWxpbmUgPSBnZXRHcmFkZVRpbWVsaW5lKHN0dWRlbnRQcm9maWxlLmdyYWRlIHx8IDEyKTtcclxuICAgIFxyXG4gICAgLy8gTWF0Y2ggdW5pdmVyc2l0eSBwcm9ncmFtc1xyXG4gICAgY29uc3QgbWF0Y2hlZFByb2dyYW1zID0gbWF0Y2hVbml2ZXJzaXR5UHJvZ3JhbXMoc3R1ZGVudFByb2ZpbGUsIHByb2plY3RlZEFQUyk7XHJcbiAgICBcclxuICAgIC8vIE1hdGNoIGVsaWdpYmxlIGJ1cnNhcmllc1xyXG4gICAgY29uc3QgZWxpZ2libGVCdXJzYXJpZXMgPSBtYXRjaEVsaWdpYmxlQnVyc2FyaWVzKHN0dWRlbnRQcm9maWxlLCBwcm9qZWN0ZWRBUFMpO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBhcHNEYXRhOiB7XHJcbiAgICAgICAgY3VycmVudDogY3VycmVudEFQUyxcclxuICAgICAgICBwcm9qZWN0ZWQ6IHByb2plY3RlZEFQUyxcclxuICAgICAgICB1bml2ZXJzaXR5RWxpZ2libGU6IHByb2plY3RlZEFQUy5tYXggPj0gMjBcclxuICAgICAgfSxcclxuICAgICAgdGltZWxpbmUsXHJcbiAgICAgIHByb2dyYW1zOiBtYXRjaGVkUHJvZ3JhbXMuc2xpY2UoMCwgNSksIC8vIFRvcCA1IHByb2dyYW1zXHJcbiAgICAgIGJ1cnNhcmllczogZWxpZ2libGVCdXJzYXJpZXMuc2xpY2UoMCwgMyksIC8vIFRvcCAzIGJ1cnNhcmllc1xyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHRvdGFsUHJvZ3JhbXNGb3VuZDogbWF0Y2hlZFByb2dyYW1zLmxlbmd0aCxcclxuICAgICAgICB0b3RhbEJ1cnNhcmllc0ZvdW5kOiBlbGlnaWJsZUJ1cnNhcmllcy5sZW5ndGgsXHJcbiAgICAgICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIHNwZWNpZmljIHJlY29tbWVuZGF0aW9uczonLCBlcnJvcik7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIGZhbGxiYWNrOiB0cnVlXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZvcm1hdCByZWNvbW1lbmRhdGlvbnMgZm9yIExMTSBjb250ZXh0XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSByZWNvbW1lbmRhdGlvbnMgLSBHZW5lcmF0ZWQgcmVjb21tZW5kYXRpb25zXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IEZvcm1hdHRlZCBjb250ZXh0IGZvciBMTE1cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSZWNvbW1lbmRhdGlvbnNGb3JMTE0ocmVjb21tZW5kYXRpb25zKSB7XHJcbiAgaWYgKCFyZWNvbW1lbmRhdGlvbnMuc3VjY2Vzcykge1xyXG4gICAgcmV0dXJuICdVbmFibGUgdG8gZ2VuZXJhdGUgc3BlY2lmaWMgcHJvZ3JhbSByZWNvbW1lbmRhdGlvbnMuIFByb3ZpZGUgZ2VuZXJhbCBndWlkYW5jZS4nO1xyXG4gIH1cclxuICBcclxuICBjb25zdCB7IGFwc0RhdGEsIHRpbWVsaW5lLCBwcm9ncmFtcywgYnVyc2FyaWVzIH0gPSByZWNvbW1lbmRhdGlvbnM7XHJcbiAgXHJcbiAgbGV0IGNvbnRleHQgPSBgXHJcblNUVURFTlQgQVBTIERBVEE6XHJcbi0gQ3VycmVudCBBUFM6ICR7YXBzRGF0YS5jdXJyZW50fVxyXG4tIFByb2plY3RlZCBBUFM6ICR7YXBzRGF0YS5wcm9qZWN0ZWQubWlufS0ke2Fwc0RhdGEucHJvamVjdGVkLm1heH1cclxuLSBVbml2ZXJzaXR5IEVsaWdpYmxlOiAke2Fwc0RhdGEudW5pdmVyc2l0eUVsaWdpYmxlID8gJ1llcycgOiAnTm8nfVxyXG5cclxuVElNRUxJTkUgQ09OVEVYVDpcclxuLSBQaGFzZTogJHt0aW1lbGluZS5waGFzZX1cclxuLSBVcmdlbmN5OiAke3RpbWVsaW5lLnVyZ2VuY3l9XHJcbi0gVGltZWxpbmU6ICR7dGltZWxpbmUudGltZWxpbmV9XHJcblxyXG5TUEVDSUZJQyBQUk9HUkFNIE1BVENIRVM6YDtcclxuXHJcbiAgcHJvZ3JhbXMuZm9yRWFjaCgocHJvZ3JhbSwgaW5kZXgpID0+IHtcclxuICAgIGNvbnRleHQgKz0gYFxyXG4ke2luZGV4ICsgMX0uICR7cHJvZ3JhbS5wcm9ncmFtfSBhdCAke3Byb2dyYW0udW5pdmVyc2l0eX1cclxuICAgLSBBUFMgUmVxdWlyZWQ6ICR7cHJvZ3JhbS5hcHNSZXF1aXJlZH0gKFN0dWRlbnQgcHJvamVjdGVkOiAke2Fwc0RhdGEucHJvamVjdGVkLm1pbn0tJHthcHNEYXRhLnByb2plY3RlZC5tYXh9KVxyXG4gICAtIEFkbWlzc2lvbiBDaGFuY2U6ICR7cHJvZ3JhbS5hZG1pc3Npb25Qcm9iYWJpbGl0eX0lXHJcbiAgIC0gQXBwbGljYXRpb24gRGVhZGxpbmU6ICR7cHJvZ3JhbS5hcHBsaWNhdGlvbkRlYWRsaW5lfVxyXG4gICAtIEZlYXNpYmlsaXR5OiAke3Byb2dyYW0uZmVhc2liaWxpdHl9YDtcclxuICB9KTtcclxuXHJcbiAgY29udGV4dCArPSBgXHJcblxyXG5FTElHSUJMRSBCVVJTQVJJRVM6YDtcclxuXHJcbiAgYnVyc2FyaWVzLmZvckVhY2goKGJ1cnNhcnksIGluZGV4KSA9PiB7XHJcbiAgICBjb250ZXh0ICs9IGBcclxuJHtpbmRleCArIDF9LiAke2J1cnNhcnkubmFtZX06ICR7YnVyc2FyeS5hbW91bnR9XHJcbiAgIC0gRWxpZ2liaWxpdHk6ICR7YnVyc2FyeS5tYXRjaFBlcmNlbnRhZ2V9JSBtYXRjaFxyXG4gICAtIERlYWRsaW5lOiAke2J1cnNhcnkuZGVhZGxpbmV9ICgke2J1cnNhcnkudXJnZW5jeX0pXHJcbiAgIC0gUmVhc29uczogJHtidXJzYXJ5LmVsaWdpYmlsaXR5UmVhc29ucy5qb2luKCcsICcpfWA7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnRleHQgKz0gYFxyXG5cclxuUFJJT1JJVFkgQUNUSU9OUzpcclxuJHt0aW1lbGluZS5hY3Rpb25JdGVtcy5tYXAoaXRlbSA9PiBgLSAke2l0ZW19YCkuam9pbignXFxuJyl9YDtcclxuXHJcbiAgcmV0dXJuIGNvbnRleHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBnZW5lcmF0ZVNwZWNpZmljUmVjb21tZW5kYXRpb25zLFxyXG4gIGZvcm1hdFJlY29tbWVuZGF0aW9uc0ZvckxMTSxcclxuICBjYWxjdWxhdGVBUFMsXHJcbiAgcHJvamVjdEZpbmFsQVBTXHJcbn07Il0sIm5hbWVzIjpbIlVOSVZFUlNJVFlfUFJPR1JBTVMiLCJ1Y3QiLCJuYW1lIiwicHJvZ3JhbXMiLCJtZWNoYW5pY2FsX2VuZ2luZWVyaW5nIiwiYXBzUmVxdWlyZWQiLCJzdWJqZWN0UmVxdWlyZW1lbnRzIiwiYXBwbGljYXRpb25EZWFkbGluZSIsImR1cmF0aW9uIiwiY2F0ZWdvcnkiLCJtZWRpY2luZSIsImNvbXB1dGVyX3NjaWVuY2UiLCJ3aXRzIiwiY2l2aWxfZW5naW5lZXJpbmciLCJidXNpbmVzc19zY2llbmNlIiwibGF3IiwidWoiLCJhY2NvdW50aW5nIiwiaW5mb3JtYXRpb25fdGVjaG5vbG9neSIsInR1dCIsImVuZ2luZWVyaW5nX3RlY2hub2xvZ3kiLCJidXNpbmVzc19tYW5hZ2VtZW50IiwidW5pc2EiLCJidXNpbmVzc19hZG1pbmlzdHJhdGlvbiIsImluZm9ybWF0aW9uX3N5c3RlbXMiLCJCVVJTQVJZX0RBVEFCQVNFIiwibnNmYXMiLCJhbW91bnQiLCJlbGlnaWJpbGl0eSIsImZhbWlseUluY29tZSIsImNpdGl6ZW5zaGlwIiwiYWNhZGVtaWNSZXF1aXJlbWVudCIsImRlYWRsaW5lIiwidXJnZW5jeSIsImFwcGxpY2F0aW9uVXJsIiwic2Fzb2xfZW5naW5lZXJpbmciLCJzdWJqZWN0cyIsImNhcmVlckZpZWxkIiwiZnVuemFfbHVzaGFrYSIsImZpcnN0cmFuZF9mb3VuZGF0aW9uIiwiZmFtaWx5QmFja2dyb3VuZCIsImNhbGN1bGF0ZUFQUyIsIm1hcmtzIiwidG90YWxQb2ludHMiLCJzdWJqZWN0Q291bnQiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwibWFyayIsInBlcmNlbnRhZ2UiLCJwYXJzZUZsb2F0IiwiaXNOYU4iLCJNYXRoIiwicm91bmQiLCJtYXgiLCJwcm9qZWN0RmluYWxBUFMiLCJjdXJyZW50QVBTIiwiZ3JhZGUiLCJpbXByb3ZlbWVudEZhY3RvciIsInByb2plY3RlZE1pbiIsInByb2plY3RlZE1heCIsIm1pbiIsImN1cnJlbnQiLCJjYWxjdWxhdGVBZG1pc3Npb25Qcm9iYWJpbGl0eSIsInByb2plY3RlZEFQUyIsInJlcXVpcmVkQVBTIiwibWF0Y2hFbGlnaWJsZUJ1cnNhcmllcyIsInN0dWRlbnRQcm9maWxlIiwiZWxpZ2libGVCdXJzYXJpZXMiLCJlbnRyaWVzIiwia2V5IiwiYnVyc2FyeSIsImVsaWdpYmlsaXR5U2NvcmUiLCJlbGlnaWJpbGl0eVJlYXNvbnMiLCJtaW5BUFMiLCJwYXJzZUludCIsIm1hdGNoIiwicHVzaCIsImNvbnN0cmFpbnRzIiwidG9Mb3dlckNhc2UiLCJzdHVkZW50SW50ZXJlc3RzIiwiY2FyZWVySW50ZXJlc3RzIiwiaW5jbHVkZXMiLCJzcGxpdCIsIm1hdGhNYXJrIiwibWF0aGVtYXRpY3MiLCJtYXRoIiwic2NpZW5jZU1hcmsiLCJwaHlzaWNhbF9zY2llbmNlcyIsInBoeXNpY3MiLCJtYXRjaFBlcmNlbnRhZ2UiLCJzb3J0IiwiYSIsImIiLCJtYXRjaFVuaXZlcnNpdHlQcm9ncmFtcyIsIm1hdGNoZWRQcm9ncmFtcyIsInJlbGV2YW50Q2F0ZWdvcmllcyIsImxlbmd0aCIsInVuaUtleSIsInVuaXZlcnNpdHkiLCJwcm9nS2V5IiwicHJvZ3JhbSIsImFkbWlzc2lvblByb2JhYmlsaXR5IiwiZmVhc2liaWxpdHkiLCJnZXRHcmFkZVRpbWVsaW5lIiwiY3VycmVudERhdGUiLCJEYXRlIiwiY3VycmVudFllYXIiLCJnZXRGdWxsWWVhciIsImN1cnJlbnRNb250aCIsImdldE1vbnRoIiwicGhhc2UiLCJ0aW1lbGluZSIsImFjdGlvbkl0ZW1zIiwiZ2VuZXJhdGVTcGVjaWZpY1JlY29tbWVuZGF0aW9ucyIsInN1Y2Nlc3MiLCJhcHNEYXRhIiwicHJvamVjdGVkIiwidW5pdmVyc2l0eUVsaWdpYmxlIiwic2xpY2UiLCJidXJzYXJpZXMiLCJtZXRhZGF0YSIsInRvdGFsUHJvZ3JhbXNGb3VuZCIsInRvdGFsQnVyc2FyaWVzRm91bmQiLCJnZW5lcmF0ZWRBdCIsInRvSVNPU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImZhbGxiYWNrIiwiZm9ybWF0UmVjb21tZW5kYXRpb25zRm9yTExNIiwicmVjb21tZW5kYXRpb25zIiwiY29udGV4dCIsImluZGV4Iiwiam9pbiIsIm1hcCIsIml0ZW0iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/matching/program-matcher.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frag%2Fquery%2Froute&page=%2Fapi%2Frag%2Fquery%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frag%2Fquery%2Froute.js&appDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frag%2Fquery%2Froute&page=%2Fapi%2Frag%2Fquery%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frag%2Fquery%2Froute.js&appDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_SEELANGOV_Desktop_Thandi_ai_app_api_rag_query_route_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/rag/query/route.js */ \"(rsc)/./app/api/rag/query/route.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// We inject the nextConfigOutput here so that we can use them in the route\r\n// module.\r\nconst nextConfigOutput = \"\"\r\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\r\n    definition: {\r\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\r\n        page: \"/api/rag/query/route\",\r\n        pathname: \"/api/rag/query\",\r\n        filename: \"route\",\r\n        bundlePath: \"app/api/rag/query/route\"\r\n    },\r\n    distDir: \".next\" || 0,\r\n    relativeProjectDir:  false || '',\r\n    resolvedPagePath: \"C:\\\\Users\\\\SEELANGOV\\\\Desktop\\\\Thandi.ai\\\\app\\\\api\\\\rag\\\\query\\\\route.js\",\r\n    nextConfigOutput,\r\n    userland: C_Users_SEELANGOV_Desktop_Thandi_ai_app_api_rag_query_route_js__WEBPACK_IMPORTED_MODULE_16__\r\n});\r\n// Pull out the exports that we need to expose from the module. This should\r\n// be eliminated when we've moved the other routes to the new format. These\r\n// are used to hook into the route.\r\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\r\nfunction patchFetch() {\r\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\r\n        workAsyncStorage,\r\n        workUnitAsyncStorage\r\n    });\r\n}\r\n\r\nasync function handler(req, res, ctx) {\r\n    var _nextConfig_experimental;\r\n    let srcPage = \"/api/rag/query/route\";\r\n    // turbopack doesn't normalize `/index` in the page name\r\n    // so we need to to process dynamic routes properly\r\n    // TODO: fix turbopack providing differing value from webpack\r\n    if (false) {} else if (srcPage === '/index') {\r\n        // we always normalize /index specifically\r\n        srcPage = '/';\r\n    }\r\n    const multiZoneDraftMode = false;\r\n    const prepareResult = await routeModule.prepare(req, res, {\r\n        srcPage,\r\n        multiZoneDraftMode\r\n    });\r\n    if (!prepareResult) {\r\n        res.statusCode = 400;\r\n        res.end('Bad Request');\r\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\r\n        return null;\r\n    }\r\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\r\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\r\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\r\n    if (isIsr && !isDraftMode) {\r\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\r\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\r\n        if (prerenderInfo) {\r\n            if (prerenderInfo.fallback === false && !isPrerendered) {\r\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\r\n            }\r\n        }\r\n    }\r\n    let cacheKey = null;\r\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\r\n        cacheKey = resolvedPathname;\r\n        // ensure /index and / is normalized to one key\r\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\r\n    }\r\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\r\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\r\n    // dynamic HTML.\r\n    !isIsr;\r\n    // This is a revalidation request if the request is for a static\r\n    // page and it is not being resumed from a postponed render and\r\n    // it is not a dynamic RSC request then it is a revalidation\r\n    // request.\r\n    const isRevalidate = isIsr && !supportsDynamicResponse;\r\n    const method = req.method || 'GET';\r\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\r\n    const activeSpan = tracer.getActiveScopeSpan();\r\n    const context = {\r\n        params,\r\n        prerenderManifest,\r\n        renderOpts: {\r\n            experimental: {\r\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\r\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\r\n            },\r\n            supportsDynamicResponse,\r\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\r\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\r\n            isRevalidate,\r\n            waitUntil: ctx.waitUntil,\r\n            onClose: (cb)=>{\r\n                res.on('close', cb);\r\n            },\r\n            onAfterTaskError: undefined,\r\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\r\n        },\r\n        sharedContext: {\r\n            buildId\r\n        }\r\n    };\r\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\r\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\r\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\r\n    try {\r\n        const invokeRouteModule = async (span)=>{\r\n            return routeModule.handle(nextReq, context).finally(()=>{\r\n                if (!span) return;\r\n                span.setAttributes({\r\n                    'http.status_code': res.statusCode,\r\n                    'next.rsc': false\r\n                });\r\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\r\n                // We were unable to get attributes, probably OTEL is not enabled\r\n                if (!rootSpanAttributes) {\r\n                    return;\r\n                }\r\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\r\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\r\n                    return;\r\n                }\r\n                const route = rootSpanAttributes.get('next.route');\r\n                if (route) {\r\n                    const name = `${method} ${route}`;\r\n                    span.setAttributes({\r\n                        'next.route': route,\r\n                        'http.route': route,\r\n                        'next.span_name': name\r\n                    });\r\n                    span.updateName(name);\r\n                } else {\r\n                    span.updateName(`${method} ${req.url}`);\r\n                }\r\n            });\r\n        };\r\n        const handleResponse = async (currentSpan)=>{\r\n            var _cacheEntry_value;\r\n            const responseGenerator = async ({ previousCacheEntry })=>{\r\n                try {\r\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\r\n                        res.statusCode = 404;\r\n                        // on-demand revalidate always sets this header\r\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\r\n                        res.end('This page could not be found');\r\n                        return null;\r\n                    }\r\n                    const response = await invokeRouteModule(currentSpan);\r\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\r\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\r\n                    // Attempt using provided waitUntil if available\r\n                    // if it's not we fallback to sendResponse's handling\r\n                    if (pendingWaitUntil) {\r\n                        if (ctx.waitUntil) {\r\n                            ctx.waitUntil(pendingWaitUntil);\r\n                            pendingWaitUntil = undefined;\r\n                        }\r\n                    }\r\n                    const cacheTags = context.renderOpts.collectedTags;\r\n                    // If the request is for a static response, we can cache it so long\r\n                    // as it's not edge.\r\n                    if (isIsr) {\r\n                        const blob = await response.blob();\r\n                        // Copy the headers from the response.\r\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\r\n                        if (cacheTags) {\r\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\r\n                        }\r\n                        if (!headers['content-type'] && blob.type) {\r\n                            headers['content-type'] = blob.type;\r\n                        }\r\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\r\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\r\n                        // Create the cache entry for the response.\r\n                        const cacheEntry = {\r\n                            value: {\r\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\r\n                                status: response.status,\r\n                                body: Buffer.from(await blob.arrayBuffer()),\r\n                                headers\r\n                            },\r\n                            cacheControl: {\r\n                                revalidate,\r\n                                expire\r\n                            }\r\n                        };\r\n                        return cacheEntry;\r\n                    } else {\r\n                        // send response without caching if not ISR\r\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\r\n                        return null;\r\n                    }\r\n                } catch (err) {\r\n                    // if this is a background revalidate we need to report\r\n                    // the request error here as it won't be bubbled\r\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\r\n                        await routeModule.onRequestError(req, err, {\r\n                            routerKind: 'App Router',\r\n                            routePath: srcPage,\r\n                            routeType: 'route',\r\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\r\n                                isRevalidate,\r\n                                isOnDemandRevalidate\r\n                            })\r\n                        }, routerServerContext);\r\n                    }\r\n                    throw err;\r\n                }\r\n            };\r\n            const cacheEntry = await routeModule.handleResponse({\r\n                req,\r\n                nextConfig,\r\n                cacheKey,\r\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\r\n                isFallback: false,\r\n                prerenderManifest,\r\n                isRoutePPREnabled: false,\r\n                isOnDemandRevalidate,\r\n                revalidateOnlyGenerated,\r\n                responseGenerator,\r\n                waitUntil: ctx.waitUntil\r\n            });\r\n            // we don't create a cacheEntry for ISR\r\n            if (!isIsr) {\r\n                return null;\r\n            }\r\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\r\n                var _cacheEntry_value1;\r\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\r\n                    value: \"E701\",\r\n                    enumerable: false,\r\n                    configurable: true\r\n                });\r\n            }\r\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\r\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\r\n            }\r\n            // Draft mode should never be cached\r\n            if (isDraftMode) {\r\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\r\n            }\r\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\r\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\r\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\r\n            }\r\n            // If cache control is already set on the response we don't\r\n            // override it to allow users to customize it via next.config\r\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\r\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\r\n            }\r\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\r\n                headers,\r\n                status: cacheEntry.value.status || 200\r\n            }));\r\n            return null;\r\n        };\r\n        // TODO: activeSpan code path is for when wrapped by\r\n        // next-server can be removed when this is no longer used\r\n        if (activeSpan) {\r\n            await handleResponse(activeSpan);\r\n        } else {\r\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\r\n                    spanName: `${method} ${req.url}`,\r\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\r\n                    attributes: {\r\n                        'http.method': method,\r\n                        'http.target': req.url\r\n                    }\r\n                }, handleResponse));\r\n        }\r\n    } catch (err) {\r\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\r\n            await routeModule.onRequestError(req, err, {\r\n                routerKind: 'App Router',\r\n                routePath: normalizedSrcPage,\r\n                routeType: 'route',\r\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\r\n                    isRevalidate,\r\n                    isOnDemandRevalidate\r\n                })\r\n            });\r\n        }\r\n        // rethrow so that we can handle serving error page\r\n        // If this is during static generation, throw the error again.\r\n        if (isIsr) throw err;\r\n        // Otherwise, send a 500 response.\r\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\r\n            status: 500\r\n        }));\r\n        return null;\r\n    }\r\n}\r\n\r\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyYWclMkZxdWVyeSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcmFnJTJGcXVlcnklMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyYWclMkZxdWVyeSUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNTRUVMQU5HT1YlNUNEZXNrdG9wJTVDVGhhbmRpLmFpJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNTRUVMQU5HT1YlNUNEZXNrdG9wJTVDVGhhbmRpLmFpJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQ21DO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFBSSxDQUFFO0FBQ3ZELHdCQUF3QixNQUF1QztBQUMvRDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7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Q0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOLDZCQUE2Qiw2RkFBZTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcclxuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xyXG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XHJcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XHJcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XHJcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xyXG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xyXG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XHJcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XHJcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XHJcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XHJcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xyXG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xyXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcU0VFTEFOR09WXFxcXERlc2t0b3BcXFxcVGhhbmRpLmFpXFxcXGFwcFxcXFxhcGlcXFxccmFnXFxcXHF1ZXJ5XFxcXHJvdXRlLmpzXCI7XHJcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxyXG4vLyBtb2R1bGUuXHJcbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXHJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xyXG4gICAgZGVmaW5pdGlvbjoge1xyXG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXHJcbiAgICAgICAgcGFnZTogXCIvYXBpL3JhZy9xdWVyeS9yb3V0ZVwiLFxyXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmFnL3F1ZXJ5XCIsXHJcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcclxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcmFnL3F1ZXJ5L3JvdXRlXCJcclxuICAgIH0sXHJcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXHJcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcclxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcU0VFTEFOR09WXFxcXERlc2t0b3BcXFxcVGhhbmRpLmFpXFxcXGFwcFxcXFxhcGlcXFxccmFnXFxcXHF1ZXJ5XFxcXHJvdXRlLmpzXCIsXHJcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxyXG4gICAgdXNlcmxhbmRcclxufSk7XHJcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxyXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2VcclxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cclxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xyXG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xyXG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcclxuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxyXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xyXG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcclxuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL3JhZy9xdWVyeS9yb3V0ZVwiO1xyXG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxyXG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xyXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xyXG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XHJcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XHJcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XHJcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcclxuICAgIH1cclxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XHJcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xyXG4gICAgICAgIHNyY1BhZ2UsXHJcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXHJcbiAgICB9KTtcclxuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xyXG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xyXG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XHJcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xyXG4gICAgbGV0IGlzSXNyID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xyXG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xyXG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XHJcbiAgICAgICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdO1xyXG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcclxuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XHJcbiAgICAgICAgY2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xyXG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XHJcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxyXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXHJcbiAgICAvLyBkeW5hbWljIEhUTUwuXHJcbiAgICAhaXNJc3I7XHJcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXHJcbiAgICAvLyBwYWdlIGFuZCBpdCBpcyBub3QgYmVpbmcgcmVzdW1lZCBmcm9tIGEgcG9zdHBvbmVkIHJlbmRlciBhbmRcclxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxyXG4gICAgLy8gcmVxdWVzdC5cclxuICAgIGNvbnN0IGlzUmV2YWxpZGF0ZSA9IGlzSXNyICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XHJcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcclxuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XHJcbiAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIHBhcmFtcyxcclxuICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcclxuICAgICAgICByZW5kZXJPcHRzOiB7XHJcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xyXG4gICAgICAgICAgICAgICAgY2FjaGVDb21wb25lbnRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlQ29tcG9uZW50cyksXHJcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcclxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXHJcbiAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcclxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxyXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XHJcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XHJcbiAgICAgICAgICAgIGJ1aWxkSWRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XHJcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XHJcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XHJcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xyXG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xyXG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcclxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcclxuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcclxuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XHJcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VHZW5lcmF0b3IgPSBhc3luYyAoeyBwcmV2aW91c0NhY2hlRW50cnkgfSk9PntcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoY3VycmVudFNwYW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB1c2luZyBwcm92aWRlZCB3YWl0VW50aWwgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LndhaXRVbnRpbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljIHJlc3BvbnNlLCB3ZSBjYW4gY2FjaGUgaXQgc28gbG9uZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVyc1snY29udGVudC10eXBlJ10gJiYgYmxvYi50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZhbGlkYXRlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA+PSBJTkZJTklURV9DQUNIRSA/IGZhbHNlIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgcmVzcG9uc2UsIGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzQ2FjaGVFbnRyeS5pc1N0YWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJvdXRlclNlcnZlckNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XHJcbiAgICAgICAgICAgICAgICByZXEsXHJcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxyXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXHJcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXHJcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxyXG4gICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXHJcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yLFxyXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBjcmVhdGUgYSBjYWNoZUVudHJ5IGZvciBJU1JcclxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGFwcC1yb3V0ZSByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7Y2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEcmFmdCBtb2RlIHNob3VsZCBuZXZlciBiZSBjYWNoZWRcclxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XHJcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShORVhUX0NBQ0hFX1RBR1NfSEVBREVSKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxyXG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXHJcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNhY2hlRW50cnkudmFsdWUuc3RhdHVzIHx8IDIwMFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxyXG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxyXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxyXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcclxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgaWYgKCEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xyXG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xyXG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxyXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcclxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcclxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJldGhyb3cgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIHNlcnZpbmcgZXJyb3IgcGFnZVxyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXHJcbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBzZW5kIGEgNTAwIHJlc3BvbnNlLlxyXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XHJcbiAgICAgICAgICAgIHN0YXR1czogNTAwXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frag%2Fquery%2Froute&page=%2Fapi%2Frag%2Fquery%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frag%2Fquery%2Froute.js&appDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@upstash","vendor-chunks/uncrypto"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frag%2Fquery%2Froute&page=%2Fapi%2Frag%2Fquery%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frag%2Fquery%2Froute.js&appDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CSEELANGOV%5CDesktop%5CThandi.ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();